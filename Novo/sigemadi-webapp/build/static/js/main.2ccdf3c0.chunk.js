(this["webpackJsonpsigemadi-webapp"]=this["webpackJsonpsigemadi-webapp"]||[]).push([[0],{145:function(e,t,a){e.exports=a.p+"static/media/Desintegrating_html.b03b05a2.png"},307:function(e,t,a){e.exports=a.p+"static/media/bootsecurity.c2b54b56.key"},449:function(e,t,a){e.exports=a.p+"static/media/iselSigemadi.6601043a.png"},450:function(e,t,a){e.exports=a.p+"static/media/bootsecurity.70aeacc0.crt"},476:function(e,t,a){e.exports=a.p+"static/media/helen.1d77af03.jpg"},478:function(e,t,a){e.exports=a.p+"static/media/matthew.046e91f7.png"},480:function(e,t,a){e.exports=a.p+"static/media/bootsecurity.a1a94f8c.pem"},523:function(e,t,a){e.exports=a(845)},528:function(e,t,a){},537:function(e,t){},539:function(e,t){},64:function(e,t,a){e.exports=a.p+"static/media/SigemadiLogo.a1773ca5.png"},65:function(e,t,a){e.exports=a.p+"static/media/IselAdeetcLogo.bf8ea183.png"},772:function(e,t,a){e.exports=a.p+"static/media/molly.45fdd648.png"},845:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(75),l=a.n(c),i=a(26),o=a(76),u=a(77),s=a(80),m=a(79),d=a(37),f=a(56),h=(a(528),a(8));var p=function(e){var t=Object(n.useState)(""),a=Object(h.a)(t,2),c=a[0],l=a[1];return Object(n.useEffect)((function(){var t=JSON.parse(localStorage.getItem("userinfo"));switch(e.role){case"staff":return l(t.roles.find((function(e){return"staff"==e.name}))?r.a.createElement(d.b,e):r.a.createElement(d.a,{to:t.selectedRole.homeRoute}));case"teacher":return l(t.roles.find((function(e){return"teacher"==e.name}))?r.a.createElement(d.b,e):r.a.createElement(d.a,{to:t.selectedRole.homeRoute}));case"technician":return l(t.roles.find((function(e){return"technician"==e.name}))?r.a.createElement(d.b,e):r.a.createElement(d.a,{to:t.selectedRole.homeRoute}));case"labmanager":return l(t.roles.find((function(e){return"lab_responsible"==e.name}))?r.a.createElement(d.b,e):r.a.createElement(d.a,{to:t.selectedRole.homeRoute}));case"administrator":return l(t.roles.find((function(e){return"administrator"==e.name}))?r.a.createElement(d.b,e):r.a.createElement(d.a,{to:t.selectedRole.homeRoute}));default:return l(r.a.createElement(d.b,e))}}),[e]),c},E=a(449),b=a.n(E),g=a(251),v=a(894),y=a(150),j="http://10.62.73.49:8085/sigemadi/api",O="".concat(j,"/login"),S="".concat(j,"/scientificareas"),k="".concat(j,"/scientificareas/:id"),C="".concat(j,"/subjects"),z="".concat(j,"/subjects/:id"),T="".concat(j,"/scientificareas/:sciAreaId/subjects"),I="".concat(j,"/types"),w="".concat(j,"/types/:id"),_="".concat(j,"/scientificareas/:sciAreaId/types"),x="".concat(j,"/scientificareas/:sciAreaId/types/:id"),R="".concat(j,"/materials"),q="".concat(j,"/materials/:id"),D="".concat(j,"/roles"),A="".concat(j,"/users/:id/roles"),M="".concat(j,"/users/:id"),L="".concat(j,"/users"),N="".concat(j,"/damages?solved=:flag"),B="".concat(j,"/damagesstates"),H="".concat(j,"/damages/:id"),F="".concat(j,"/requests"),P="".concat(j,"/requests/:id"),Y="".concat(j,"/users/:id/requests"),J="".concat(j,"/requests/:id/materials"),K="".concat(j,"/requests/:reqId/materials/:id"),W="".concat(j,"/users/:id/reservations"),U="".concat(j,"/reservations"),G="".concat(j,"/reservations/:id"),Q="".concat(j,"/materials/:id/damages"),V="".concat(j,"/requests/:reqId/materials/:id"),$="".concat(j,"/statistics/toptenmostusedmaterialtypes"),X="".concat(j,"/statistics/toptenmostusedmaterials"),Z="".concat(j,"/statistics/damagespertype"),ee="".concat(j,"/statistics/damagedmaterials"),te="".concat(j,"/statistics/averagetimetorepair"),ae="".concat(j,"/statistics/numberofrequestedhourspertype"),ne="".concat(j,"/statistics/numberofrequestedhourspermaterial"),re="".concat(j,"/statistics/requestspertypebyday"),ce="".concat(j,"/statistics/requestspertypebymonth"),le="".concat(j,"/statistics/requestspertypebyyear"),ie=a(253),oe=a.n(ie),ue=a(24),se=a.n(ue),me=a(450),de=a.n(me),fe=a(307),he=a.n(fe),pe=(new oe.a.Agent({cert:de.a,key:he.a}),se.a.create({headers:{Authorization:"Bearer "+localStorage.getItem("token")}}),a(16)),Ee=(a(738),a(145)),be=a.n(Ee),ge=function(e){var t=e.home,a=localStorage.getItem("userinfo"),n=null!=a?JSON.parse(a).selectedRole.homeRoute:"/";return r.a.createElement("div",{style:{backgroundImage:"url(".concat(be.a,")"),backgroundSize:"cover",height:"100vh",width:"100vw"}},t?r.a.createElement(v.a,{style:{display:"flex"}},r.a.createElement(i.b,{to:n},"Go to Home")):null,r.a.createElement(v.a,{size:"huge",style:{display:"flex",marginTop:"10%"}},"404"),r.a.createElement(v.a,{size:"huge",style:{display:"flex"}},"Page Not Found!"))},ve=function(){return r.a.createElement("div",{style:{backgroundImage:"url(".concat(be.a,")"),backgroundSize:"cover",height:"100vh",width:"100vw"}},r.a.createElement(v.a,{size:"huge",style:{display:"flex",marginTop:"10%"}},"500"),r.a.createElement(v.a,{size:"huge",style:{display:"flex"}},"Internal Server Error!"))},ye=function(){return r.a.createElement("div",{style:{backgroundImage:"url(".concat(be.a,")"),backgroundSize:"cover",height:"100vh",width:"100vw"}},r.a.createElement(v.a,{size:"huge",style:{display:"flex",marginTop:"10%"}},"400"),r.a.createElement(v.a,{size:"huge",style:{display:"flex"}},"Bad Request!"))},je=function(e){if(void 0===e)return Object(pe.toast)({type:"error",title:"Something Went Wrong",time:2e3,size:"mini",description:"Something went wrong, please try again later!"}),r.a.createElement(ve,null);if(201==e.status||200==e.status)Object(pe.toast)({type:"success",title:"Success",time:2e3,size:"mini",description:e.data.status,status:e.status});else{if(Object(pe.toast)({type:"error",title:e.data.title||"Something Went Wrong",time:2e3,size:"mini",description:e.data.detail||"Something went wrong, please try again later!",status:e.data.status}),400==e.status)return r.a.createElement(ye,null);if(401==e.status)return localStorage.clear(),r.a.createElement(d.a,{to:"/login"});if(404==e.status)return r.a.createElement(ge,null);if(500==e.status||504==e.status)return r.a.createElement(ve,null)}};new g.a;var Oe=function(e){return r.a.createElement("div",null,r.a.createElement(pe.SemanticToastContainer,null),r.a.createElement(v.a,{floated:"right",style:{cursor:"pointer",color:"#a22717"},content:"Login"},r.a.createElement(i.b,{to:"/login"},"Login")),r.a.createElement(v.a,{size:"huge"},"SiGeMaDi"),r.a.createElement(y.a,{className:"ui fluid centered image",src:b.a,style:{marginTop:"5%"}}))},Se=a(55),ke=a.n(Se),Ce=a(91),ze=a(466),Te=a(891),Ie=a(318),we=a(852),_e=a(125),xe=a(64),Re=a.n(xe),qe=a(65),De=a.n(qe);var Ae=function(e){var t=Object(n.useState)(""),a=Object(h.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)(""),o=Object(h.a)(i,2),u=o[0],s=o[1];function m(e){"password"==e.target.name?s(e.target.value):l(e.target.value)}function d(){return(d=Object(Ce.a)(ke.a.mark((function t(a){return ke.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),!c||0===c.trim().length||!u||0===u.trim().length){t.next=7;break}return t.next=4,e.login(c,u);case 4:e.onLogin(),t.next=9;break;case 7:return Object(pe.toast)({type:"warning",size:"mini",description:"Please insert a username and a password",title:"Something went wrong",time:2e3}),t.abrupt("return",Promise.resolve());case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return r.a.createElement("div",null,r.a.createElement(pe.SemanticToastContainer,null),r.a.createElement(y.a,{src:Re.a,style:{width:"8%",height:"8%"},floated:"right"}),r.a.createElement(y.a,{src:De.a,size:"small",floated:"left"}),r.a.createElement(ze.a,{centered:!0,style:{marginTop:125,display:"inline-block"}},r.a.createElement(ze.a.Column,{style:{maxWidth:380}},r.a.createElement(v.a,{textAlign:"center"},"SiGeMaDi"),r.a.createElement(Te.a,{size:"large",onSubmit:function(e){return d.apply(this,arguments)}},r.a.createElement(Ie.a,null,r.a.createElement(Te.a.Field,null,r.a.createElement(we.a,{iconPosition:"left",icon:"user",type:"text",name:"username",placeholder:"Your username",onChange:m})),r.a.createElement(Te.a.Field,null,r.a.createElement(we.a,{iconPosition:"left",icon:"key",type:"password",name:"password",placeholder:"Your password",onChange:m})),r.a.createElement(_e.a,{fluid:!0,size:"large",type:"submit",content:"Sign in",icon:"sign in"}))))))},Me=a(893),Le=a(892),Ne=a(53);var Be=function(e){var t=Object(n.useState)([]),a=Object(h.a)(t,2),c=a[0],l=a[1],o=[{name:"administrator",value:r.a.createElement(v.a,{size:"medium",key:"admin"},r.a.createElement(i.b,{to:"/auth/admin",onClick:function(){return u("administrator","/auth/admin")}},"Administrator"))},{name:"lab_responsible",value:r.a.createElement(v.a,{size:"medium",key:"resp"},r.a.createElement(i.b,{to:"/auth/labmanager",onClick:function(){return u("lab_responsible","/auth/labmanager")}},"Laboratory Responsible"))},{name:"teacher",value:r.a.createElement(v.a,{size:"medium",key:"doc"},r.a.createElement(i.b,{to:"/auth/teacher",onClick:function(){return u("teacher","/auth/teacher")}},"Teacher"))},{name:"technician",value:r.a.createElement(v.a,{size:"medium",key:"tecn"},r.a.createElement(i.b,{to:"/auth/tech",onClick:function(){return u("technician","/auth/tech")}},"Technician"))},{name:"staff",value:r.a.createElement(v.a,{size:"medium",key:"func"},r.a.createElement(i.b,{to:"/auth/staff",onClick:function(){return u("staff","/auth/staff")}},"Staff"))}];function u(e,t){var a=JSON.parse(localStorage.getItem("userinfo"));a.selectedRole={name:e,homeRoute:t},localStorage.removeItem("userinfo"),localStorage.setItem("userinfo",JSON.stringify(a))}return Object(n.useEffect)((function(){var e=JSON.parse(localStorage.getItem("userinfo")),t=[];e.roles.map((function(e){return"student"!=e.name?t.push(o.find((function(t){return t.name===e.name})).value):null})),l(t)}),[]),r.a.createElement("div",null,r.a.createElement(v.a,{size:"medium"},"Choose a Role:"),r.a.createElement(pe.SemanticToastContainer,null),r.a.createElement(Me.a,null),0==c.length?r.a.createElement(Le.a,null,"Loading...",r.a.createElement(Ne.a,{name:"circle notched",loading:!0})):c)},He=function(e){var t=e.children,a={display:"inline-block",margin:10,marginBottom:30};return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(v.a,{size:"medium",style:a},r.a.createElement(i.b,{to:"/auth/staff",className:"link"}," Home ",r.a.createElement(Ne.a,{size:"small",name:"home"}))),r.a.createElement(v.a,{size:"medium",style:a},r.a.createElement(i.b,{to:{pathname:"/auth/staff/material"},className:"link"},"Material ",r.a.createElement(Ne.a,{size:"small",name:"microchip"}))),r.a.createElement(v.a,{size:"medium",style:a},r.a.createElement(i.b,{to:"/auth/staff/request",className:"link"},"Request ",r.a.createElement(Ne.a,{size:"small",name:"clipboard list"}))),r.a.createElement(v.a,{size:"medium",style:a},r.a.createElement(i.b,{to:"/",className:"link",onClick:function(){return localStorage.removeItem("token")}},"Logout",r.a.createElement(Ne.a,{size:"small",name:"sign out alternate"}))),r.a.createElement(y.a,{src:Re.a,style:{width:"8%",height:"8%"},floated:"right"}),r.a.createElement(y.a,{src:De.a,size:"small",floated:"left"})),r.a.createElement("div",{style:{marginTop:"7%"}},t))},Fe=a(19),Pe=function(e){var t=e.children,a={display:"inline-block",margin:10,marginBottom:30};return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(v.a,{size:"medium",style:a},r.a.createElement(i.b,{to:"/auth/admin",className:"link"},"Home ",r.a.createElement(Ne.a,{size:"small",name:"home"}))),r.a.createElement(v.a,{size:"medium",style:a},r.a.createElement(i.b,{to:"/auth/admin/usersroles",className:"link"},"Roles ",r.a.createElement(Ne.a,{size:"small",name:"users"}))),r.a.createElement(v.a,{size:"medium",style:a},r.a.createElement(i.b,{to:"/auth/admin/areas",className:"link"},"Scientific Areas ",r.a.createElement(Ne.a,{size:"small",name:"graduation"}))),r.a.createElement(v.a,{size:"medium",style:a},r.a.createElement(i.b,{to:"/auth/admin/statistics",className:"link"},"Statistics ",r.a.createElement(Ne.a,{size:"small",name:"line graph"}))),r.a.createElement(v.a,{size:"medium",style:a},r.a.createElement(i.b,{to:"/",className:"link",onClick:function(){return localStorage.removeItem("token")}},"Logout",r.a.createElement(Ne.a,{size:"small",name:"sign out alternate"}))),r.a.createElement(v.a,{block:!0,size:"large",style:Object(Fe.a)(Object(Fe.a)({},a),{},{marginLeft:"3%"})},r.a.createElement(i.b,{to:"/auth/roles",className:"link"},"Change Role ",r.a.createElement(Ne.a.Group,null,r.a.createElement(Ne.a,{name:"user"}),r.a.createElement(Ne.a,{corner:"bottom right",name:"exchange"})))),r.a.createElement(y.a,{src:Re.a,style:{width:"8%",height:"8%"},floated:"right"}),r.a.createElement(y.a,{src:De.a,size:"small",floated:"left"})),r.a.createElement("div",{style:{marginTop:"7%"}},t))},Ye=function(e){var t=e.children,a={display:"inline-block",margin:10,marginBottom:30};return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(v.a,{size:"medium",style:a},r.a.createElement(i.b,{to:"/auth/tech",className:"link"},"Home ",r.a.createElement(Ne.a,{size:"small",name:"home"}))),r.a.createElement(v.a,{size:"medium",style:a},r.a.createElement(i.b,{to:"/auth/tech/damages",className:"link"},"Material ",r.a.createElement(Ne.a,{size:"small",name:"bug"}))),r.a.createElement(v.a,{size:"medium",style:a},r.a.createElement(i.b,{to:"/auth/tech/history",className:"link"},"History ",r.a.createElement(Ne.a,{size:"small",name:"history"}))),r.a.createElement(v.a,{size:"medium",style:a},r.a.createElement(i.b,{to:"/",className:"link",onClick:function(){return localStorage.removeItem("token")}},"Logout",r.a.createElement(Ne.a,{size:"small",name:"sign out alternate"}))),r.a.createElement(v.a,{block:!0,size:"large",style:Object(Fe.a)(Object(Fe.a)({},a),{},{marginLeft:"3%"})},r.a.createElement(i.b,{to:"/auth/roles",className:"link"},"Change Role ",r.a.createElement(Ne.a.Group,null,r.a.createElement(Ne.a,{name:"user"}),r.a.createElement(Ne.a,{corner:"bottom right",name:"exchange"})))),r.a.createElement(y.a,{src:Re.a,style:{width:"8%",height:"8%"},floated:"right"}),r.a.createElement(y.a,{src:De.a,size:"small",floated:"left"})),r.a.createElement("div",{style:{marginTop:"7%"}},t))},Je=function(e){var t=e.children,a={display:"inline-block",margin:10,marginBottom:30};return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(v.a,{size:"medium",style:a},r.a.createElement(i.b,{to:"/auth/teacher",className:"link"},"Home ",r.a.createElement(Ne.a,{size:"small",name:"home"}))),r.a.createElement(v.a,{size:"medium",style:a},r.a.createElement(i.b,{to:"/auth/teacher/material",className:"link"},"Material ",r.a.createElement(Ne.a,{size:"small",name:"microchip"}))),r.a.createElement(v.a,{size:"medium",style:a},r.a.createElement(i.b,{to:"/auth/teacher/reservation",className:"link"},"Reservation ",r.a.createElement(Ne.a,{size:"small",name:"file alternate"}))),r.a.createElement(v.a,{size:"medium",style:a},r.a.createElement(i.b,{to:"/",className:"link",onClick:function(){return localStorage.removeItem("token")}},"Logout",r.a.createElement(Ne.a,{size:"small",name:"sign out alternate"}))),r.a.createElement(v.a,{block:!0,size:"large",style:Object(Fe.a)(Object(Fe.a)({},a),{},{marginLeft:"3%"})},r.a.createElement(i.b,{to:"/auth/roles",className:"link"},"Change Role ",r.a.createElement(Ne.a.Group,null,r.a.createElement(Ne.a,{name:"user"}),r.a.createElement(Ne.a,{corner:"bottom right",name:"exchange"})))),r.a.createElement(y.a,{src:Re.a,style:{width:"8%",height:"8%"},floated:"right"}),r.a.createElement(y.a,{src:De.a,size:"small",floated:"left"})),r.a.createElement("div",{style:{marginTop:"7%"}},t))},Ke=function(e){var t=e.children,a={display:"inline-block",margin:10,marginBottom:30};return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(v.a,{size:"medium",style:a},r.a.createElement(i.b,{to:"/auth/labmanager",className:"link"},"Home ",r.a.createElement(Ne.a,{size:"small",name:"home"}))),r.a.createElement(v.a,{size:"medium",style:a},r.a.createElement(i.b,{to:"/auth/labmanager/material",className:"link"},"Material ",r.a.createElement(Ne.a,{size:"small",name:"microchip"}))),r.a.createElement(v.a,{size:"medium",style:a},r.a.createElement(i.b,{to:"/auth/labmanager/type",className:"link"},"Material Types ",r.a.createElement(Ne.a,{size:"small",name:"tags"}))),r.a.createElement(v.a,{size:"medium",style:a},r.a.createElement(i.b,{to:"/auth/labmanager/statistics",className:"link"},"Statistics ",r.a.createElement(Ne.a,{size:"small",name:"line graph"}))),r.a.createElement(v.a,{size:"medium",style:a},r.a.createElement(i.b,{to:"/",className:"link",onClick:function(){return localStorage.removeItem("token")}},"Logout",r.a.createElement(Ne.a,{size:"small",name:"sign out alternate"}))),r.a.createElement(v.a,{block:!0,size:"large",style:Object(Fe.a)(Object(Fe.a)({},a),{},{marginLeft:"3%"})},r.a.createElement(i.b,{to:"/auth/roles",className:"link"},"Change Role ",r.a.createElement(Ne.a.Group,null,r.a.createElement(Ne.a,{name:"user"}),r.a.createElement(Ne.a,{corner:"bottom right",name:"exchange"})))),r.a.createElement(y.a,{src:Re.a,style:{width:"8%",height:"8%"},floated:"right"}),r.a.createElement(y.a,{src:De.a,size:"small",floated:"left"})),r.a.createElement("div",{style:{marginTop:"7%"}},t))},We=a(35),Ue=a(248),Ge=a(231),Qe=function(e){var t=function(t){var a={type:e.name,id:t.target.value};e.changeFilter(a)};return r.a.createElement("div",null,r.a.createElement("div",null,e.title?r.a.createElement("label",{style:{margin:10}},"Filter by ",e.title,":"):null,r.a.createElement("select",{value:e.value,onChange:t},e.optionAll?r.a.createElement("option",{value:"all",key:"all"},"All"):null,e.types.map((function(e){return r.a.createElement("option",{value:e.id,key:e.id},e.name)})))))},Ve=["sci_area","subject","type"];var $e=function(e){var t=Object(n.useState)([]),a=Object(h.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)([]),o=Object(h.a)(i,2),u=o[0],s=o[1],m=Object(n.useState)([]),d=Object(h.a)(m,2),f=d[0],p=d[1],E=Object(n.useState)([]),b=Object(h.a)(E,2),g=b[0],v=b[1],y=Object(n.useState)(!1),j=Object(h.a)(y,2),O=j[0],T=j[1],_=Object(n.useState)("collapse"),x=Object(h.a)(_,2),R=x[0],q=x[1],D=Object(n.useState)(null),A=Object(h.a)(D,2),M=A[0],L=A[1],N=se.a.create({headers:{Authorization:"Bearer "+localStorage.getItem("token")}});function B(e){N.get(S).then((function(t){N.get(C).then((function(a){N.get(I).then((function(n){p(t.data.sci_areas),s(a.data.subjects),l(n.data.types),e&&T(!0)})).catch((function(e){return L(je(e.response))}))})).catch((function(e){return L(je(e.response))}))})).catch((function(e){return L(je(e.response))}))}function H(t){var a=t[t.length-1],n=g.find((function(e){return"sci_area"==e.type})),r=g.find((function(e){return"type"==e.type})),i=g.find((function(e){return"subject"==e.type}));"sci_area"===a.type?function(t,a,n,r){N.get(k.replace(":id",t.id)).then((function(t){var i=t.data.subjects,o=t.data.types;void 0!=n&&(0==(o=P(o,[n])).length&&(o=[n]),i=P(i,u)),void 0!=a&&(0==(i=P(i,[a])).length&&(i=[a]),o=P(o,c)),1==O&&(e.setFilters(F(Object(We.a)(r))),T(!1)),s(i),l(o)})).catch((function(e){return L(je(e.response))}))}(a,i,r,t):"subject"===a.type?function(t,a,n,r){N.get(z.replace(":id",t.id)).then((function(t){var c=t.data.sci_area.id;void 0!=a&&(c=a.id),N.get(k.replace(":id",c)).then((function(c){var i=P([t.data.sci_area],f),o=P(t.data.types,c.data.types);1==O&&(e.setFilters(F(Object(We.a)(r))),T(!1)),void 0!=a&&0==(i=P(i,[a])).length&&(i=[a]),void 0!=n&&0==(o=P(o,[n])).length&&(o=[n]),p(i),l(o)})).catch((function(e){return L(je(e.response))}))})).catch((function(e){return L(je(e.response))}))}(a,n,r,t):"type"===a.type&&function(t,a,n,r){N.get(w.replace(":id",t.id)).then((function(i){var o=P([i.data.sci_area],f),m=P(i.data.subjects,u),d=c,h=i.data.sci_area.id;void 0!=a&&(h=a.id),N.get(k.replace(":id",h)).then((function(c){m=P(c.data.subjects,m),void 0!=n?N.get(z.replace(":id",n.id)).then((function(e){0==(d=P(e.data.types,d)).length&&(d=[t]),l(d)})):l(d),1==O&&(e.setFilters(F(Object(We.a)(r))),T(!1)),void 0!=a&&(0==(o=P(o,[a])).length&&(o=[a]),0==(d=P(c.data.types,d)).length&&(d=[t])),void 0!=n&&0==(m=P(m,[n])).length&&(m=[n]),p(o),s(m)})).catch((function(e){return L(je(e.response))}))})).catch((function(e){return L(je(e.response))}))}(a,n,i,t)}function F(e){var t="?";return(e=e.sort((function(e,t){return Ve.indexOf(e.type)-Ve.indexOf(t.type)}))).map((function(e,a){t+="".concat(e.type,"=").concat(e.id),a+1!=g.length&&(t+="&")})),t}function P(e,t){return e.filter((function(e){return void 0!=t.find((function(t){return t.id==e.id}))}))}function Y(e){"all"!=e.id&&(!function(e){q("visible");var t=g,a=t.findIndex((function(t){return t.type===e.type}));a>-1?t[a]=e:t.push(e);v(t)}(e),H([e]))}function J(e){var t=g.find((function(t){return t.type===e}));return void 0!=t?t.id:"all"}Object(n.useEffect)((function(){if(e.location&&e.location.search){var t=new URLSearchParams(e.location.search).entries(),a=t.next(),n=[];do{n.push({type:a.value[0],id:a.value[1]}),a=t.next()}while(!a.done);v(n),q("visible"),B(!0)}else B(),e.setFilters()}),[]),Object(n.useEffect)((function(){!0===O&&H(g)}),[O]);var K={display:"inline-block",margin:10,marginBottom:30};return r.a.createElement("div",null,M||r.a.createElement("div",null,r.a.createElement("div",{style:K},r.a.createElement(Qe,{changeFilter:Y,name:"sci_area",title:"Scientific Areas",types:f,value:J("sci_area"),optionAll:"all"==J("sci_area")})),r.a.createElement("div",{style:K},r.a.createElement(Qe,{changeFilter:Y,name:"subject",title:"Subjects",types:u,value:J("subject"),optionAll:"all"==J("subject")})),r.a.createElement("div",{style:K},r.a.createElement(Qe,{changeFilter:Y,name:"type",title:"Material Types",types:c,value:J("type"),optionAll:"all"==J("type")})),r.a.createElement(_e.a,{basic:!0,size:"small",content:"Filter",icon:"filter",onClick:function(t){if(t.preventDefault(),g.length>0){var a=F(g);e.updateUrl&&e.history.push({pathname:e.location.pathname,search:a}),e.setFilters(a)}}}),r.a.createElement(_e.a,{basic:!0,size:"small",content:"Reset",icon:"filter",id:"reset_filter",onClick:function(t){t.preventDefault(),q("hidden"),e.history.push(e.location.pathname),B(),v([]),e.setFilters()},style:Object(Fe.a)(Object(Fe.a)({},K),{},{visibility:R})})))};var Xe=function(e){var t=Object(n.useRef)(),a=Object(n.useState)(!1),c=Object(h.a)(a,2),l=c[0],i=c[1],o=Object(n.useState)(null),u=Object(h.a)(o,2),s=u[0],m=u[1],d=Object(n.useState)(0),f=Object(h.a)(d,2),p=f[0],E=f[1],b=Object(n.useState)(!0),g=Object(h.a)(b,2),y=g[0],j=g[1],O=Object(n.useState)(null),S=Object(h.a)(O,2),k=S[0],C=S[1],z=se.a.create({headers:{Authorization:"Bearer "+localStorage.getItem("token")}}),T=Object(n.useState)([]),I=Object(h.a)(T,2),w=I[0],_=I[1],x=Object(n.useState)(null),q=Object(h.a)(x,2),D=q[0],A=q[1];Object(n.useEffect)((function(){return L.observe(t.current),function(){L.disconnect()}}),[]);var M={root:document.querySelector("#material"),rootMargin:"5px",threshold:1},L=new IntersectionObserver((function(e){var t=e[0].intersectionRatio;m(t)}),M);function N(e,t,a){var n=e;n?n+="&":n="?",n+="page=".concat(t),z.get(R+n).then((function(t){var n=t.data.materials;if(0===n.length&&0===a.length)return i(!1),j(!1),Object(pe.toast)({type:"warning",title:"Something went wrong",time:2e3,size:"mini",description:"There are no results for the specified parameters"});0===n.length&&j(!1);var r=a;r.push.apply(r,Object(We.a)(n)),_(r),i(!1),A(e)})).catch((function(e){var t=je(e.response);setTimeout((function(){C(t)}),3e3)}))}return Object(n.useEffect)((function(){if(s>=0&&y&&null!=D&&!l){var e=p+1;E(e),i(!0),N(D,e,w)}}),[s]),r.a.createElement("div",null,r.a.createElement(pe.SemanticToastContainer,null),k||r.a.createElement("div",null,r.a.createElement(v.a,null,"Material:"),r.a.createElement($e,Object.assign({},e,{setFilters:function(e){e||(e=""),E(1),_([]),j(!0),i(!0),N(e,1,[])},updateUrl:!0})),r.a.createElement(Me.a,null),r.a.createElement("div",null,r.a.createElement(ze.a,{columns:3,id:"material",style:{height:30,margin:6,padding:8}},0!=w.length||l?w.map((function(t){return r.a.createElement(ze.a.Column,{key:t.name},r.a.createElement(Ue.a,{centered:!0},r.a.createElement(Ue.a.Header,null,t.name),r.a.createElement(Ue.a.Description,null,t.id),r.a.createElement(Ue.a.Content,{extra:!0},r.a.createElement(Ge.a,{fluid:!0},r.a.createElement(_e.a,{content:"Details",icon:"microchip",onClick:function(){return e.history.push(e.location.pathname+"/"+t.id)}}),t.can_be_reported&&"staff"===JSON.parse(localStorage.getItem("userinfo")).selectedRole.name?r.a.createElement(_e.a,{content:"Report",icon:"bug",color:"red",onClick:function(){return e.history.push(e.location.pathname+"/".concat(t.id,"/report"))}}):null))))})):r.a.createElement(Le.a,null,"There are no results"),r.a.createElement("div",{ref:t}),l?r.a.createElement(ze.a.Column,null,r.a.createElement(Le.a,{size:"small"},r.a.createElement(Ne.a,{name:"circle notch",loading:!0}),"Loading...")):null))))},Ze=a(895),et=a(103),tt=[{title:"Name",value:"name"},{title:"Type",value:"type"},{title:"Scientific Areas",value:"sci_area"},{title:"Subjects",value:"subjects"}];var at=function(e){var t=Object(n.useState)({subjects:[]}),a=Object(h.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)(null),o=Object(h.a)(i,2),u=o[0],s=o[1],m=se.a.create({headers:{Authorization:"Bearer "+localStorage.getItem("token")}});return Object(n.useEffect)((function(){var t=e.match.params.id;m.get(q.replace(":id",t)).then((function(e){l(Object(Fe.a)(Object(Fe.a)({},e.data),{},{id:t}))})).catch((function(e){var t=je(e.response);setTimeout((function(){s(t)}),3e3)}))}),[]),r.a.createElement("div",null,r.a.createElement(pe.SemanticToastContainer,null),u||(c.name?r.a.createElement("div",null,r.a.createElement(v.a,{size:"medium"},"Material Details"),r.a.createElement(Me.a,null),function(){if(null!==c.state){var e="red";return"available"===c.state&&(e="green"),r.a.createElement(et.a,{size:"huge",color:e},"State:",r.a.createElement(et.a.Detail,null,c.state))}}(),r.a.createElement(Ze.a,{divided:!0},tt.map((function(e){var t,a=c[e.value];return"subjects"===e.value&&(a=0==c.id.split("-")[0]?"All Subjects":(t=a).map((function(e,a){return a+1===t.length?e:e+", "}))),r.a.createElement(Ze.a.Item,{key:e.title},r.a.createElement(Ze.a.Content,{floated:"left"},r.a.createElement(Ze.a.Header,null,e.title)),r.a.createElement(Ze.a.Content,{floated:"right"},r.a.createElement(Ze.a.Description,null,a)))}))),c.can_be_reported&&"staff"===JSON.parse(localStorage.getItem("userinfo")).selectedRole.name?r.a.createElement(_e.a,{size:"medium",color:"red",style:{marginBottom:"5%"},onClick:function(){return function(){var t=e.location.pathname+"/report";e.history.push(t)}()},icon:"bug",content:"Report Damage"}):null,r.a.createElement(Ue.a.Group,{itemsPerRow:2,stackable:!0},r.a.createElement(Ue.a,null,r.a.createElement(Ue.a.Content,null,r.a.createElement(Ue.a.Header,null,"Description"),r.a.createElement(Me.a,null),r.a.createElement(Ue.a.Description,null,r.a.createElement(Ue.a.Header,{size:"medium"},c.description)))),r.a.createElement(Ue.a,null,r.a.createElement(Ue.a.Content,null,r.a.createElement(Ue.a.Header,null,"More Information"),r.a.createElement(Me.a,null),r.a.createElement(Ue.a.Description,null))))):r.a.createElement(Le.a,null,"Loading...",r.a.createElement(Ne.a,{name:"circle notched",loading:!0}))))},nt=a(476),rt=a.n(nt),ct=a(898),lt=a(257),it=a.n(lt);var ot=function(e){var t=Object(n.useState)({id:null,name:null,roles:[]}),a=Object(h.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)(null),o=Object(h.a)(i,2),u=o[0],s=o[1],m=Object(n.useState)(!1),d=Object(h.a)(m,2),f=d[0],p=d[1];function E(){p(!1)}return Object(n.useEffect)((function(){var e=JSON.parse(localStorage.getItem("userinfo"));l(Object(Fe.a)({},e))}),[]),r.a.createElement("div",null,r.a.createElement(Ue.a,{centered:!0},r.a.createElement(y.a,{src:rt.a,wrapped:!0,ui:!1}),r.a.createElement(Ue.a.Content,null,r.a.createElement(Ue.a.Header,null,c.name),r.a.createElement(Ue.a.Description,null,"Active Role: Staff")),r.a.createElement(Ue.a.Content,{extra:!0},r.a.createElement("a",null,r.a.createElement("p",null,r.a.createElement(Ne.a,{name:"users"}),"Role:"),c.roles.map((function(e,t){return t+1===c.roles.length?e.name:e.name+", "}))))),r.a.createElement("div",{style:{marginBottom:"5%"}},r.a.createElement(v.a,null,"Quick Actions:"),r.a.createElement(ct.a,{trigger:r.a.createElement(_e.a,{onClick:function(){p(!0)},icon:"qrcode",content:"Read QR Code"}),open:f,basic:!0,dimmer:"blurring",onClose:E,size:"small"},r.a.createElement(ct.a.Content,null,r.a.createElement(it.a,{delay:300,onError:function(e){s(null),console.error(e)},onScan:function(e){e&&s(e)},style:{display:"block",marginLeft:"auto",marginRight:"auto",width:"60%"}}),r.a.createElement(ct.a.Header,{style:{textAlign:"center"}},u)),r.a.createElement(ct.a.Actions,null,r.a.createElement(Ge.a,{fluid:!0},r.a.createElement(_e.a,{basic:!0,color:"green",onClick:function(){E(),e.history.push(e.location.pathname+"/material/".concat(u))},content:"Confirm",inverted:!0}),r.a.createElement(_e.a,{basic:!0,color:"red",onClick:E,content:"Cancel",inverted:!0}))))))},ut=a(102),st=function(e){Object(s.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleChange=function(e,t){t.name;var a=t.value;n.props.setDay&&n.props.setDay(a)},n.state={date:""},n}return Object(u.a)(a,[{key:"currentTime",value:function(){var e=new Date,t=String(e.getDate()).padStart(2,"0"),a=String(e.getMonth()+1).padStart(2,"0"),n=e.getFullYear();return e=n+"-"+a+"-"+t}},{key:"render",value:function(){return r.a.createElement(Te.a,null,r.a.createElement(ut.DateInput,{dateFormat:"YYYY-MM-DD",name:"date",placeholder:"Data",value:this.props.date,iconPosition:"left",popupPosition:"top left",onChange:this.handleChange,maxDate:this.currentTime()}))}}]),a}(n.Component),mt=[{name:"Active",id:!0},{name:"Old",id:!1}];var dt=function(e){var t=Object(n.useRef)(),a=Object(n.useState)([]),c=Object(h.a)(a,2),l=c[0],i=c[1],o=Object(n.useState)(""),u=Object(h.a)(o,2),s=u[0],m=u[1],d=Object(n.useState)(""),f=Object(h.a)(d,2),p=f[0],E=f[1],b=Object(n.useState)("hidden"),g=Object(h.a)(b,2),j=g[0],O=g[1],S=Object(n.useState)({type:"",id:""}),k=Object(h.a)(S,2),C=k[0],z=k[1],T=Object(n.useState)(!1),I=Object(h.a)(T,2),w=I[0],_=I[1],x=Object(n.useState)(null),R=Object(h.a)(x,2),q=R[0],D=R[1],A=Object(n.useState)(0),M=Object(h.a)(A,2),L=M[0],N=M[1],B=Object(n.useState)(!0),H=Object(h.a)(B,2),P=H[0],J=H[1],K=Object(n.useState)(null),W=Object(h.a)(K,2),U=W[0],G=W[1],Q=se.a.create({headers:{Authorization:"Bearer "+localStorage.getItem("token")}});Object(n.useEffect)((function(){if(e.location&&e.location.search){var a=new URLSearchParams(e.location.search).entries(),n=a.next(),r=[];do{r.push({name:n.value[0],value:n.value[1]}),n=a.next()}while(!n.done);var c=r.find((function(e){return"user"===e.name})),l=r.find((function(e){return"active"===e.name})),i=r.find((function(e){return"date"===e.name})),o="all";void 0!=l&&(o=l.value),z(l={type:"type",id:o}),O("visible"),void 0!=c?(m(c.value),document.getElementById("searchUser").value=c.value):void 0!=i&&E(i.value)}else z({type:"type",id:"all"});return $.observe(t.current),function(){$.disconnect()}}),[]);var V={root:document.querySelector("#requests"),rootMargin:"5px",threshold:1},$=new IntersectionObserver((function(e){var t=e[0].intersectionRatio;D(t)}),V);function X(t,a,n,r){var c="?user=".concat(t);"all"!=a&&(c+="&active=".concat(a)),e.history.push({pathname:e.location.pathname,search:c}),Q.get(Y.replace(":id",t)+"?page=".concat(n)).then((function(e){var t=void 0!=e.data.older&&e.data.older.length>0,n=void 0!=e.data.current;if(("all"===a&&!t&&!n||"true"===a&&!n||"false"===a&&!t)&&0===r.length)return _(!1),J(!1),Object(pe.toast)({type:"warning",title:"Something went wrong",time:2e3,size:"mini",description:"There are no results for the specified parameters"});if("all"===a){var c=r;c.push.apply(c,Object(We.a)(e.data.older)),n&&c.push(e.data.current),i(c)}else if("true"===a){var l=r;l.push(e.data.current),i(l)}else{var o=r;o.push.apply(o,Object(We.a)(e.data.older)),i(o)}_(!1)})).catch((function(e){var t=je(e.response);setTimeout((function(){G(t)}),3e3)}))}function Z(t,a,n,r){var c="?";""!=a&&(c+="date=".concat(a)),"all"!=t&&("?"!=c&&(c+="&"),c+="active=".concat(t));var l=c;"?"!=c&&(c+="&"),c+="page=".concat(n),e.history.push({pathname:e.location.pathname,search:l}),Q.get(F+c).then((function(e){var t=e.data.requests;if(0==t.length&&0==r.length)return _(!1),J(!1),Object(pe.toast)({type:"warning",title:"Something went wrong",time:2e3,size:"mini",description:"There are no results for the specified parameters"});0===t.length&&J(!1);var a=r;a.push.apply(a,Object(We.a)(t)),i(a),_(!1)})).catch((function(e){var t=je(e.response);setTimeout((function(){G(t)}),3e3)}))}return Object(n.useEffect)((function(){if(q>=0&&P&&""!=C.id&&!w&&!U){var e=L+1;N(e),_(!0),""!=s?X(s,C.id,e,l):Z(C.id,p,e,l)}}),[q]),r.a.createElement("div",null,r.a.createElement(pe.SemanticToastContainer,null),U||r.a.createElement("div",null,r.a.createElement(v.a,{size:"medium"},"Requests:"),r.a.createElement(_e.a,{size:"large",basic:!0,style:{marginBottom:"2%"},onClick:function(){e.history.push("/auth/staff/newrequest/material")},icon:"file alternate",content:"New Request"}),r.a.createElement("div",{style:{display:"block"}},"Filter By Day:",r.a.createElement("div",{style:{display:"inline-block"}},r.a.createElement(st,{date:p,setDay:function(e){E(e)}})),r.a.createElement(we.a,{size:"mini",id:"searchUser",onChange:function(e,t){return m(t.value)},type:"text",placeholder:"Introduce user number",icon:"users",style:{float:"right"}}),r.a.createElement("div",{style:{display:"block",marginBottom:"1%",float:"left"}},r.a.createElement(Qe,{changeFilter:function(e){"all"!=e.id&&z(e)},name:"type",title:"Type",types:mt,value:C.id,optionAll:"all"==C.id}))),r.a.createElement("div",{style:{display:"block",marginTop:"2%",marginLeft:"6%"}},r.a.createElement(_e.a,{size:"large",basic:!0,content:"Search",icon:"search",onClick:function(){if("all"!=C.id||""!=s||""!=p){N(1),J(!0),_(!0),i([]),O("visible"),""!=s?(E(""),X(s,C.id,1,[])):Z(C.id,p,1,[])}}}),r.a.createElement(_e.a,{size:"large",basic:!0,style:{visibility:j},id:"resetbutton",content:"Reset",onClick:function(){e.history.push(e.location.pathname),document.getElementById("searchUser").value="";var t={type:"type",id:"all"};N(1),E(""),J(!0),z(t),m(""),i([]),_(!0),O("hidden"),Z(t.id,"",1,[])}})),r.a.createElement(Me.a,null),r.a.createElement("div",{style:{display:"block"}},r.a.createElement(ze.a,{columns:4,id:"requests",style:{height:30,margin:6,padding:8}},0!=l.length||w?l.map((function(t){return r.a.createElement(ze.a.Column,{key:t.id},r.a.createElement(Ue.a,null,r.a.createElement(y.a,{src:"data:image/jpeg;base64,".concat(t.user_photo),label:t.close_hour?{color:"red",content:"Ended",ribbon:!0,size:"large"}:null,wrapped:!0,ui:!1}),r.a.createElement(Ue.a.Header,null,t.id),r.a.createElement(Ue.a.Description,null,t.user_name," | ",t.user_id),r.a.createElement(Ue.a.Description,null,t.start_date),r.a.createElement(Ue.a.Content,{extra:!0},r.a.createElement(_e.a,{fluid:!0,content:"See Request",icon:"address card",onClick:function(){return a=t.id,void e.history.push(e.location.pathname+"/".concat(a));var a}}))))})):r.a.createElement(Le.a,null,"There are no results"),r.a.createElement("div",{ref:t}),w?r.a.createElement(ze.a.Column,null,r.a.createElement(Le.a,{size:"small"},r.a.createElement(Ne.a,{name:"circle notch",loading:!0}),"Loading...")):null))))},ft=a(34),ht={cursor:"pointer"},pt=function(e){var t=e.name,a=e.label,n=e.isSelected,c=e.onCheckboxChange,l=e.children;return r.a.createElement("div",{className:"form-check",style:{marginTop:30}},r.a.createElement("label",{style:ht},r.a.createElement("input",{style:{width:"16px",height:"16px"},type:"checkbox",name:t,checked:n,onChange:c,className:"form-check-input"}),a),l)};var Et=function(e){var t=Object(n.useState)(!1),a=Object(h.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)(!1),o=Object(h.a)(i,2),u=o[0],s=o[1],m=Object(n.useState)({materials:[]}),d=Object(h.a)(m,2),f=d[0],p=d[1],E=Object(n.useState)([]),b=Object(h.a)(E,2),g=b[0],j=b[1],O=Object(n.useState)([]),S=Object(h.a)(O,2),k=S[0],C=S[1],z=Object(n.useState)([]),T=Object(h.a)(z,2),I=T[0],w=T[1],_=Object(n.useState)([]),x=Object(h.a)(_,2),R=x[0],q=x[1],D=Object(n.useState)(null),A=Object(h.a)(D,2),M=A[0],L=A[1],N=Object(n.useState)(null),B=Object(h.a)(N,2),H=B[0],F=B[1],Y=Object(n.useState)(!1),J=Object(h.a)(Y,2),W=J[0],U=J[1],G=se.a.create({headers:{Authorization:"Bearer "+localStorage.getItem("token")}});function $(e){G.get(P.replace(":id",e)).then((function(t){var a=t.data.materials;void 0===t.data.close_date&&(q(a.filter((function(e){return void 0!=e.close_date}))),a=a.filter((function(e){return void 0===e.close_date}))),p(Object(Fe.a)(Object(Fe.a)({},t.data),{},{materials:a,id:e})),C(a.reduce((function(e,t){return Object(Fe.a)(Object(Fe.a)({},e),{},Object(ft.a)({},t.id,!1))}),[]))})).catch((function(e){var t=je(e.response);setTimeout((function(){F(t)}),3e3)}))}function X(){if(void 0!=f.materials.find((function(e){return void 0!=e.damage})))return Object(pe.toast)({type:"warning",title:"Missing Information",description:"Please confirm material damage reports!",time:2e3,size:"mini"});if(g.length>0){var e=[];g.map((function(t){e.push(t)})),w(e),l(!0)}else s(!0)}function Z(){U(!0),I.map((function(e,t){var a=f.materials.find((function(t){return t.name===e.name})).id;setTimeout((function(){G.delete(K.replace(":reqId",f.id).replace(":id",a),{data:{quantity:e.quantity}}).then((function(e){je(e),t+1===I.length&&(setTimeout((function(){$(f.id),U(!1)}),3e3),j([]))})).catch((function(e){U(!1);var t=je(e.response);setTimeout((function(){F(t)}),3e3)}))}),1e3)})),l(!1)}function ee(e){var t=e.target.name;C(Object(Fe.a)(Object(Fe.a)({},k),{},Object(ft.a)({},t,!k[t]))),function(e){if(void 0!=g.find((function(t){return t.id==e})))j(g.filter((function(t){return t.id!=e})));else{var t=f.materials.find((function(t){return t.id==e}));if(void 0!=t){var a=g;a.push(t),j(a)}}}(t)}function te(){return I.map((function(e){return 0==e.id.split("-")[0]?r.a.createElement(Ze.a.Item,{key:e.id},r.a.createElement(Ze.a.Content,{floated:"left"},r.a.createElement(v.a,null,e.name)),r.a.createElement(Ze.a.Content,{floated:"right"},r.a.createElement(we.a,{type:"number",size:"small",required:!0,onChange:function(t,a){return function(e,t,a){parseInt(e)>parseInt(a)&&(e=a),parseInt(e)<parseInt("1")&&(e="1");var n=I;n[I.findIndex((function(e){return e.name===t.name}))]={name:t.name,id:t.id,quantity:e},w(n)}(a.value,e,e.quantity)},min:"1",max:e.quantity,style:{width:"90%"}}))):r.a.createElement(Ze.a.Item,null,r.a.createElement(Ze.a.Content,{floated:"left",key:e.id},r.a.createElement(v.a,null,e.name)))}))}return Object(n.useEffect)((function(){var t=e.match.params.id;L(JSON.parse(localStorage.getItem("userinfo"))),$(t)}),[]),r.a.createElement("div",null,r.a.createElement(pe.SemanticToastContainer,null),H||(0===f.materials.length?r.a.createElement(Le.a,null,"Loading...",r.a.createElement(Ne.a,{loading:!0,name:"circle notch"})):r.a.createElement("div",null,r.a.createElement(Ue.a,{style:{float:"right"}},r.a.createElement(y.a,{src:"data:image/jpeg;base64,".concat(f.user_photo),wrapped:!0,ui:!1}),r.a.createElement(Ue.a.Content,null,r.a.createElement(Ue.a.Header,null,f.user_name),r.a.createElement(Ue.a.Meta,null,f.user_id)),r.a.createElement(Ue.a.Content,{extra:!0},f.start_date," | ",f.start_hour,void 0!=f.close_date?r.a.createElement("div",null,r.a.createElement(Me.a,null),"Ended",r.a.createElement("div",null,f.close_date," | ",f.close_hour)):null),R.length>0&&void 0==f.close_date?r.a.createElement(Ue.a.Content,{extra:!0},r.a.createElement("div",null,r.a.createElement(Ze.a,{size:"tiny",divided:!0},r.a.createElement(v.a,null,"Material Delivered"),R.map((function(e){return r.a.createElement(Ze.a.Item,{key:e.name},r.a.createElement(Ze.a.Header,null,e.name+" | Quantity: "+e.quantity),r.a.createElement(Ze.a.Description,null,"Delivered: ",e.close_date+" | "+e.close_hour))}))))):null),void 0!=f.close_date?null:r.a.createElement("div",null,r.a.createElement(_e.a,{id:"endButton",disabled:W,floated:"right",color:g.length>0?"":"red",onClick:X,content:g.length>0?"Remove Material":"End Request",icon:"check"}),r.a.createElement(_e.a,{id:"addButton",disabled:W,floated:"left",onClick:function(){e.history.push({pathname:"".concat(e.location.pathname,"/material")})},content:"Add Material",icon:"add"})),r.a.createElement(v.a,null,"Material: "),r.a.createElement(Me.a,null),r.a.createElement("div",{style:{display:"inline-block"}},void 0!=f.close_date?f.materials.map((function(e){return r.a.createElement(v.a,{key:e.id,size:"tiny"},e.name+" | "+e.id+" | Quantity: "+e.quantity)})):f.materials.map((function(e){return r.a.createElement("div",{onSubmit:X,key:e.id},r.a.createElement(pt,{name:e.id,label:e.name+" | "+e.id+" | Quantity: "+e.quantity,isSelected:k[e.id],onCheckboxChange:ee,key:e.id},void 0===e.damage?null:r.a.createElement(Ze.a.Content,{floated:"right"},r.a.createElement(_e.a.Group,{size:"tiny"},r.a.createElement(_e.a,{id:"confirm"+e.id,size:"tiny",color:"green",onClick:function(){return function(e,t){var a=document.getElementById("confirm"+e),n=document.getElementById("cancel"+e);a.disabled=!0,n.disabled=!0,U(!0),G.delete(K.replace(":reqId",f.id).replace(":id",e),{data:{quantity:1}}).then((function(a){G.post(Q.replace(":id",e),{description:t,user:M.id}).then((function(e){je(e),setTimeout((function(){$(f.id),U(!1)}),3e3)})).catch((function(e){var t=je(e.response);setTimeout((function(){F(t)}),3e3)}))})).catch((function(e){U(!1),a.disabled=!1,n.disabled=!1;var t=je(e.response);setTimeout((function(){F(t)}),3e3)}))}(e.id,e.damage.description)},icon:"check",content:"Confirm Damage"}),r.a.createElement(_e.a,{id:"cancel"+e.id,size:"tiny",onClick:function(){return function(e){var t=document.getElementById("confirm"+e),a=document.getElementById("cancel"+e);t.disabled=!0,a.disabled=!0,G.delete(V.replace(":reqId",f.id).replace(":id",e)).then((function(e){$(f.id)})).catch((function(e){t.disabled=!1,a.disabled=!1;var n=je(e.response);setTimeout((function(){F(n)}),3e3)}))}(e.id)},icon:"close",content:"Cancel"})))))}))))),r.a.createElement(ct.a,{size:"small",open:c,dimmer:"blurring"},r.a.createElement(v.a,{size:"huge",textAlign:"center"},"Remove Material from Request"),r.a.createElement(ct.a.Content,{scrolling:!0},r.a.createElement(ct.a.Description,null,r.a.createElement(v.a,{size:"large",textAlign:"center"},"Verify the material and each quantity to remove from request"),r.a.createElement(Me.a,null),r.a.createElement(Ze.a,{divided:!0},te()))),r.a.createElement(ct.a.Actions,null,r.a.createElement(_e.a,{color:"red",onClick:Z,content:"Remove"}),r.a.createElement(_e.a,{onClick:function(){return l(!1)},content:"Cancel"}))),r.a.createElement(ct.a,{open:u,basic:!0,size:"small"},r.a.createElement(v.a,{icon:"exclamation triangle",content:"You are about to end this request"}),r.a.createElement(ct.a.Content,null,r.a.createElement(ct.a.Header,null,"Do you really want to end this request?")),r.a.createElement(ct.a.Actions,null,r.a.createElement(_e.a,{basic:!0,color:"red",inverted:!0,onClick:function(){return s(!1)},content:"Cancel"}),r.a.createElement(_e.a,{color:"green",inverted:!0,onClick:function(){return U(!0),G.patch(P.replace(":id",f.id),{}).then((function(e){je(e),setTimeout((function(){return $(f.id)}),3e3)})).catch((function(e){U(!1);var t=je(e.response);setTimeout((function(){F(t)}),3e3)})),void s(!1)},content:"Confirm"}))))};var bt=function(e){var t=Object(n.useRef)(),a=Object(n.useState)(!1),c=Object(h.a)(a,2),l=c[0],i=c[1],o=Object(n.useState)(null),u=Object(h.a)(o,2),s=u[0],m=u[1],d=Object(n.useState)(0),f=Object(h.a)(d,2),p=f[0],E=f[1],b=Object(n.useState)(!0),g=Object(h.a)(b,2),y=g[0],j=g[1],O=Object(n.useState)(null),S=Object(h.a)(O,2),k=S[0],C=S[1],z=Object(n.useState)([]),T=Object(h.a)(z,2),I=T[0],w=T[1],_=Object(n.useState)([]),x=Object(h.a)(_,2),D=x[0],A=x[1],M=Object(n.useState)(null),L=Object(h.a)(M,2),N=L[0],B=L[1],H=Object(n.useState)(!1),F=Object(h.a)(H,2),P=F[0],Y=F[1],J=Object(n.useState)(""),K=Object(h.a)(J,2),W=K[0],U=K[1],G=Object(n.useState)([]),Q=Object(h.a)(G,2),V=Q[0],$=Q[1],X=Object(n.useState)(null),Z=Object(h.a)(X,2),ee=Z[0],te=Z[1],ae=se.a.create({headers:{Authorization:"Bearer "+localStorage.getItem("token")}});Object(n.useEffect)((function(){return void 0!=e.match.params.id&&B(e.match.params.id),re.observe(t.current),function(){re.disconnect()}}),[]);var ne={root:document.querySelector("#material"),rootMargin:"5px",threshold:1},re=new IntersectionObserver((function(e){var t=e[0].intersectionRatio;m(t)}),ne);function ce(e,t,a){var n=e;n+=n?"&":"?",n+="state=available&page=".concat(t),ae.get(R+n).then(function(){var t=Object(Ce.a)(ke.a.mark((function t(n){var r,c;return ke.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.data.materials,0!=n.length||0!=a.length){t.next=5;break}return i(!1),j(!1),t.abrupt("return",Object(pe.toast)({type:"warning",title:"Something went wrong",time:2e3,size:"mini",description:"There are no results for the specified parameters"}));case 5:return 0===r.length&&j(!1),(c=a).push.apply(c,Object(We.a)(r)),t.next=10,w(c);case 10:i(!1),C(e);case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){var t=je(e.response);setTimeout((function(){te(t)}),3e3)}))}function le(){return(le=Object(Ce.a)(ke.a.mark((function t(){var a,n,r,c;return ke.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=D.filter((function(e){return void 0!=I.find((function(t){return t.id==e.id}))})),!((n=D.filter((function(e){return void 0==I.find((function(t){return t.id==e.id}))}))).length>0)){t.next=9;break}return r="?material=",n.map((function(e,t){r+=e.id,t+1!=n.length&&(r+=",")})),t.next=7,ae.get(R+r);case 7:t.sent.data.materials.map((function(e){e.can_be_reported&&a.push(e)}));case 9:if(0!==a.length){t.next=11;break}return t.abrupt("return",Object(pe.toast)({type:"warning",title:"Missing Information",size:"mini",time:2e3,description:"Select at least one material"}));case 11:c=null==N?"new_material":"".concat(N,"_material"),localStorage.setItem(c,JSON.stringify(a)),null===N?e.history.push("/auth/staff/newrequest/material/checkout"):e.history.push("/auth/staff/request/".concat(N,"/material/checkout"));case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ie(e){$(Object(Fe.a)(Object(Fe.a)({},V),{},Object(ft.a)({},e,!V[e])))}function oe(){Y(!1),U(null)}function ue(e){ie(e),me(e)}function me(e){if(void 0!=D.find((function(t){return t.id==e})))A(D.filter((function(t){return t.id!=e})));else{var t=I.find((function(t){return t.id==e}));void 0!=t&&(D.push(t),A(D))}}return Object(n.useEffect)((function(){if(s>=0&&y&&null!=k&&!l){var e=p+1;E(e),i(!0),ce(k,e,I)}}),[s]),Object(n.useEffect)((function(){if(I.length>0&&0==V.length){var e=null==N?JSON.parse(localStorage.getItem("new_material")):JSON.parse(localStorage.getItem("".concat(N,"_material")));null!=e&&($(e.reduce((function(e,t){return Object(Fe.a)(Object(Fe.a)({},e),{},Object(ft.a)({},t.id,!0))}),[])),A(e))}}),[I,N]),r.a.createElement("div",null,r.a.createElement(pe.SemanticToastContainer,null),ee||r.a.createElement("div",null,r.a.createElement(v.a,null,"Material:"),r.a.createElement(_e.a,{size:"medium",onClick:function(){return le.apply(this,arguments)},icon:"add",content:"Add Material to Request"}),r.a.createElement(_e.a,{size:"medium",onClick:function(){Y(!0)},icon:"qrcode",content:"Read QR Code"}),r.a.createElement($e,Object.assign({},e,{setFilters:function(e){e||(e=""),E(1),w([]),j(!0),i(!0),ce(e,1,[])}})),r.a.createElement(Me.a,null),r.a.createElement(ct.a,{open:P,basic:!0,dimmer:"blurring",onClose:oe,size:"small"},r.a.createElement(ct.a.Content,null,r.a.createElement(it.a,{delay:300,onError:function(e){console.error(e)},onScan:function(e){e&&U(e)},style:{display:"block",marginLeft:"auto",marginRight:"auto",width:"60%"}}),r.a.createElement(ct.a.Header,{style:{textAlign:"center"}},W)),r.a.createElement(ct.a.Actions,null,r.a.createElement(Ge.a,{fluid:!0},r.a.createElement(_e.a,{basic:!0,color:"green",onClick:function(){if(null!=W){oe();var e=W;ae.get(q.replace(":id",e)).then((function(e){if("available"!==e.data.state)return Object(pe.toast)({type:"error",title:"Can\xb4t select the material specified",description:"The Qr Code scanned doesn\xb4t belong to a material, or the material is not available",time:3e3,size:"mini"});ie(W),me(W)})).catch((function(e){var t=je(e.response);setTimeout((function(){te(t)}),3e3)})),U(null)}},content:"Confirm",inverted:!0}),r.a.createElement(_e.a,{basic:!0,color:"red",onClick:oe,content:"Cancel",inverted:!0})))),r.a.createElement("div",null,r.a.createElement(ze.a,{columns:3,id:"material",style:{height:30,margin:6,padding:8}},0!=I.length||l?I.map((function(e){return r.a.createElement(ze.a.Column,{key:e.id},r.a.createElement(Ue.a,{centered:!0,key:e.id},r.a.createElement(Ue.a.Header,null,e.name),r.a.createElement(Ue.a.Description,null,e.id),r.a.createElement(Ue.a.Content,{extra:!0},!0===V[e.id]?r.a.createElement(_e.a,{fluid:!0,color:"green",onClick:function(){return ue(e.id)}}," Selected! "):r.a.createElement(_e.a,{fluid:!0,onClick:function(){return ue(e.id)}}," Select "))))})):r.a.createElement(Le.a,null,"There are no results"),r.a.createElement("div",{ref:t}),l?r.a.createElement(ze.a.Column,null,r.a.createElement(Le.a,{size:"small"},r.a.createElement(Ne.a,{name:"circle notch",loading:!0}),"Loading...")):null))))},gt=a(478),vt=a.n(gt);var yt=function(e){var t=Object(n.useState)([]),a=Object(h.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)(null),o=Object(h.a)(i,2),u=o[0],s=o[1],m=Object(n.useState)("ID"),d=Object(h.a)(m,2),f=d[0],p=d[1],E=Object(n.useState)("Name"),b=Object(h.a)(E,2),g=b[0],j=b[1],O=Object(n.useState)(vt.a),S=Object(h.a)(O,2),k=S[0],C=S[1],z=Object(n.useState)(null),T=Object(h.a)(z,2),I=T[0],w=T[1],_=Object(n.useState)(!1),x=Object(h.a)(_,2),R=x[0],q=x[1],D=se.a.create({headers:{Authorization:"Bearer "+localStorage.getItem("token")}});return Object(n.useEffect)((function(){var t=e.match.params.id;void 0!=t&&D.get(P.replace(":id",t)).then((function(e){s(t),p(e.data.user_id),j(e.data.user_name),C("data:image/jpeg;base64,".concat(e.data.user_photo))})).catch((function(e){var t=je(e.response);setTimeout((function(){w(t)}),3e3)}));var a=void 0==t?"new_material":"".concat(t,"_material"),n=JSON.parse(localStorage.getItem(a));null==n&&(Object(pe.toast)({type:"error",title:"Something Went Wrong",time:2e3,size:"mini",description:"Please select the material again!"}),setTimeout((function(){return e.history.push(e.location.pathname.replace("/checkout",""))}),3e3)),l(n)}),[]),r.a.createElement("div",null,r.a.createElement(pe.SemanticToastContainer,null),I||(0==c.length?r.a.createElement(Le.a,null,"Loading...",r.a.createElement(Ne.a,{name:"circle notched",loading:!0})):r.a.createElement("div",null,r.a.createElement(v.a,null,"Finalize Request"),r.a.createElement(Me.a,null),r.a.createElement("div",{style:{display:"block"}},e.newRequest?r.a.createElement("div",{style:{display:"inline-block"}},r.a.createElement(we.a,{size:"mini",id:"searchprofile",style:{float:"left"},icon:"users",iconPosition:"left",placeholder:"Introduce user number..."}),r.a.createElement(_e.a,{size:"large",basic:!0,onClick:function(){var e=document.getElementById("searchprofile").value;D.get(M.replace(":id",e)).then((function(t){D.get(A.replace(":id",e)).then((function(e){if(void 0===e.data.roles.find((function(e){return"student"===e.name})))return Object(pe.toast)({type:"warning",title:"Wrong Information",description:"Insert a student number",time:2e3,size:"mini"});j(t.data.name),p(t.data.id),C("data:image/jpeg;base64,".concat(t.data.photo))})).catch((function(e){var t=je(e.response);setTimeout((function(){w(t)}),3e3)}))})).catch((function(e){var t=je(e.response);setTimeout((function(){w(t)}),3e3)}))},style:{float:"left"},icon:"search",content:"Search"})):null,r.a.createElement(Ue.a,{centered:!0},r.a.createElement(y.a,{src:k}),r.a.createElement(Ue.a.Content,null,r.a.createElement(Ze.a.Header,null,g),r.a.createElement(Ue.a.Meta,null,f))),r.a.createElement(Me.a,null),r.a.createElement(_e.a,{id:"submit",size:"large",style:{display:"inline-block",float:"right"},disabled:R,onClick:function(){var t=void 0==u?"new_material":"".concat(u,"_material");if("ID"!=f){var a=function(){var e=!1,t=c.reduce((function(t,a){if(0!=a.id.split("-")[0])t.push({material_id:a.id,quantity:"1"});else{var n=document.getElementById("".concat(a.id,"quantity")).value;if(""==n)return e=!0,Object(pe.toast)({type:"warning",title:"Missing Information",time:2e3,size:"mini",description:"Insert a quantity for the material ".concat(a.name)}),t;parseInt(n)<parseInt("1")&&(n="1"),parseInt(n)>parseInt("10")?n="10":parseInt(n)>parseInt(a.available_quantity)&&(n=a.available_quantity),t.push({material_id:a.id,quantity:n})}return t}),[]);return e&&(t=null),t}();if(null===a)return;q(!0),null==u?D.post(F,{materials_requested:a,user_id:f}).then((function(a){je(a),setTimeout((function(){localStorage.removeItem(t),e.history.push("/auth/staff/request")}),3e3)})).catch((function(e){q(!1);var t=je(e.response);setTimeout((function(){w(t)}),3e3)})):D.put(J.replace(":id",u),{materials:a}).then((function(a){je(a),setTimeout((function(){localStorage.removeItem(t),e.history.push("/auth/staff/request/".concat(u))}),3e3)})).catch((function(e){q(!1);var t=je(e.response);setTimeout((function(){w(t)}),3e3)}))}else Object(pe.toast)({type:"warning",title:"Missing Information",description:"Insert a student number to associate with the request",time:2e3,size:"mini"})},icon:"edit alternate",content:"Request"}),r.a.createElement("div",{style:{display:"block",marginTop:"5%"}},r.a.createElement(v.a,{size:"medium"},"Material:"),r.a.createElement(Ze.a,{size:"large",divided:!0,style:{marginBottom:"5%"}},c.map((function(e){return 0==e.id.split("-")[0]?r.a.createElement(Ze.a.Item,{key:e.id},r.a.createElement(Ze.a.Content,{floated:"left"},r.a.createElement(Ze.a.Header,null,e.name)),r.a.createElement(Ze.a.Content,{floated:"right"},r.a.createElement(Ze.a.Description,null,"Quantity:",r.a.createElement(we.a,{id:"".concat(e.id,"quantity"),type:"number",required:!0,min:"1",max:e.available_quantity>"10"?"10":e.available_quantity})))):r.a.createElement(Ze.a.Item,{key:e.id},r.a.createElement(Ze.a.Content,{floated:"left"},r.a.createElement(Ze.a.Header,null,e.name)))}))))))))},jt=a(851);var Ot=function(e){var t=Object(n.useState)(""),a=Object(h.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)(null),o=Object(h.a)(i,2),u=o[0],s=o[1],m=Object(n.useState)(null),d=Object(h.a)(m,2),f=d[0],p=d[1],E=Object(n.useState)(!1),b=Object(h.a)(E,2),g=b[0],y=b[1],j=se.a.create({headers:{Authorization:"Bearer "+localStorage.getItem("token")}});return Object(n.useEffect)((function(){var t=JSON.parse(localStorage.getItem("userinfo")).id;p(t);var a=e.match.params.id;0==a.split("-")[0]&&(y(!0),e.history.push(e.location.pathname.replace("/report",""))),j.get(q.replace(":id",a)).then(function(){var t=Object(Ce.a)(ke.a.mark((function t(n){return ke.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:"available"===n.data.state?s(a):e.history.push(e.location.pathname.replace("/report",""));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){je(e.response.status)}))}),[]),r.a.createElement("div",null,r.a.createElement(pe.SemanticToastContainer,null),r.a.createElement(v.a,{size:"medium"},"Report Damage: "),r.a.createElement(Me.a,null),r.a.createElement(Ue.a,{fluid:!0},r.a.createElement(Ue.a.Content,null,r.a.createElement(Ue.a.Header,null,u),r.a.createElement(Ue.a.Description,null,r.a.createElement(v.a,{attached:"top",color:"red"},"Report Description"),r.a.createElement(Ie.a,null,r.a.createElement(Te.a,null,r.a.createElement(jt.a,{required:!0,onChange:function(e,t){return l(t.value)},rows:"2",maxLength:"200"}))))),r.a.createElement(Ge.a,{fluid:!0},r.a.createElement(_e.a,{basic:!0,id:"confirm",color:"green",onClick:function(){if(""==c||0==c.trimLeft().length)return Object(pe.toast)({type:"warning",title:"Missing Information",description:"Insert a damage description",time:2e3,size:"mini"});y(!0),j.post(Q.replace(":id",u),{description:c,user:f}).then((function(t){je(t),setTimeout((function(){e.history.push(e.location.pathname.replace("/report",""))}),3e3)})).catch((function(e){y(!1),je(e.response)}))},disabled:g,content:"Confirm"}),r.a.createElement(_e.a,{basic:!0,color:"red",onClick:function(){e.history.push(e.location.pathname.replace("/report",""))},content:"Cancel"})),r.a.createElement(Ue.a.Content,{extra:!0})))},St=function(e){return r.a.createElement("select",{value:e.value,onChange:function(t){e.changeOption(t.target.value)}},e.defaultValue?r.a.createElement("option",{value:"all",key:"all"},e.defaultValue):null,e.values.map((function(e){return r.a.createElement("option",{value:e,key:e},e)})))};var kt=function(e){var t=Object(n.useRef)(),a=Object(n.useState)([]),c=Object(h.a)(a,2),l=c[0],i=c[1],o=Object(n.useState)(null),u=Object(h.a)(o,2),s=u[0],m=u[1],d=Object(n.useState)(null),f=Object(h.a)(d,2),p=f[0],E=f[1],b=Object(n.useState)([]),g=Object(h.a)(b,2),j=g[0],O=g[1],S=Object(n.useState)("collapse"),k=Object(h.a)(S,2),C=k[0],z=k[1],T=Object(n.useState)(!1),I=Object(h.a)(T,2),w=I[0],_=I[1],x=Object(n.useState)(null),R=Object(h.a)(x,2),q=R[0],A=R[1],M=Object(n.useState)(0),N=Object(h.a)(M,2),B=N[0],H=N[1],F=Object(n.useState)(!0),P=Object(h.a)(F,2),Y=P[0],J=P[1],K=Object(n.useState)(null),W=Object(h.a)(K,2),U=W[0],G=W[1],Q=Object(n.useState)(!1),V=Object(h.a)(Q,2),$=V[0],X=V[1],Z=se.a.create({headers:{Authorization:"Bearer "+localStorage.getItem("token")}});Object(n.useEffect)((function(){if(E(""),m(""),e.location&&e.location.search){var a=new URLSearchParams(e.location.search).entries(),n=a.next();do{var r=n.value[0];"role"===r&&m(n.value[1]),"id"===r&&(E(n.value[1]),document.getElementById("searchProfile").value=n.value[1]),n=a.next()}while(!n.done);z("visible")}return Z.get(D).then((function(e){O(e.data.roles.filter((function(e){return"student"!==e&&"staff"!==e})))})).catch((function(e){var t=je(e.response);setTimeout((function(){G(t)}),3e3)})),te.observe(t.current),function(){te.disconnect()}}),[]);var ee={root:document.querySelector("#users"),rootMargin:"5px",threshold:1},te=new IntersectionObserver((function(e){var t=e[0].intersectionRatio;A(t)}),ee);function ae(t,a,n,r){if("student"==a||"A"===t.slice(0,1))return _(!1),Object(pe.toast)({title:"Invalid Parameter",type:"error",size:"mini",time:2e3,description:"Insert a diferent role or a diferent user"});var c=function(e,t){var a="?";""!=e&&(a+="id=".concat(e));""!=t&&(a.length>1&&(a+="&"),a+="role=".concat(t));"?"===a&&(a="");return a}(t,a),l=c;""==l&&(l+="?role=administrator,teacher,lab_responsible,technician"),l+="&page=".concat(n),Z.get(L+l).then((function(t){var a=t.data.users;if(0===r.length&&0===a.length)return i(a),J(!1),_(!1),Object(pe.toast)({type:"warning",title:"Something Went Wrong",time:2e3,size:"mini",description:"There are no results for the specified parameters"});0===a.length&&J(!1);var n=r;n.push.apply(n,Object(We.a)(a)),i(n),_(!1),""!=c&&e.history.push({pathname:e.location.pathname,search:c})})).catch((function(e){var t=je(e.response);setTimeout((function(){G(t)}),3e3)}))}function ne(){return""!=s?s:"all"}return Object(n.useEffect)((function(){if(q>=0&&Y&&!w&&!$&&(null!=p||null!=s)){var e=B+1;H(e),_(!0),ae(p,s,e,l)}}),[q,p,s]),r.a.createElement("div",null,r.a.createElement(pe.SemanticToastContainer,null),U||r.a.createElement("div",null,r.a.createElement(v.a,{size:"medium"},"Users:"),r.a.createElement(we.a,{size:"mini",style:{float:"right"},icon:"users",id:"searchProfile",onChange:function(e,t){X(!0),E(t.value)},iconPosition:"left",placeholder:"Introduce user number..."}),r.a.createElement("div",{style:{display:"block",float:"left",marginTop:"1%"}},"Filter by Role:",r.a.createElement(St,{values:j,value:ne(),changeOption:function(e){"all"!=e&&(m(e),X(!0))},defaultValue:"all"==ne()?"All":null})),r.a.createElement("div",{style:{display:"block",marginLeft:"6%"}},r.a.createElement(_e.a,{size:"large",basic:!0,onClick:function(){if(""!=p||""!=s){X(!1),H(1),J(!0),_(!0),z("visible"),ae(p,s,1,[])}},icon:"search",content:"Search"}),r.a.createElement(_e.a,{size:"large",id:"reset_filter",basic:!0,onClick:function(t){t.preventDefault(),_(!0),H(1),E(""),m(""),J(!0),ae("","",1,[]),z("hidden"),e.history.push(e.location.pathname),document.getElementById("searchProfile").value=""},style:{visibility:C,marginLeft:"1%",marginTop:"0.5%"},content:"Reset"})),r.a.createElement(Me.a,null),r.a.createElement(ze.a,{columns:6,id:"users",style:{height:30,margin:6,padding:8}},0!=l.length||w?l.map((function(t){return r.a.createElement(ze.a.Column,{key:t.id},r.a.createElement(Ue.a,{centered:!0},r.a.createElement(y.a,{src:"data:image/jpeg;base64,".concat(t.photo),wrapped:!0,ui:!1}),r.a.createElement(Ue.a.Content,null,r.a.createElement(Ue.a.Header,null,t.user_name),r.a.createElement(Ue.a.Description,null,t.id)),r.a.createElement(Ue.a.Content,{extra:!0},r.a.createElement(_e.a,{fluid:!0,content:"Change Roles",icon:"address card",onClick:function(){return a=t.id,void e.history.push("/auth/admin/usersroles/".concat(a));var a}}))))})):r.a.createElement(Le.a,null,"There are no results"),r.a.createElement("div",{ref:t}),w?r.a.createElement(ze.a.Column,null,r.a.createElement(Le.a,{size:"small"},r.a.createElement(Ne.a,{name:"circle notch",loading:!0}),"Loading...")):null)))};var Ct=function(e){var t=Object(n.useState)([]),a=Object(h.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)({}),o=Object(h.a)(i,2),u=o[0],s=o[1],m=Object(n.useState)("all"),d=Object(h.a)(m,2),f=d[0],p=d[1],E=Object(n.useState)("all"),b=Object(h.a)(E,2),g=b[0],v=b[1],j=Object(n.useState)([]),O=Object(h.a)(j,2),k=O[0],C=O[1],z=Object(n.useState)(null),T=Object(h.a)(z,2),I=T[0],w=T[1],_=Object(n.useState)(!1),x=Object(h.a)(_,2),R=x[0],q=x[1],L=se.a.create({headers:{Authorization:"Bearer "+localStorage.getItem("token")}}),N=JSON.parse(localStorage.getItem("userinfo"));function B(e){"all"!=e&&p(e)}function H(e){!function(e){C(Object(Fe.a)(Object(Fe.a)({},k),{},Object(ft.a)({},e,!k[e])))}(e.target.name)}return Object(n.useEffect)((function(){var t=e.match.params.id;L.get(S).then((function(a){L.get(A.replace(":id",t)).then((function(n){if(void 0!=n.data.roles.find((function(e){return"student"==e.name||"staff"==e.name})))Object(pe.toast)({type:"error",time:2e3,size:"mini",title:"Invalid Parameter",description:"It is not permited change either student or staff role"}),setTimeout((function(){e.history.push(e.location.pathname.replace("/".concat(t),""))}),3e3);else{var r=a.data.sci_areas;r.shift(),v(r),L.get(D).then((function(e){L.get(M.replace(":id",t)).then((function(t){s(t.data);var a=n.data.roles,c=function(e,t,a){var n=t.find((function(e){return"lab_responsible"==e.name}));void 0!=n&&p(a.find((function(e){return e.id===n.sci_area_id})).name);return e.map((function(e){var a=!1;return t.find((function(t){return t.name===e}))&&(a=!0),{name:e,selected:a}}))}(e.data.roles.filter((function(e){return"student"!=e&&"staff"!=e})),a,r);l(c),C(c.reduce((function(e,t){return Object(Fe.a)(Object(Fe.a)({},e),{},Object(ft.a)({},t.name,t.selected))}),[]))})).catch((function(e){var t=je(e.response);setTimeout((function(){w(t)}),3e3)}))})).catch((function(e){var t=je(e.response);setTimeout((function(){w(t)}),3e3)}))}})).catch((function(e){var t=je(e.response);setTimeout((function(){w(t)}),3e3)}))})).catch((function(e){var t=je(e.response);setTimeout((function(){w(t)}),3e3)}))}),[]),r.a.createElement("div",null,r.a.createElement(pe.SemanticToastContainer,null),I||(0==c.length?r.a.createElement(Le.a,null,"Loading...",r.a.createElement(Ne.a,{name:"circle notched",loading:!0})):r.a.createElement("div",null,r.a.createElement(Ue.a,{style:{float:"right"}},r.a.createElement(y.a,{src:"data:image/jpeg;base64,".concat(u.photo),wrapped:!0,ui:!1}),r.a.createElement(Ue.a.Content,null,r.a.createElement(Ue.a.Header,null,u.name),r.a.createElement(Ue.a.Meta,null,u.id))),r.a.createElement("div",{style:{display:"inline-block"}},c.map((function(e){return r.a.createElement("div",{key:e.name},r.a.createElement(pt,{name:e.name,label:e.name,isSelected:k[e.name],onCheckboxChange:H,key:e.name}),"lab_responsible"===e.name?r.a.createElement("div",null,r.a.createElement(St,{values:g.map((function(e){return e.name})),value:f,changeOption:B,defaultValue:"all"==f?"Scientific Area":null})):null)}))),r.a.createElement(_e.a,{floated:"right",id:"confirm",color:"green",icon:"check",disabled:R,onClick:function(){var t,a=Object.keys(k).filter((function(e){return k[e]})).map((function(e){return{role:e}}));if((t=a.findIndex((function(e){return"lab_responsible"===e.role})))>=0){if("all"===f)return Object(pe.toast)({type:"warning",title:"Missing Information",description:"Select Scientific Area to associate with the responsible",time:2e3,size:"mini"});a[t]={role:"lab_responsible",sci_area:f}}q(!0),L.put(A.replace(":id",u.id),{roles:a}).then((function(t){je(t),u.id==N.id?L.get(A.replace(":id",u.id)).then((function(t){N.roles=t.data.roles,localStorage.setItem("userinfo",JSON.stringify(N)),setTimeout((function(){return e.history.push(e.location.pathname.replace("/".concat(u.id),""))}),3e3)})).catch((function(e){var t=je(e.response);setTimeout((function(){w(t)}),3e3)})):setTimeout((function(){return e.history.push(e.location.pathname.replace("/".concat(u.id),""))}),3e3)})).catch((function(e){q(!1);var t=je(e.response);setTimeout((function(){w(t)}),3e3)}))},content:"Confirm"}))))};var zt=function(){var e=Object(n.useState)([]),t=Object(h.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(""),o=Object(h.a)(l,2),u=o[0],s=o[1],m=Object(n.useState)(null),d=Object(h.a)(m,2),f=d[0],p=d[1],E=se.a.create({headers:{Authorization:"Bearer "+localStorage.getItem("token")}});function b(){E.get(S).then((function(e){c(e.data.sci_areas.filter((function(e){return 0!=e.id})))})).catch((function(e){var t=je(e.response);setTimeout((function(){p(t)}),3e3)}))}return Object(n.useEffect)((function(){b()}),[]),r.a.createElement("div",null,r.a.createElement(pe.SemanticToastContainer,null),f||r.a.createElement("div",null,r.a.createElement(v.a,{size:"medium"},"Scientific Areas:"),r.a.createElement(we.a,{id:"addarea",type:"text",onChange:function(e,t){var a;""!=(a=t.value)&&0!=a.trimLeft().length&&s(a)},action:r.a.createElement(_e.a,{onClick:function(){var e=document.getElementById("addarea");""!=e.value&&""!=u&&E.post(S,{name:u}).then((function(t){je(t),e.value="",setTimeout((function(){return b()}),3e3)})).catch((function(e){var t=je(e.response);setTimeout((function(){p(t)}),3e3)}))}},"Add"),placeholder:"Scientific Area..."}),r.a.createElement(Me.a,null),r.a.createElement(Ze.a,{divided:!0},a.map((function(e){var t="/auth/admin/areas/".concat(e.id,"/course");return r.a.createElement(Ze.a.Item,{key:e.id},r.a.createElement(Ze.a.Content,{floated:"right"},r.a.createElement(_e.a,{size:"big",id:"delete"+e.id,compact:!0,onClick:function(){return function(e){var t=document.getElementById("delete".concat(e));t.disabled=!0,E.delete(k.replace(":id",e)).then((function(e){je(e),setTimeout((function(){return b()}),200)})).catch((function(e){t.disabled=!1;var a=je(e.response);setTimeout((function(){p(a)}),3e3)}))}(e.id)},icon:"red close"})),r.a.createElement(Ze.a.Content,null,r.a.createElement(i.b,{to:t}," ",e.name)))})))))};var Tt=function(e){var t=Object(n.useState)([]),a=Object(h.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)([]),o=Object(h.a)(i,2),u=o[0],s=o[1],m=Object(n.useState)([]),d=Object(h.a)(m,2),f=d[0],p=d[1],E=Object(n.useState)([]),b=Object(h.a)(E,2),g=b[0],y=b[1],j=Object(n.useState)([]),O=Object(h.a)(j,2),T=O[0],w=O[1],_=Object(n.useState)([]),x=Object(h.a)(_,2),R=x[0],q=x[1],D=Object(n.useState)([]),A=Object(h.a)(D,2),M=A[0],L=A[1],N=Object(n.useState)(null),B=Object(h.a)(N,2),H=B[0],F=B[1],P=Object(n.useState)("collapse"),Y=Object(h.a)(P,2),J=Y[0],K=Y[1],W=se.a.create({headers:{Authorization:"Bearer "+localStorage.getItem("token")}}),U={display:"inline-block",margin:10,marginBottom:30};function G(e){var t=e[e.length-1],a=f.find((function(e){return"sci_area"==e.type})),n=f.find((function(e){return"subject"==e.type}));"sci_area"===t.type?function(e,t){W.get(k.replace(":id",e.id)).then((function(e){var a=e.data.subjects,n=e.data.types;void 0!=t&&(0==(a=Q(a,[t])).length&&(a=[t]),n=Q(n,R)),y(a),q(n)})).catch((function(e){var t=je(e.response);setTimeout((function(){F(t)}),3e3)}))}(t,n):"subject"===t.type&&function(e,t){W.get(z.replace(":id",e.id)).then((function(e){var a=e.data.sci_area.id;void 0!=t&&(a=t.id),W.get(k.replace(":id",a)).then((function(a){var n=[e.data.sci_area],r=Q(e.data.types,a.data.types);void 0!=t&&0==(n=Q(n,[t])).length&&(n=[t]),w(n),q(r)})).catch((function(e){var t=je(e.response);setTimeout((function(){F(t)}),3e3)}))})).catch((function(e){var t=je(e.response);setTimeout((function(){F(t)}),3e3)}))}(t,a)}function Q(e,t){return e.filter((function(e){return void 0!=t.find((function(t){return t.id==e.id}))}))}function V(e){W.get(I).then((function(t){s(t.data.types.reduce((function(t,a){return Object(Fe.a)(Object(Fe.a)({},t),{},Object(ft.a)({},a.id,e.some((function(e,t,n){return e.id===a.id}))))}),[])),l(t.data.types)})).catch((function(e){var t=je(e.response);setTimeout((function(){F(t)}),3e3)})),W.get(S).then((function(e){W.get(C).then((function(t){w(e.data.sci_areas),y(t.data.subjects),p([])})).catch((function(e){var t=je(e.response);setTimeout((function(){F(t)}),3e3)}))})).catch((function(e){var t=je(e.response);setTimeout((function(){F(t)}),3e3)}))}function $(e){if("all"!=e.id){var t=f,a=t.findIndex((function(t){return t.type===e.type}));a>-1?t[a]=e:t.push(e),p(t),G([e])}}function X(e){var t=f.find((function(t){return t.type===e}));return void 0!=t?t.id:"all"}function Z(e){if(function(e){s(Object(Fe.a)(Object(Fe.a)({},u),{},Object(ft.a)({},e,!u[e])))}(e),void 0!=M.find((function(t){return t.id==e})))L(M.filter((function(t){return t.id!=e})));else{var t=c.find((function(t){return t.id==e})),a=M;a.push(t),L(a)}}return Object(n.useEffect)((function(){var e=JSON.parse(localStorage.getItem("reservation"));if(null==e)e=[];else{var t=M;t.push.apply(t,Object(We.a)(e)),L(t)}V(e)}),[]),r.a.createElement("div",null,r.a.createElement(pe.SemanticToastContainer,null),H||r.a.createElement("div",null,r.a.createElement(v.a,{size:"medium"},"Material:"),r.a.createElement("div",{style:U},r.a.createElement(Qe,{changeFilter:$,name:"sci_area",title:"Scientific Area",types:T,value:X("sci_area"),optionAll:"all"==X("sci_area")})),r.a.createElement("div",{style:U},r.a.createElement(Qe,{changeFilter:$,name:"subject",title:"Subjects",types:g,value:X("subject"),optionAll:"all"==X("subject")})),r.a.createElement(_e.a,{basic:!0,size:"small",onClick:function(e){e.preventDefault(),f.length>0&&(l(R),K("visible"))},icon:"filter alternate",content:"Filter"}),r.a.createElement(_e.a,{basic:!0,size:"small",id:"reset_filter",style:Object(Fe.a)(Object(Fe.a)({},U),{},{visibility:J}),onClick:function(t){t.preventDefault(),K("hidden"),e.history.push(e.location.pathname),V(M)},content:"Reset"}),r.a.createElement("div",null,r.a.createElement(_e.a,{className:"ui medium labeled icon button",onClick:function(){var t=M.filter((function(e){return c.find((function(t){return t.id==e.id}))}));if(0===t.length)return Object(pe.toast)({type:"warning",title:"Missing Information",time:2e3,size:"mini",description:"Select at least one material"});localStorage.setItem("reservation",JSON.stringify(t)),e.history.push({pathname:"/auth/teacher/newreservation/types/checkout"})},icon:"add",content:"Add Material to Reservation"})),r.a.createElement(Me.a,null),r.a.createElement(ze.a,{columns:4,style:{height:30,margin:6,padding:8}},c.map((function(e){return r.a.createElement(ze.a.Column,{key:e.id},r.a.createElement(Ue.a,{centered:!0,key:e.id},r.a.createElement(Ue.a.Header,null,e.name),r.a.createElement(Ue.a.Description,null,e.id),r.a.createElement(Ue.a.Content,{extra:!0},!0===u[e.id]?r.a.createElement(_e.a,{fluid:!0,color:"green",onClick:function(){return Z(e.id)}}," Selected! "):r.a.createElement(_e.a,{fluid:!0,onClick:function(){return Z(e.id)}}," Select "))))})))))},It=function(e){Object(s.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleChange=function(e,t){var a=t.name,r=t.value;n.state.hasOwnProperty(a)&&n.setState(Object(ft.a)({},a,r)),n.props.setDayTime&&n.props.setDayTime(r)},n.state={dateTime:""},n}return Object(u.a)(a,[{key:"currentTime",value:function(){var e=new Date,t=String(e.getDate()).padStart(2,"0"),a=String(e.getMonth()+1).padStart(2,"0"),n=e.getFullYear(),r=String(e.getHours()),c=String(e.getMinutes());return e=n+"-"+a+"-"+t+" "+r+":"+c}},{key:"render",value:function(){return r.a.createElement(Te.a,null,r.a.createElement(ut.DateTimeInput,{name:"dateTime",placeholder:"Day and Hour",dateTimeFormat:"YYYY-MM-DD HH:mm:SS",value:this.state.dateTime,iconPosition:"left",popupPosition:"top left",onChange:this.handleChange,minDate:this.currentTime()}))}}]),a}(n.Component),wt=["1:30:00","3:00:00","4:30:00"];var _t=function(e){var t=Object(n.useState)(""),a=Object(h.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)(null),o=Object(h.a)(i,2),u=o[0],s=o[1],m=Object(n.useState)(""),d=Object(h.a)(m,2),f=d[0],p=d[1],E=Object(n.useState)([]),b=Object(h.a)(E,2),g=b[0],y=b[1],j=Object(n.useState)([]),O=Object(h.a)(j,2),S=O[0],k=O[1],z=Object(n.useState)(null),T=Object(h.a)(z,2),I=T[0],w=T[1],_=Object(n.useState)(""),x=Object(h.a)(_,2),R=x[0],q=x[1],D=Object(n.useState)(wt[0]),A=Object(h.a)(D,2),M=A[0],L=A[1],N=Object(n.useState)(null),B=Object(h.a)(N,2),H=B[0],F=B[1],P=Object(n.useState)(!1),Y=Object(h.a)(P,2),J=Y[0],K=Y[1],W=se.a.create({headers:{Authorization:"Bearer "+localStorage.getItem("token")}});function G(){return null===I?"all":I.id}return Object(n.useEffect)((function(){s(JSON.parse(localStorage.getItem("userinfo"))),W.get(C).then((function(e){k(e.data.subjects)})).catch((function(e){var t=je(e.response);setTimeout((function(){F(t)}),3e3)}));var t=JSON.parse(localStorage.getItem("reservation"));null===t?(Object(pe.toast)({type:"error",title:"Something Went Wrong",time:2e3,size:"mini",description:"Please select the material again!"}),setTimeout((function(){e.history.push(e.location.pathname.replace("checkout",""))}),3e3)):y(t)}),[]),r.a.createElement("div",null,r.a.createElement(pe.SemanticToastContainer,null),H||(0==g.length?r.a.createElement(Le.a,null,"Loading...",r.a.createElement(Ne.a,{name:"circle notched",loading:!0})):r.a.createElement("div",null,r.a.createElement(v.a,null,"Finalize Reservation"),r.a.createElement(Me.a,null),e.newReservation?r.a.createElement("div",null,"Groups Quantity:",r.a.createElement(we.a,{size:"small",onChange:function(e,t){return a=t.value,parseInt(a)<parseInt("1")&&(a="1"),parseInt(a)>parseInt("15")&&(a="15"),void q(a);var a},type:"number",required:!0,min:"1",max:"15",style:{textAlign:"center",width:"15%",marginRight:"15%"}}),"Select a Subject:",r.a.createElement("div",{style:{display:"inline-block"}},r.a.createElement(Qe,{changeFilter:function(e){"all"!=e.id&&w(e)},name:"subject",types:S,value:G(),optionAll:"all"==G()})),r.a.createElement("div",{style:{display:"inline-block",marginLeft:"15%"}},"Select duration:",r.a.createElement(St,{values:wt,value:M,changeOption:function(e){return L(e)}})),r.a.createElement(v.a,{size:"small",style:{marginTop:"5%"}},"Select a Date and Hour:"),r.a.createElement(It,{setDayTime:function(e){var t=e.split(" "),a=Object(h.a)(t,2),n=a[0],r=a[1];l(n),p(r)}})):null,r.a.createElement(Me.a,null),r.a.createElement(_e.a,{id:"reservation",size:"large",disabled:J,style:{display:"inline-block",float:"right"},onClick:function(){var t=""===c?(Object(pe.toast)({type:"warning",title:"Missing Information",time:2e3,size:"mini",description:"Insert a date"}),!1):""===f?(Object(pe.toast)({type:"warning",title:"Missing Information",time:2e3,size:"mini",description:"Insert an hour"}),!1):null===I?(Object(pe.toast)({type:"warning",title:"Missing Information",time:2e3,size:"mini",description:"Insert a subject"}),!1):""!==R||(Object(pe.toast)({type:"warning",title:"Missing Information",time:2e3,size:"mini",description:"Insert number of groups"}),!1),a=!0,n=g.map((function(e){return void 0===e.quantity?(a=!1,Object(pe.toast)({type:"warning",title:"Missing Information",time:2e3,size:"mini",description:"Insert a quantity for the material ".concat(e.name)})):{type:e.id,quantity:e.quantity}}));a&&t&&(K(!0),W.post(U,{user_id:u.id,subject:I.id,date:"".concat(c," ").concat(f),groups:R,materials:n,duration:M}).then((function(t){je(t),setTimeout((function(){localStorage.removeItem("reservation"),e.history.push("/auth/teacher/reservation")}),3e3)})).catch((function(e){K(!1);var t=je(e.response);setTimeout((function(){F(t)}),3e3)})))},icon:"edit alternate",content:"Reserve"}),r.a.createElement("div",{style:{display:"block",marginTop:"5%"}},r.a.createElement(v.a,{size:"medium"},"Material:"),r.a.createElement(Ze.a,{size:"large",divided:!0},g.map((function(e){return r.a.createElement(Ze.a.Item,{key:e.id},r.a.createElement(Ze.a.Content,{floated:"left"},r.a.createElement(Ze.a.Header,null,e.name)),r.a.createElement(Ze.a.Content,{floated:"right"},r.a.createElement(Ze.a.Description,null,"Quantity per Group:",r.a.createElement(we.a,{size:"small",onChange:function(t,a){return function(e,t){parseInt(t)<parseInt("1")&&(t="1"),parseInt(t)>parseInt("10")&&(t="10");var a=g,n=a.findIndex((function(t){return t.id===e.id}));a[n]=Object(Fe.a)(Object(Fe.a)({},a[n]),{},{quantity:t}),y(a)}(e,a.value)},type:"number",style:{textAlign:"center"},required:!0,min:"1",max:"10"}))))})))))))};var xt=function(e){var t=Object(n.useState)([]),a=Object(h.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)(null),o=Object(h.a)(i,2),u=o[0],s=o[1],m=se.a.create({headers:{Authorization:"Bearer "+localStorage.getItem("token")}});return Object(n.useEffect)((function(){var e=JSON.parse(localStorage.getItem("userinfo")).id;m.get(W.replace(":id",e)).then((function(e){l(e.data.reservations)})).catch((function(e){var t=je(e.response);setTimeout((function(){s(t)}),3e3)}))}),[]),r.a.createElement("div",null,r.a.createElement(pe.SemanticToastContainer,null),u||r.a.createElement("div",null,r.a.createElement(v.a,{size:"medium"},"Reservations"),r.a.createElement(_e.a,{basic:!0,size:"large",onClick:function(){e.history.push("/auth/teacher/newreservation/types")},icon:"file alternate",content:"New Reservation"}),r.a.createElement("div",{style:{display:"block"}},r.a.createElement(Me.a,null),r.a.createElement(Ze.a,{selection:!0},0===c.length?r.a.createElement(v.a,null,"There is no Active Reservations"):c.map((function(t){return r.a.createElement(Ze.a.Item,{key:t.id,onClick:function(){return a=t.id,void e.history.push(e.location.pathname+"/".concat(a));var a}},r.a.createElement(Ze.a.Content,null,r.a.createElement(Ze.a.Header,null,t.id),r.a.createElement(Ze.a.Description,null,t.subject," | ",t.date," | ",t.hour," "),r.a.createElement(Ze.a.Description,null," Duration ",t.duration," ")))}))))))};a(772);var Rt=function(e){var t=Object(n.useState)({materials:[]}),a=Object(h.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)(null),o=Object(h.a)(i,2),u=o[0],s=o[1],m=Object(n.useState)(!1),d=Object(h.a)(m,2),f=d[0],p=d[1],E=se.a.create({headers:{Authorization:"Bearer "+localStorage.getItem("token")}});return Object(n.useEffect)((function(){var t=e.match.params.id;E.get(G.replace(":id",t)).then((function(e){l(Object(Fe.a)(Object(Fe.a)({},e.data),{},{id:t}))})).catch((function(e){var t=je(e.response);setTimeout((function(){s(t)}),3e3)}))}),[]),r.a.createElement("div",null,r.a.createElement(pe.SemanticToastContainer,null),u||(c.id?r.a.createElement("div",null,r.a.createElement(Ue.a,{style:{float:"right"}},r.a.createElement(y.a,{src:"data:image/jpeg;base64,".concat(c.user_photo),wrapped:!0,ui:!1}),r.a.createElement(Ue.a.Content,null,r.a.createElement(Ue.a.Header,null,c.user_name),r.a.createElement(Ue.a.Meta,null,c.user_id)),r.a.createElement(Ue.a.Content,{extra:!0},c.subject," | ",c.date," | ",c.hour,r.a.createElement("div",null,"Duration: ",c.duration),r.a.createElement(Me.a,null),r.a.createElement(v.a,{size:"small"},"Groups: ",c.nr_groups," "))),r.a.createElement(_e.a,{id:"delete",disabled:f,floated:"right",color:"red",onClick:function(){p(!0),E.delete(G.replace(":id",c.id)).then((function(t){je(t),setTimeout((function(){return e.history.push(e.location.pathname.replace("/".concat(c.id),""))}),3e3)})).catch((function(e){p(!1);var t=je(e.response);setTimeout((function(){s(t)}),3e3)}))},content:"Delete Reservation",icon:"delete"}),r.a.createElement(v.a,{style:{marginLeft:"13%"}},"Material: "),r.a.createElement(Me.a,null),r.a.createElement("div",{style:{display:"inline-block"}},c.materials.map((function(e){return r.a.createElement(v.a,{size:"small",key:e.type},e.type_name+" | "+e.type_id+" | Quantity: "+e.quantity)})))):r.a.createElement(Le.a,null,"Loading...",r.a.createElement(Ne.a,{name:"circle notched",loading:!0}))))};var qt=function(e){return r.a.createElement("div",null,r.a.createElement(pe.SemanticToastContainer,null),r.a.createElement(v.a,{size:"medium",id:"title"},e.title),r.a.createElement(Me.a,null),0!==e.material.length||e.moreData?r.a.createElement(ze.a,{columns:4,style:{height:30,margin:6,padding:8}},e.material.map((function(t){return r.a.createElement(ze.a.Column,null,r.a.createElement(Ue.a,{centered:!0},r.a.createElement(Ue.a.Header,null," ",t.material," "),r.a.createElement(Ue.a.Content,{extra:!0},r.a.createElement(_e.a,{fluid:!0,content:"See Report",icon:"bug",onClick:function(){return e.history.push(e.location.pathname+"/"+t.id)}}))))}))):r.a.createElement(v.a,{size:"small"},"There is no Damages Reported"))};var Dt=function(e){var t=Object(n.useRef)(),a=Object(n.useState)(!1),c=Object(h.a)(a,2),l=c[0],i=c[1],o=Object(n.useState)(null),u=Object(h.a)(o,2),s=u[0],m=u[1],d=Object(n.useState)(0),f=Object(h.a)(d,2),p=f[0],E=f[1],b=Object(n.useState)(!0),g=Object(h.a)(b,2),v=g[0],y=g[1],j=Object(n.useState)(null),O=Object(h.a)(j,2),S=O[0],k=O[1],C=se.a.create({headers:{Authorization:"Bearer "+localStorage.getItem("token")}}),z=Object(n.useState)([]),T=Object(h.a)(z,2),I=T[0],w=T[1];Object(n.useEffect)((function(){return x.observe(t.current),function(){x.disconnect()}}),[]),Object(n.useEffect)((function(){if(s>=0&&v&&!l){var e=p+1;E(e),i(!0),t=e,a=I,C.get(N.replace(":flag","false")+"&page=".concat(t)).then((function(e){var t=e.data.damages;0===t.length&&y(!1);var n=a;n.push.apply(n,Object(We.a)(t)),w(n),i(!1)})).catch((function(e){var t=je(e.response);setTimeout((function(){k(t)}),3e3)}))}var t,a}),[s]);var _={root:document.querySelector("#damages"),rootMargin:"5px",threshold:1},x=new IntersectionObserver((function(e){var t=e[0].intersectionRatio;m(t)}),_);return r.a.createElement("div",null,r.a.createElement(pe.SemanticToastContainer,null),S||r.a.createElement("div",null,r.a.createElement(qt,Object.assign({title:"Damage Reports:",material:I,moreData:v},e)),r.a.createElement("div",{id:"damages"},r.a.createElement("div",{ref:t}),l?r.a.createElement(Le.a,{size:"small"},r.a.createElement(Ne.a,{name:"circle notch",loading:!0}),"Loading..."):null)))},At=a(249),Mt=[{title:"Material Id",value:"material_id"},{title:"Name",value:"material_name"},{title:"Request Id",value:"request"},{title:"User",value:"user"},{title:"Date",value:"start_date"}];var Lt=function(e){return r.a.createElement("div",null,r.a.createElement(v.a,{size:"medium"},"Material Details"),function(){var t=e.material_report.state,a="red";return e.history&&"solved"===e.material_report.state&&(a="green"),r.a.createElement(et.a,{size:"huge",color:a},"State:",r.a.createElement(et.a.Detail,null,t))}(),r.a.createElement(Me.a,null),e.history?null:r.a.createElement("div",{style:{display:"block"}},"Change Report State:",r.a.createElement(St,{values:e.material_report.states,value:e.material_report.state,changeOption:e.changeState})),r.a.createElement(Ze.a,{divided:!0},Mt.map((function(t){return void 0===e.material_report[t.value]?null:r.a.createElement(Ze.a.Item,{key:t.title},r.a.createElement(Ze.a.Content,{floated:"left"},r.a.createElement(Ze.a.Header,null,t.title)),r.a.createElement(Ze.a.Content,{floated:"right"},r.a.createElement(Ze.a.Description,null,e.material_report[t.value])))}))),r.a.createElement(At.a,null,r.a.createElement(Ue.a,{fluid:!0},r.a.createElement(Ue.a.Content,null,r.a.createElement(Ue.a.Header,null,"Report Description"),r.a.createElement(Ue.a.Description,null,r.a.createElement(Me.a,null),r.a.createElement(Ue.a.Header,{size:"small"},e.material_report.description)))),e.history?r.a.createElement(Ue.a,{fluid:!0},r.a.createElement(Ue.a.Content,null,r.a.createElement(Ue.a.Header,null,"Solution Description"),r.a.createElement(Ue.a.Description,null,r.a.createElement(Me.a,null),r.a.createElement(Ue.a.Header,{size:"small"},e.material_report.report)))):r.a.createElement(Ue.a,{fluid:!0},r.a.createElement(Ue.a.Content,null,r.a.createElement(Ue.a.Header,null,"Solution Description"),r.a.createElement(Ue.a.Description,null,r.a.createElement(Te.a,null,r.a.createElement(jt.a,{rows:"2",required:!0,maxLength:"200",onChange:function(t,a){return e.changeMaterialReport(Object(Fe.a)(Object(Fe.a)({},e.material_report),{},{report:a.value}))}})))),r.a.createElement(Ue.a.Content,{extra:!0},r.a.createElement(Ge.a,{fluid:!0},r.a.createElement(_e.a,{basic:!0,color:"green",id:"confirm",disabled:e.buttonState,onClick:e.onConfirm,content:"Confirm"}),r.a.createElement(_e.a,{basic:!0,color:"red",onClick:e.onCancel,content:"Cancel"}))))))};var Nt=function(e){var t=Object(n.useState)({states:[]}),a=Object(h.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)(null),o=Object(h.a)(i,2),u=o[0],s=o[1],m=Object(n.useState)(!1),d=Object(h.a)(m,2),f=d[0],p=d[1],E=se.a.create({headers:{Authorization:"Bearer "+localStorage.getItem("token")}});return Object(n.useEffect)((function(){var t=e.match.params.id;E.get(H.replace(":id",t)).then((function(e){if("to_solve"!=e.data.state)return s(r.a.createElement(ge,null));E.get(B).then((function(t){l(Object(Fe.a)(Object(Fe.a)({},e.data),{},{states:t.data.states}))})).catch((function(e){var t=je(e.response);setTimeout((function(){s(t)}),3e3)}))})).catch((function(e){var t=je(e.response);setTimeout((function(){s(t)}),3e3)}))}),[]),r.a.createElement("div",null,r.a.createElement(pe.SemanticToastContainer,null),u||(c.id?r.a.createElement(Lt,{changeState:function(e){"all"!==e&&l(Object(Fe.a)(Object(Fe.a)({},c),{},{state:e}))},material_report:c,changeMaterialReport:function(e){return l(e)},onConfirm:function(){return void 0===c.report?Object(pe.toast)({type:"warning",title:"Missing Information",description:"Insert a solution description",time:2e3,size:"mini"}):"to_solve"===c.state?Object(pe.toast)({type:"warning",title:"Missing Information",description:"Change the report state",time:2e3,size:"mini"}):(p(!0),void E.patch(H.replace(":id",c.id),{state:c.state,report:c.report}).then((function(t){je(t),setTimeout((function(){return e.history.push("/auth/tech/damages")}),3e3)})).catch((function(e){p(!1);var t=je(e.response);setTimeout((function(){s(t)}),3e3)})))},buttonState:f,onCancel:function(){e.history.push(e.location.pathname.replace("/".concat(c.id),""))}}):r.a.createElement(Le.a,null,"Loading...",r.a.createElement(Ne.a,{name:"circle notched",loading:!0}))))};var Bt=function(e){var t=Object(n.useState)({}),a=Object(h.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)(null),o=Object(h.a)(i,2),u=o[0],s=o[1],m=se.a.create({headers:{Authorization:"Bearer "+localStorage.getItem("token")}});return Object(n.useEffect)((function(){var t=e.match.params.id;m.get(H.replace(":id",t)).then((function(e){if("to_solve"==e.data.state)return s(r.a.createElement(ge,null));l(Object(Fe.a)({},e.data))})).catch((function(e){var t=je(e.response);setTimeout((function(){s(t)}),3e3)}))}),[]),r.a.createElement("div",null,r.a.createElement(pe.SemanticToastContainer,null),u||(c.id?r.a.createElement(Lt,{history:!0,material_report:c}):r.a.createElement(Le.a,null,"Loading...",r.a.createElement(Ne.a,{name:"circle notched",loading:!0}))))};var Ht=function(e){var t=Object(n.useRef)(),a=Object(n.useState)(!1),c=Object(h.a)(a,2),l=c[0],i=c[1],o=Object(n.useState)(null),u=Object(h.a)(o,2),s=u[0],m=u[1],d=Object(n.useState)(0),f=Object(h.a)(d,2),p=f[0],E=f[1],b=Object(n.useState)(!0),g=Object(h.a)(b,2),v=g[0],y=g[1],j=Object(n.useState)([]),O=Object(h.a)(j,2),S=O[0],k=O[1],C=Object(n.useState)(null),z=Object(h.a)(C,2),T=z[0],I=z[1],w=se.a.create({headers:{Authorization:"Bearer "+localStorage.getItem("token")}});Object(n.useEffect)((function(){return x.observe(t.current),function(){x.disconnect()}}),[]),Object(n.useEffect)((function(){if(s>=0&&v&&!l){var e=p+1;E(e),i(!0),t=e,a=S,w.get(N.replace(":flag","true")+"&page=".concat(t)).then((function(e){var t=e.data.damages;0===t.length&&y(!1);var n=a;n.push.apply(n,Object(We.a)(t)),k(n),i(!1)})).catch((function(e){var t=je(e.response);setTimeout((function(){I(t)}),3e3)}))}var t,a}),[s]);var _={root:document.querySelector("#damages"),rootMargin:"5px",threshold:1},x=new IntersectionObserver((function(e){var t=e[0].intersectionRatio;m(t)}),_);return r.a.createElement("div",null,r.a.createElement(pe.SemanticToastContainer,null),T||r.a.createElement("div",null,r.a.createElement(qt,Object.assign({title:"Damage Reports History:",material:S,moreData:v},e)),r.a.createElement("div",{id:"damages"},r.a.createElement("div",{ref:t}),l?r.a.createElement(Le.a,{size:"small"},r.a.createElement(Ne.a,{name:"circle notch",loading:!0}),"Loading..."):null)))};var Ft=function(e){var t=Object(n.useRef)(),a=Object(n.useState)(!1),c=Object(h.a)(a,2),l=c[0],i=c[1],o=Object(n.useState)(null),u=Object(h.a)(o,2),s=u[0],m=u[1],d=Object(n.useState)(0),f=Object(h.a)(d,2),p=f[0],E=f[1],b=Object(n.useState)(!0),g=Object(h.a)(b,2),y=g[0],j=g[1],O=Object(n.useState)(null),S=Object(h.a)(O,2),k=S[0],C=S[1],z=Object(n.useState)(!1),T=Object(h.a)(z,2),I=T[0],w=T[1],_=Object(n.useState)({}),x=Object(h.a)(_,2),D=x[0],A=x[1],M=Object(n.useState)(null),L=Object(h.a)(M,2),N=L[0],B=L[1],H=se.a.create({headers:{Authorization:"Bearer "+localStorage.getItem("token")}}),F=Object(n.useState)([]),P=Object(h.a)(F,2),Y=P[0],J=P[1];Object(n.useEffect)((function(){return W.observe(t.current),function(){W.disconnect()}}),[]);var K={root:document.querySelector("#material"),rootMargin:"5px",threshold:1},W=new IntersectionObserver((function(e){var t=e[0].intersectionRatio;m(t)}),K);function U(e){e||(e="");E(1),J([]),j(!0),i(!0),G(e,1,[])}function G(e,t,a){var n=e;n+=n?"&":"?",n+="state=available&page=".concat(t),H.get(R+n).then((function(t){var n=t.data.materials;if(0==n.length&&0==a.length)return i(!1),j(!1),Object(pe.toast)({type:"warning",title:"Something went wrong",time:2e3,size:"mini",description:"There are no results for the specified parameters"});0===n.length&&j(!1);var r=a;r.push.apply(r,Object(We.a)(n)),J(r),i(!1),C(e)})).catch((function(e){var t=je(e.response);setTimeout((function(){B(t)}),3e3)}))}function Q(t){var a=document.getElementById("delete"+t);a.disabled=!0;var n=document.getElementById("detail"+t);n.disabled=!0,H.delete(q.replace(":id",t),{data:{quantity:void 0!=D.id?D.delete_quantity:1}}).then((function(t){je(t),setTimeout((function(){return U(e.location.search)}),3e3)})).catch((function(e){a.disabled=!1,n.disabled=!1;var t=je(e.response);setTimeout((function(){B(t)}),3e3)})),D.id&&A({}),w(!1)}return Object(n.useEffect)((function(){if(s>=0&&y&&null!=k&&!l){var e=p+1;E(e),i(!0),G(k,e,Y)}}),[s]),r.a.createElement("div",null,r.a.createElement(pe.SemanticToastContainer,null),N||r.a.createElement("div",null,r.a.createElement(v.a,{size:"medium"},"Material:"),r.a.createElement($e,Object.assign({},e,{setFilters:U,updateUrl:!0})),r.a.createElement("div",null,r.a.createElement(_e.a,{icon:"add",content:"Add Material",onClick:function(){e.history.push("/auth/labmanager/addmaterial")}})),r.a.createElement(Me.a,null),r.a.createElement(ct.a,{size:"small",open:I,dimmer:"blurring"},r.a.createElement(v.a,{size:"huge",textAlign:"center"},"Remove Material"),r.a.createElement(ct.a.Content,null,r.a.createElement(ct.a.Description,null,r.a.createElement(v.a,{size:"large",textAlign:"center"},"Verify the quantity to remove"),r.a.createElement(Me.a,null),r.a.createElement(v.a,{textAlign:"center"},D.name," | ",D.id),r.a.createElement(we.a,{type:"number",size:"small",required:!0,defaultValue:1,onChange:function(e,t){return a=t.value,n=D.available_quantity,parseInt(a)>parseInt(n)&&(a=n),parseInt(a)<parseInt("1")&&(a="1"),void A(Object(Fe.a)(Object(Fe.a)({},D),{},{delete_quantity:a}));var a,n},min:"1",max:D.available_quantity,style:{width:"90%"}}))),r.a.createElement(ct.a.Actions,null,r.a.createElement(_e.a,{color:"red",onClick:function(){return Q(D.id)},content:"Remove"}),r.a.createElement(_e.a,{onClick:function(){return w(!1)},content:"Cancel"}))),r.a.createElement("div",null,r.a.createElement(ze.a,{columns:3,id:"material",style:{height:30,margin:6,padding:8}},0!=Y.length||l?Y.map((function(t){var a=r.a.createElement(_e.a,{id:"delete"+t.id,compact:!0,onClick:function(){return Q(t.id)},icon:"remove",content:"Delete Material",color:"red"});return 0==t.id.split("-")[0]&&(a=r.a.createElement(_e.a,{id:"delete"+t.id,compact:!0,onClick:function(){return function(e){A(Object(Fe.a)(Object(Fe.a)({},e),{},{delete_quantity:1})),w(!0)}(t)},icon:"remove",content:"Delete Material",color:"red"})),r.a.createElement(ze.a.Column,null,r.a.createElement(Ue.a,{centered:!0},r.a.createElement(Ue.a.Header,null,t.name),r.a.createElement(Ue.a.Description,null,t.id),r.a.createElement(Ue.a.Content,{extra:!0,floated:"right"},r.a.createElement(_e.a.Group,{fluid:!0},r.a.createElement(_e.a,{id:"detail"+t.id,content:"Details",icon:"microchip",onClick:function(){return e.history.push(e.location.pathname+"/"+t.id)}}),a))))})):r.a.createElement(Le.a,null,"There are no results"),r.a.createElement("div",{ref:t}),l?r.a.createElement(ze.a.Column,null,r.a.createElement(Le.a,{size:"small"},r.a.createElement(Ne.a,{name:"circle notch",loading:!0}),"Loading...")):null))))};var Pt=function(e){var t=Object(n.useState)([]),a=Object(h.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)([]),o=Object(h.a)(i,2),u=o[0],s=o[1],m=Object(n.useState)(""),d=Object(h.a)(m,2),f=d[0],p=d[1],E=Object(n.useState)(""),b=Object(h.a)(E,2),g=b[0],y=b[1],j=Object(n.useState)(1),O=Object(h.a)(j,2),C=O[0],z=O[1],T=Object(n.useState)(null),I=Object(h.a)(T,2),w=I[0],_=I[1],x=Object(n.useState)(!1),q=Object(h.a)(x,2),D=q[0],A=q[1],M=se.a.create({headers:{Authorization:"Bearer "+localStorage.getItem("token")}});return Object(n.useEffect)((function(){var e=JSON.parse(localStorage.getItem("userinfo")).roles.find((function(e){return"lab_responsible"===e.name}));M.get(k.replace(":id",e.sci_area_id)).then((function(t){M.get(S).then((function(a){var n=a.data.sci_areas.find((function(t){return t.id===e.sci_area_id})),r=a.data.sci_areas.find((function(e){return 0===e.id}));y({id:n.id}),s([n,r]),l(t.data.types),p(t.data.types[0])})).catch((function(e){var t=je(e.response);setTimeout((function(){_(t)}),3e3)}))})).catch((function(e){var t=je(e.response);setTimeout((function(){_(t)}),3e3)}))}),[]),r.a.createElement("div",null,r.a.createElement(pe.SemanticToastContainer,null),w||r.a.createElement(Ue.a,{fluid:!0},r.a.createElement(Ue.a.Content,null,r.a.createElement(Ue.a.Header,null,"Add Material"),r.a.createElement(Ue.a.Meta,{style:{marginTop:"2%"}},r.a.createElement(Ue.a.Header,null,"Scientific Area: "),r.a.createElement(Qe,{changeFilter:function(e){"all"!=e.id&&M.get(k.replace(":id",e.id)).then((function(t){y(e),l(t.data.types)}))},name:"sci_area",types:u,value:g.id}),r.a.createElement("div",{style:{display:"block",float:"right"}},r.a.createElement(v.a,{size:"medium"},"Material Type:"),r.a.createElement(Qe,{changeFilter:function(e){"all"!==e.id&&p(e)},name:"type",types:c,value:f.id})),r.a.createElement("div",{style:{float:"left"}},r.a.createElement(v.a,{size:"medium"},"Quantity:"),r.a.createElement(we.a,{type:"number",size:"mini",required:!0,defaultValue:1,onChange:function(e,t){return a=t.value,parseInt(a)<parseInt("1")&&z("1"),void(parseInt(a)>parseInt("10")?z("10"):z(a));var a},min:"1",max:"10",style:{width:"90%"}})))),r.a.createElement(Ue.a.Content,{extra:!0},r.a.createElement(Ge.a,{fluid:!0},r.a.createElement(_e.a,{basic:!0,id:"confirm",color:"green",content:"Confirm",disabled:D,onClick:function(){if(""===f)return Object(pe.toast)({type:"warning",title:"Missing Information",description:"Select a type to associate the new material",time:2e3,size:"mini"});A(!0),M.post(R,{quantity:C,type:f.id}).then((function(t){je(t),setTimeout((function(){return e.history.push(e.location.pathname.replace("/addmaterial","/material"))}),3e3)})).catch((function(e){A(!1);var t=je(e.response);setTimeout((function(){_(t)}),3e3)}))}}),r.a.createElement(_e.a,{basic:!0,color:"red",content:"Cancel",onClick:function(){e.history.push("/auth/labmanager/material")}})))))};var Yt=function(e){var t=Object(n.useState)([]),a=Object(h.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)([]),o=Object(h.a)(i,2),u=o[0],s=o[1],m=Object(n.useState)([]),d=Object(h.a)(m,2),f=d[0],p=d[1],E=Object(n.useState)(""),b=Object(h.a)(E,2),g=b[0],y=b[1],j=Object(n.useState)(""),O=Object(h.a)(j,2),z=O[0],T=O[1],I=Object(n.useState)(""),w=Object(h.a)(I,2),x=w[0],R=w[1],q=Object(n.useState)([]),D=Object(h.a)(q,2),A=D[0],M=D[1],L=Object(n.useState)([]),N=Object(h.a)(L,2),B=N[0],H=N[1],F=Object(n.useState)(null),P=Object(h.a)(F,2),Y=P[0],J=P[1],K=Object(n.useState)(!1),W=Object(h.a)(K,2),U=W[0],G=W[1],Q=se.a.create({headers:{Authorization:"Bearer "+localStorage.getItem("token")}});function V(e){var t,a=e.target.name;t=a,H(Object(Fe.a)(Object(Fe.a)({},B),{},Object(ft.a)({},t,!B[t])))}return Object(n.useEffect)((function(){var e=JSON.parse(localStorage.getItem("userinfo")).roles.find((function(e){return"lab_responsible"===e.name}));Q.get(S).then((function(t){var a=t.data.sci_areas.find((function(t){return t.id===e.sci_area_id})),n=t.data.sci_areas.find((function(e){return 0===e.id}));Q.get(k.replace(":id",e.sci_area_id)).then((function(e){p([a,n]),l(e.data.subjects),s(e.data.subjects),y({id:a.id}),H(e.data.subjects.reduce((function(e,t){return Object(Fe.a)(Object(Fe.a)({},e),{},Object(ft.a)({},t.id,!1))}),[]))})).catch((function(e){var t=je(e.response);setTimeout((function(){J(t)}),3e3)}))})).catch((function(e){var t=je(e.response);setTimeout((function(){J(t)}),3e3)})),Q.get(C).then((function(e){M(e.data.subjects.map((function(e){return e.id})))})).catch((function(e){return J(je(e.response))}))}),[]),r.a.createElement("div",null,r.a.createElement(pe.SemanticToastContainer,null),Y||r.a.createElement("div",null,r.a.createElement(Ue.a,{fluid:!0},r.a.createElement(Ue.a.Content,null,r.a.createElement(Ue.a.Header,null,"Add Material Type"),r.a.createElement(Ue.a.Meta,{style:{marginTop:"2%"}},r.a.createElement(Ue.a.Header,null,"Scientific Area:"),r.a.createElement(Qe,{changeFilter:function(e){"all"===e.id?e="":("0"==e.id?l([]):l(u),y(e))},name:"sci_area",types:f,value:g.id}),r.a.createElement("div",{style:{marginTop:"2%"}},r.a.createElement(v.a,null,"Subjects:"),r.a.createElement(ze.a,{columns:5,style:{height:30,marginLeft:"5%",padding:8},centered:!0},0===c.length?r.a.createElement(v.a,null,"All Subjects Selected"):c.map((function(e){return r.a.createElement(ze.a.Column,{key:e.type},r.a.createElement(pt,{name:e.id,label:e.name,isSelected:B[e.id],onCheckboxChange:V,key:e.type}))}))))),r.a.createElement(Ue.a.Description,{style:{marginTop:"10%"}},r.a.createElement(v.a,{attached:"top"},"New Material Type"),r.a.createElement(Ie.a,{attached:!0},r.a.createElement(v.a,null,"Name:"),r.a.createElement(Te.a,null,r.a.createElement(jt.a,{required:!0,onChange:function(e,t){return T(t.value)},style:{textAlign:"center"},maxLength:"15"})),r.a.createElement(v.a,null,"Description:"),r.a.createElement(Te.a,null,r.a.createElement(jt.a,{required:!0,onChange:function(e,t){return R(t.value)},style:{textAlign:"center"},maxLength:"150"}))))),r.a.createElement(Ue.a.Content,{extra:!0},r.a.createElement(Ge.a,{fluid:!0},r.a.createElement(_e.a,{basic:!0,color:"green",id:"confirm",content:"Confirm",disabled:U,onClick:function(){var t=Object.keys(B).filter((function(e){return B[e]}));if(""===z||0==z.trimLeft().length)return Object(pe.toast)({type:"warning",title:"Missing Information",description:"Insert a name for the new type",time:2e3,size:"mini"});if(""===x||0==x.trimLeft().length)return Object(pe.toast)({type:"warning",title:"Missing Information",description:"Insert a description for the new type",time:2e3,size:"mini"});if(0!=g.id){if(0===t.length)return Object(pe.toast)({type:"warning",title:"Missing Information",description:"Select subjects to associate with the new type",time:2e3,size:"mini"});G(!0),Q.post(_.replace(":sciAreaId",g.id),{name:z,description:x,subjects:t}).then((function(t){je(t),setTimeout((function(){return e.history.push(e.location.pathname.replace("/addtype","/type"))}),3e3)})).catch((function(e){je(e.response),G(!1)}))}else G(!0),Q.post(_.replace(":sciAreaId",g.id),{name:z,description:x,subjects:A}).then((function(t){je(t),setTimeout((function(){return e.history.push(e.location.pathname.replace("/addtype","/type"))}),3e3)})).catch((function(e){je(e.response),G(!1)}))}}),r.a.createElement(_e.a,{basic:!0,color:"red",content:"Cancel",onClick:function(){e.history.push("/auth/labmanager/type")}}))))))};var Jt=function(e){var t=Object(n.useState)([]),a=Object(h.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)(""),o=Object(h.a)(i,2),u=o[0],s=o[1],m=Object(n.useState)({}),d=Object(h.a)(m,2),f=d[0],p=d[1],E=Object(n.useState)(null),b=Object(h.a)(E,2),g=b[0],y=b[1],j=se.a.create({headers:{Authorization:"Bearer "+localStorage.getItem("token")}});function O(){j.get(k.replace(":id",f.id)).then((function(e){l(e.data.subjects||[])})).catch((function(e){var t=je(e.response);setTimeout((function(){y(t)}),3e3)}))}return Object(n.useEffect)((function(){var t=e.match.params.id;j.get(k.replace(":id",t)).then((function(e){l(e.data.subjects||[]),p({name:e.data.name,id:t})})).catch((function(e){var t=je(e.response);setTimeout((function(){y(t)}),3e3)}))}),[]),r.a.createElement("div",null,r.a.createElement(pe.SemanticToastContainer,null),g||(f.id?r.a.createElement("div",null,r.a.createElement(v.a,{size:"medium"},"Scientific Area: ",f.name),r.a.createElement(Me.a,null),r.a.createElement(v.a,{size:"medium"},"Subjects:"),r.a.createElement("div",{className:"ui medium action input"},r.a.createElement(we.a,{id:"addsubject",type:"text",maxLength:"4",onChange:function(e,t){var a;""!=(a=t.value)&&0!=a.trimLeft().length&&s(a)},action:r.a.createElement(_e.a,{onClick:function(){var e=document.getElementById("addsubject");""!=e.value&&""!=u&&j.post(T.replace(":sciAreaId",f.id),{name:u}).then((function(t){e.value="",je(t),setTimeout((function(){return O()}),3e3)})).catch((function(e){var t=je(e.response);setTimeout((function(){y(t)}),3e3)}))}},"Add"),placeholder:"Subjects..."})),r.a.createElement(Ze.a,{divided:!0},c.map((function(e){return r.a.createElement(Ze.a.Item,{key:e.id},r.a.createElement(Ze.a.Content,{floated:"right"},r.a.createElement(_e.a,{size:"big",id:"delete"+e.id,compact:!0,onClick:function(){return function(e){var t=document.getElementById("delete".concat(e));t.disabled=!0,j.delete(T.replace(":sciAreaId",f.id)+"/".concat(e)).then((function(e){je(e),setTimeout((function(){return O()}),3e3)})).catch((function(e){t.disabled=!1;var a=je(e.response);setTimeout((function(){y(a)}),3e3)}))}(e.id)},icon:"red close"})),r.a.createElement(Ze.a.Content,null,e.name))})))):r.a.createElement(Le.a,null,"Loading...",r.a.createElement(Ne.a,{name:"circle notched",loading:!0}))))};var Kt=function(e){var t=Object(n.useState)([]),a=Object(h.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)(""),o=Object(h.a)(i,2),u=o[0],s=o[1],m=Object(n.useState)(null),d=Object(h.a)(m,2),f=d[0],p=d[1],E=se.a.create({headers:{Authorization:"Bearer "+localStorage.getItem("token")}});function b(e){E.get(k.replace(":id",e)).then((function(e){E.get(k.replace(":id","0")).then((function(t){l([].concat(Object(We.a)(e.data.types),Object(We.a)(t.data.types)))})).catch((function(e){var t=je(e.response);setTimeout((function(){p(t)}),3e3)}))})).catch((function(e){var t=je(e.response);setTimeout((function(){p(t)}),3e3)}))}return Object(n.useEffect)((function(){var e=JSON.parse(localStorage.getItem("userinfo")).roles.find((function(e){return"lab_responsible"===e.name}));s(e.sci_area_id),b(e.sci_area_id)}),[]),r.a.createElement("div",null,r.a.createElement(pe.SemanticToastContainer,null),f||r.a.createElement("div",null,r.a.createElement(v.a,{size:"medium"},"Material Type:"),r.a.createElement(_e.a,{size:"medium",icon:"add",content:"Add Type",onClick:function(){e.history.push("/auth/labmanager/addtype")}}),r.a.createElement(Me.a,null),r.a.createElement(Ze.a,{divided:!0},c.map((function(e){return r.a.createElement(Ze.a.Item,{key:e.id},r.a.createElement(Ze.a.Content,{floated:"right"},r.a.createElement(_e.a,{size:"big",compact:!0,icon:"red close",id:"delete"+e.id,onClick:function(){return function(e){var t=document.getElementById("delete"+e);t.disabled=!0;var a=u;0==e.split("-")[0]&&(a="0"),E.delete(x.replace(":sciAreaId",a).replace(":id",e)).then((function(e){je(e),setTimeout((function(){return b(u)}),3e3)})).catch((function(e){t.disabled=!1;var a=je(e.response);setTimeout((function(){p(a)}),3e3)}))}(e.id)}})),r.a.createElement(Ze.a.Content,null,e.name))})))))};var Wt=function(e){var t=Object(n.useState)({roles:[]}),a=Object(h.a)(t,2),c=a[0],l=a[1];return Object(n.useEffect)((function(){var e=JSON.parse(localStorage.getItem("userinfo"));l(e)}),[]),r.a.createElement(Ue.a,{centered:!0},r.a.createElement(y.a,{src:"data:image/jpeg;base64,".concat(c.photo),wrapped:!0,ui:!1}),r.a.createElement(Ue.a.Content,null,r.a.createElement(Ue.a.Header,null,c.name),r.a.createElement(Ue.a.Description,null,"Active Role: ",e.role)),r.a.createElement(Ue.a.Content,{extra:!0},r.a.createElement("a",null,r.a.createElement("p",null,r.a.createElement(Ne.a,{name:"users"}),"Roles:"),c.roles.map((function(e,t){return t+1===c.roles.length?e.name:e.name+", "})))))},Ut=a(22),Gt=a(475),Qt=function(e){Object(s.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleChange=function(e,t){t.name;var a=t.value;n.props.setMonth&&n.props.setMonth(a)},n.state={month:""},n}return Object(u.a)(a,[{key:"currentTime",value:function(){var e=new Date,t=String(e.getMonth()+1).padStart(2,"0"),a=e.getFullYear();return e=a+"-"+t}},{key:"render",value:function(){return r.a.createElement(Te.a,null,r.a.createElement(ut.MonthInput,{dateFormat:"YYYY-MM",name:"date",placeholder:"Data",value:this.props.date,iconPosition:"left",popupPosition:"top left",onChange:this.handleChange,maxDate:this.currentTime()}))}}]),a}(n.Component),Vt=function(e){Object(s.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleChange=function(e,t){t.name;var a=t.value;n.props.setYear&&n.props.setYear(a)},n.state={year:""},n}return Object(u.a)(a,[{key:"currentTime",value:function(){var e=new Date,t=e.getFullYear();return e=t}},{key:"render",value:function(){return r.a.createElement(Te.a,null,r.a.createElement(ut.YearInput,{dateFormat:"YYYY",name:"date",placeholder:"Data",value:this.props.date,iconPosition:"left",popupPosition:"top left",onChange:this.handleChange,maxDate:this.currentTime()}))}}]),a}(n.Component);var $t=function(){var e=Object(n.useState)([]),t=Object(h.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)([]),i=Object(h.a)(l,2),o=i[0],u=i[1],s=Object(n.useState)([]),m=Object(h.a)(s,2),d=m[0],f=m[1],p=Object(n.useState)([]),E=Object(h.a)(p,2),b=E[0],g=E[1],y=Object(n.useState)([]),j=Object(h.a)(y,2),O=j[0],S=j[1],k=Object(n.useState)("all"),C=Object(h.a)(k,2),z=C[0],T=C[1],w=Object(n.useState)(null),_=Object(h.a)(w,2),x=_[0],R=_[1],q=Object(n.useState)([]),D=Object(h.a)(q,2),A=D[0],M=D[1],L=Object(n.useState)([]),N=Object(h.a)(L,2),B=N[0],H=N[1],F=Object(n.useState)("all"),P=Object(h.a)(F,2),Y=P[0],J=P[1],K=Object(n.useState)([]),W=Object(h.a)(K,2),U=W[0],G=W[1],Q=Object(n.useState)("all"),V=Object(h.a)(Q,2),ie=V[0],oe=V[1],ue=Object(n.useState)(""),me=Object(h.a)(ue,2),de=me[0],fe=me[1],he=Object(n.useState)(""),Ee=Object(h.a)(he,2),be=Ee[0],ge=Ee[1],ve=Object(n.useState)([]),ye=Object(h.a)(ve,2),Oe=ye[0],Se=ye[1],ke=Object(n.useState)("all"),Ce=Object(h.a)(ke,2),ze=Ce[0],Te=Ce[1],Ie=Object(n.useState)(""),we=Object(h.a)(Ie,2),xe=we[0],Re=we[1],qe=Object(n.useState)(""),De=Object(h.a)(qe,2),Ae=De[0],Le=De[1],Ne=Object(n.useState)([]),Be=Object(h.a)(Ne,2),He=Be[0],Fe=Be[1],Pe=Object(n.useState)("all"),Ye=Object(h.a)(Pe,2),Je=Ye[0],Ke=Ye[1],We=Object(n.useState)(""),Ue=Object(h.a)(We,2),Ge=Ue[0],Ve=Ue[1],$e=Object(n.useState)(""),Xe=Object(h.a)($e,2),Ze=Xe[0],et=Xe[1],tt=se.a.create({headers:{Authorization:"Bearer "+localStorage.getItem("token")}}),at=Object(n.useState)(null),nt=Object(h.a)(at,2),rt=nt[0],ct=nt[1];function lt(){tt.get($).then((function(e){u(e.data.data)})).catch((function(e){var t=je(e.response);setTimeout((function(){ct(t)}),3e3)}))}function it(){tt.get(X).then((function(e){f(e.data.data)})).catch((function(e){var t=je(e.response);setTimeout((function(){ct(t)}),3e3)}))}function ot(){tt.get(Z).then((function(e){g(e.data.data)})).catch((function(e){var t=je(e.response);setTimeout((function(){ct(t)}),3e3)}))}function ut(){var e="";"all"!=z&&(e+="?type=".concat(z)),tt.get(ee+e).then((function(e){S(e.data.data)})).catch((function(e){var t=je(e.response);setTimeout((function(){ct(t)}),3e3)}))}function mt(){tt.get(te).then((function(e){R(e.data.average)})).catch((function(e){var t=je(e.response);setTimeout((function(){ct(t)}),3e3)}))}function dt(){tt.get(ae).then((function(e){M(e.data.data)})).catch((function(e){var t=je(e.response);setTimeout((function(){ct(t)}),3e3)}))}function ft(){var e="";"all"!=Y&&(e+="?type=".concat(Y)),tt.get(ne+e).then((function(e){H(e.data.data)})).catch((function(e){var t=je(e.response);setTimeout((function(){ct(t)}),3e3)}))}function ht(){var e="";"all"!=ie&&(e+="?type=".concat(ie)),""!=de&&(e.length>0?e+="&":e+="?",e+="from=".concat(de)),""!=be&&(e.length>0?e+="&":e+="?",e+="to=".concat(be)),tt.get(re+e).then((function(e){G(e.data.data)})).catch((function(e){var t=je(e.response);setTimeout((function(){ct(t)}),3e3)}))}function pt(){var e="";"all"!=ze&&(e+="?type=".concat(ze)),""!=xe&&(e.length>0?e+="&":e+="?",e+="from=".concat(xe)),""!=Ae&&(e.length>0?e+="&":e+="?",e+="to=".concat(Ae)),tt.get(ce+e).then((function(e){Se(e.data.data)})).catch((function(e){var t=je(e.response);setTimeout((function(){ct(t)}),3e3)}))}function Et(){var e="";"all"!=Je&&(e+="?type=".concat(Je)),""!=Ge&&(e.length>0?e+="&":e+="?",e+="from=".concat(Ge)),""!=Ze&&(e.length>0?e+="&":e+="?",e+="to=".concat(Ze)),tt.get(le+e).then((function(e){Fe(e.data.data)})).catch((function(e){var t=je(e.response);setTimeout((function(){ct(t)}),3e3)}))}return Object(n.useEffect)((function(){tt.get(I).then((function(e){c(e.data.types)})).catch((function(e){var t=je(e.response);setTimeout((function(){ct(t)}),3e3)})),lt(),it(),ot(),ut(),mt(),dt(),ft(),ht(),pt(),Et()}),[]),rt||r.a.createElement("div",null,r.a.createElement(pe.SemanticToastContainer,null),r.a.createElement(v.a,null,"Statistics"),r.a.createElement(Me.a,{style:{marginBottom:"5%"}}),r.a.createElement("div",null,r.a.createElement(_e.a,{style:{float:"right"},icon:"refresh",circular:!0,basic:!0,onClick:mt}),r.a.createElement(v.a,{size:"small"},"Average Time to Repair"),r.a.createElement(Gt.a,null,r.a.createElement(Gt.a.Value,null,x),r.a.createElement(Gt.a.Label,null,"Minutes"))),r.a.createElement("div",{style:{marginTop:"5%"}},r.a.createElement(_e.a,{style:{float:"right"},icon:"refresh",circular:!0,basic:!0,onClick:lt}),r.a.createElement(v.a,{size:"small"},"Top Ten Most Used Material Types"),r.a.createElement(Ut.b,{width:700,height:300,style:{marginLeft:"auto",marginRight:"auto"},data:o},r.a.createElement(Ut.c,{strokeDasharray:"3 3"}),r.a.createElement(Ut.f,{dataKey:"type_name"}),r.a.createElement(Ut.g,null),r.a.createElement(Ut.e,null),r.a.createElement(Ut.d,null),r.a.createElement(Ut.a,{dataKey:"nr_times",fill:"#c46b5e"}))),r.a.createElement("div",{style:{marginTop:"5%"}},r.a.createElement(_e.a,{style:{float:"right"},icon:"refresh",circular:!0,basic:!0,onClick:it}),r.a.createElement(v.a,{size:"small"},"Top Ten Most Used Material"),r.a.createElement(Ut.b,{width:700,height:300,style:{marginLeft:"auto",marginRight:"auto"},data:d},r.a.createElement(Ut.c,{strokeDasharray:"3 3"}),r.a.createElement(Ut.f,{dataKey:"material_name"}),r.a.createElement(Ut.g,null),r.a.createElement(Ut.e,null),r.a.createElement(Ut.d,null),r.a.createElement(Ut.a,{dataKey:"nr_times",fill:"#c46b5e"}))),r.a.createElement("div",{style:{marginTop:"6.8%"}},r.a.createElement(_e.a,{style:{float:"right"},icon:"refresh",circular:!0,basic:!0,onClick:ot}),r.a.createElement(v.a,{size:"small"},"Damages Per Type"),r.a.createElement(Ut.b,{width:700,height:300,style:{marginLeft:"auto",marginRight:"auto"},data:b},r.a.createElement(Ut.c,{strokeDasharray:"3 3"}),r.a.createElement(Ut.f,{dataKey:"type_name"}),r.a.createElement(Ut.g,null),r.a.createElement(Ut.e,null),r.a.createElement(Ut.d,null),r.a.createElement(Ut.a,{dataKey:"nr_damages",fill:"#c46b5e"}))),r.a.createElement("div",{style:{marginTop:"5%"}},r.a.createElement(_e.a,{style:{float:"right"},icon:"refresh",circular:!0,basic:!0,onClick:ut}),r.a.createElement(v.a,{size:"small"},"Damaged Material"),r.a.createElement(Qe,{types:a,value:z,changeFilter:function(e){T(e.id)}}),r.a.createElement(Ut.b,{width:700,height:300,style:{marginLeft:"auto",marginRight:"auto"},data:O},r.a.createElement(Ut.c,{strokeDasharray:"3 3"}),r.a.createElement(Ut.f,{dataKey:"material_name"}),r.a.createElement(Ut.g,null),r.a.createElement(Ut.e,null),r.a.createElement(Ut.d,null),r.a.createElement(Ut.a,{dataKey:"nr_damages",fill:"#c46b5e"}))),r.a.createElement("div",{style:{marginTop:"6.8%"}},r.a.createElement(_e.a,{style:{float:"right"},icon:"refresh",circular:!0,basic:!0,onClick:dt}),r.a.createElement(v.a,{size:"small"},"Number of Requested Hours Per Type"),r.a.createElement(Ut.b,{width:700,height:300,style:{marginLeft:"auto",marginRight:"auto"},data:A},r.a.createElement(Ut.c,{strokeDasharray:"3 3"}),r.a.createElement(Ut.f,{dataKey:"type_name"}),r.a.createElement(Ut.g,null),r.a.createElement(Ut.e,null),r.a.createElement(Ut.d,null),r.a.createElement(Ut.a,{dataKey:"hours",fill:"#c46b5e"}))),r.a.createElement("div",{style:{marginTop:"5%"}},r.a.createElement(_e.a,{style:{float:"right"},icon:"refresh",circular:!0,basic:!0,onClick:ft}),r.a.createElement(v.a,{size:"small"},"Number of Requested Hours Per Material"),r.a.createElement(Qe,{types:a,value:Y,changeFilter:function(e){J(e.id)}}),r.a.createElement(Ut.b,{width:700,height:300,style:{marginLeft:"auto",marginRight:"auto"},data:B},r.a.createElement(Ut.c,{strokeDasharray:"3 3"}),r.a.createElement(Ut.f,{dataKey:"material_name"}),r.a.createElement(Ut.g,null),r.a.createElement(Ut.e,null),r.a.createElement(Ut.d,null),r.a.createElement(Ut.a,{dataKey:"hours",fill:"#c46b5e"}))),r.a.createElement("div",{style:{marginTop:"5%"}},r.a.createElement(_e.a,{style:{float:"right"},icon:"refresh",circular:!0,basic:!0,onClick:ht}),r.a.createElement(v.a,{size:"small"},"Requests Per Type By Day"),r.a.createElement(_e.a,{content:"Reset",floated:"right",onClick:function(){ge(""),fe(""),oe("all")}}),r.a.createElement(Qe,{types:a,value:ie,changeFilter:function(e){oe(e.id)}}),"From: ",r.a.createElement(st,{setDay:function(e){return fe(e)},date:de}),"To: ",r.a.createElement(st,{setDay:function(e){return ge(e)},date:be}),r.a.createElement(Ut.b,{width:700,height:300,style:{marginLeft:"auto",marginRight:"auto"},data:U},r.a.createElement(Ut.c,{strokeDasharray:"3 3"}),r.a.createElement(Ut.f,{dataKey:"material_name"}),r.a.createElement(Ut.g,null),r.a.createElement(Ut.e,null),r.a.createElement(Ut.d,null),r.a.createElement(Ut.a,{dataKey:"nr_requests",fill:"#c46b5e"}))),r.a.createElement("div",{style:{marginTop:"5%"}},r.a.createElement(_e.a,{style:{float:"right"},icon:"refresh",circular:!0,basic:!0,onClick:pt}),r.a.createElement(v.a,{size:"small"},"Requests Per Type By Month"),r.a.createElement(_e.a,{content:"Reset",floated:"right",onClick:function(){Le(""),Re(""),Te("all")}}),r.a.createElement(Qe,{types:a,value:ze,changeFilter:function(e){Te(e.id)}}),"From: ",r.a.createElement(Qt,{setMonth:function(e){return Re(e)},date:xe}),"To: ",r.a.createElement(Qt,{setMonth:function(e){return Le(e)},date:Ae}),r.a.createElement(Ut.b,{width:700,height:300,style:{marginLeft:"auto",marginRight:"auto"},data:Oe},r.a.createElement(Ut.c,{strokeDasharray:"3 3"}),r.a.createElement(Ut.f,{dataKey:"material_name"}),r.a.createElement(Ut.g,null),r.a.createElement(Ut.e,null),r.a.createElement(Ut.d,null),r.a.createElement(Ut.a,{dataKey:"nr_requests",fill:"#c46b5e"}))),r.a.createElement("div",{style:{marginTop:"5%"}},r.a.createElement(_e.a,{style:{float:"right"},icon:"refresh",circular:!0,basic:!0,onClick:Et}),r.a.createElement(v.a,{size:"small"},"Requests Per Type By Year"),r.a.createElement(_e.a,{content:"Reset",floated:"right",onClick:function(){et(""),Ve(""),Ke("all")}}),r.a.createElement(Qe,{types:a,value:Je,changeFilter:function(e){Ke(e.id)}}),"From: ",r.a.createElement(Vt,{setYear:function(e){return Ve(e)},date:Ge}),"To: ",r.a.createElement(Vt,{setYear:function(e){return et(e)},date:Ze}),r.a.createElement(Ut.b,{width:700,height:300,style:{marginLeft:"auto",marginRight:"auto"},data:He},r.a.createElement(Ut.c,{strokeDasharray:"3 3"}),r.a.createElement(Ut.f,{dataKey:"material_name"}),r.a.createElement(Ut.g,null),r.a.createElement(Ut.e,null),r.a.createElement(Ut.d,null),r.a.createElement(Ut.a,{dataKey:"nr_requests",fill:"#c46b5e"}))))},Xt={token:void 0},Zt=Object(n.createContext)(Xt),ea=a(480),ta=a.n(ea);var aa=function(e){var t=Object(n.useState)(s()),a=Object(h.a)(t,2),c=a[0],l=a[1],i=new oe.a.Agent({cert:ta.a,rejectUnauthorized:!1});function o(e,t){return u.apply(this,arguments)}function u(){return(u=Object(Ce.a)(ke.a.mark((function e(t,a){var n,r,c,l,o,u;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se.a.post(O,{},{auth:{username:t,password:a},httpsAgent:i}).catch((function(e){return je(e.response),null}));case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return");case 5:return r=n.data.token,e.next=8,se.a.get(M.replace(":id",t),{headers:{Authorization:"Bearer "+r}}).catch((function(e){return je(e.response),null}));case 8:if(c=e.sent){e.next=11;break}return e.abrupt("return");case 11:return l=c.data,e.next=14,se.a.get(A.replace(":id",t)).catch((function(e){return je(e.response),null}));case 14:if(o=e.sent){e.next=17;break}return e.abrupt("return");case 17:if(!(u=o.data.roles).find((function(e){return"student"==e.name}))){e.next=20;break}return e.abrupt("return",Object(pe.toast)({type:"error",title:"Forbidden Access",description:"Students can\xb4t login in WebApp",time:2e3,size:"mini"}));case 20:return l.roles=u,e.next=23,localStorage.setItem("userinfo",JSON.stringify(l));case 23:return e.abrupt("return",localStorage.setItem("token",r));case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function s(){return null!=localStorage.getItem("token")}return r.a.createElement(d.d,null,r.a.createElement(d.b,{exact:!0,path:"/login"},c?r.a.createElement(d.a,{to:"/auth/roles"}):r.a.createElement(Ae,{login:o,onLogin:function(){l(s())}})),r.a.createElement(d.b,null,c?r.a.createElement(Zt.Provider,{value:{token:localStorage.getItem("token"),login:o,checkLoggedIn:s}},e.children):r.a.createElement(d.a,{to:"/login"})))},na=function(e){Object(s.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).handleLogin=function(){e.setState({isLoggedIn:e.context.checkLoggedIn()})},e}return Object(u.a)(a,[{key:"render",value:function(){!this.state||this.state.isLoggedIn;return r.a.createElement(d.c,{history:Object(f.a)()},r.a.createElement(d.d,null,r.a.createElement(p,{exact:!0,path:"/",render:function(e){return r.a.createElement(Oe,e)}}),r.a.createElement(p,{exact:!0,path:"/login",render:function(){return r.a.createElement(aa,null)}}),r.a.createElement(p,{path:"/auth/roles",render:function(e){return r.a.createElement(Be,e)}}),r.a.createElement(p,{role:"staff",exact:!0,path:"/auth/staff",render:function(e){return r.a.createElement(He,null,r.a.createElement(ot,e)," ")}}),r.a.createElement(p,{role:"staff",exact:!0,path:"/auth/staff/material",render:function(e){return r.a.createElement(He,null,r.a.createElement(Xe,e)," ")}}),r.a.createElement(p,{role:"staff",exact:!0,path:"/auth/staff/material/:id",render:function(e){return r.a.createElement(He,null,r.a.createElement(at,e)," ")}}),r.a.createElement(p,{role:"staff",exact:!0,path:"/auth/staff/request",render:function(e){return r.a.createElement(He,null,r.a.createElement(dt,e)," ")}}),r.a.createElement(p,{role:"staff",exact:!0,path:"/auth/staff/request/:id",render:function(e){return r.a.createElement(He,null,r.a.createElement(Et,e)," ")}}),r.a.createElement(p,{role:"staff",exact:!0,path:"/auth/staff/newrequest/material",render:function(e){return r.a.createElement(He,null,r.a.createElement(bt,e)," ")}}),r.a.createElement(p,{role:"staff",path:"/auth/staff/newrequest/material/checkout",render:function(e){return r.a.createElement(He,null,r.a.createElement(yt,Object.assign({},e,{newRequest:!0}))," ")}}),r.a.createElement(p,{role:"staff",exact:!0,path:"/auth/staff/request/:id/material",render:function(e){return r.a.createElement(He,null,r.a.createElement(bt,e)," ")}}),r.a.createElement(p,{role:"staff",path:"/auth/staff/request/:id/material/checkout",render:function(e){return r.a.createElement(He,null,r.a.createElement(yt,e)," ")}}),r.a.createElement(p,{role:"staff",path:"/auth/staff/material/:id/report",render:function(e){return r.a.createElement(He,null,r.a.createElement(Ot,e)," ")}}),r.a.createElement(p,{role:"administrator",exact:!0,path:"/auth/admin",render:function(e){return r.a.createElement(Pe,null,r.a.createElement(Wt,{role:"Administrator"})," ")}}),r.a.createElement(p,{role:"administrator",exact:!0,path:"/auth/admin/usersroles",render:function(e){return r.a.createElement(Pe,null,r.a.createElement(kt,e)," ")}}),r.a.createElement(p,{role:"administrator",path:"/auth/admin/usersroles/:id",render:function(e){return r.a.createElement(Pe,null,r.a.createElement(Ct,e)," ")}}),r.a.createElement(p,{role:"administrator",exact:!0,path:"/auth/admin/areas",render:function(e){return r.a.createElement(Pe,null,r.a.createElement(zt,e)," ")}}),r.a.createElement(p,{role:"administrator",path:"/auth/admin/areas/:id/course",render:function(e){return r.a.createElement(Pe,null,r.a.createElement(Jt,e)," ")}}),r.a.createElement(p,{role:"administrator",path:"/auth/admin/statistics",render:function(e){return r.a.createElement(Pe,null,r.a.createElement($t,null)," ")}}),r.a.createElement(p,{role:"teacher",exact:!0,path:"/auth/teacher",render:function(e){return r.a.createElement(Je,null,r.a.createElement(Wt,{role:"Teacher"})," ")}}),r.a.createElement(p,{role:"teacher",exact:!0,path:"/auth/teacher/material",render:function(e){return r.a.createElement(Je,null,r.a.createElement(Xe,e)," ")}}),r.a.createElement(p,{role:"teacher",path:"/auth/teacher/material/:id",render:function(e){return r.a.createElement(Je,null,r.a.createElement(at,e)," ")}}),r.a.createElement(p,{role:"teacher",exact:!0,path:"/auth/teacher/reservation",render:function(e){return r.a.createElement(Je,null,r.a.createElement(xt,e)," ")}}),r.a.createElement(p,{role:"teacher",exact:!0,path:"/auth/teacher/reservation/:id",render:function(e){return r.a.createElement(Je,null,r.a.createElement(Rt,e)," ")}}),r.a.createElement(p,{role:"teacher",exact:!0,path:"/auth/teacher/newreservation/types",render:function(e){return r.a.createElement(Je,null,r.a.createElement(Tt,e)," ")}}),r.a.createElement(p,{role:"teacher",path:"/auth/teacher/newreservation/types/checkout",render:function(e){return r.a.createElement(Je,null,r.a.createElement(_t,Object.assign({},e,{newReservation:!0}))," ")}}),r.a.createElement(p,{role:"technician",exact:!0,path:"/auth/tech",render:function(e){return r.a.createElement(Ye,null,r.a.createElement(Wt,{role:"Technician"})," ")}}),r.a.createElement(p,{role:"technician",exact:!0,path:"/auth/tech/damages",render:function(e){return r.a.createElement(Ye,null,r.a.createElement(Dt,e)," ")}}),r.a.createElement(p,{role:"technician",path:"/auth/tech/damages/:id",render:function(e){return r.a.createElement(Ye,null,r.a.createElement(Nt,e)," ")}}),r.a.createElement(p,{role:"technician",exact:!0,path:"/auth/tech/history",render:function(e){return r.a.createElement(Ye,null,r.a.createElement(Ht,e)," ")}}),r.a.createElement(p,{role:"technician",path:"/auth/tech/history/:id",render:function(e){return r.a.createElement(Ye,null,r.a.createElement(Bt,e)," ")}}),r.a.createElement(p,{role:"labmanager",exact:!0,path:"/auth/labmanager",render:function(e){return r.a.createElement(Ke,null,r.a.createElement(Wt,{role:"Laboratory Responsible"})," ")}}),r.a.createElement(p,{role:"labmanager",exact:!0,path:"/auth/labmanager/statistics",render:function(e){return r.a.createElement(Ke,null,r.a.createElement($t,null)," ")}}),r.a.createElement(p,{role:"labmanager",exact:!0,path:"/auth/labmanager/material",render:function(e){return r.a.createElement(Ke,null,r.a.createElement(Ft,e)," ")}}),r.a.createElement(p,{role:"labmanager",exact:!0,path:"/auth/labmanager/type",render:function(e){return r.a.createElement(Ke,null,r.a.createElement(Kt,e)," ")}}),r.a.createElement(p,{role:"labmanager",path:"/auth/labmanager/material/:id",render:function(e){return r.a.createElement(Ke,null,r.a.createElement(at,e)," ")}}),r.a.createElement(p,{role:"labmanager",path:"/auth/labmanager/addmaterial",render:function(e){return r.a.createElement(Ke,null,r.a.createElement(Pt,e)," ")}}),r.a.createElement(p,{role:"labmanager",path:"/auth/labmanager/addtype",render:function(e){return r.a.createElement(Ke,null,r.a.createElement(Yt,e)," ")}}),r.a.createElement(d.b,{path:"*",render:function(){return r.a.createElement(ge,{home:!0})}})))}}]),a}(n.Component);na.contextType=Zt;var ra=na;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(i.a,null,r.a.createElement(aa,null,r.a.createElement(ra,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[523,1,2]]]);