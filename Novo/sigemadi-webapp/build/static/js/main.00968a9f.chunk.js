(this["webpackJsonpsigemadi-webapp"]=this["webpackJsonpsigemadi-webapp"]||[]).push([[0],{140:function(e,t,a){e.exports=a.p+"static/media/Desintegrating_html.b03b05a2.png"},428:function(e,t,a){e.exports=a.p+"static/media/iselSigemadi.6601043a.png"},455:function(e,t,a){e.exports=a.p+"static/media/helen.1d77af03.jpg"},457:function(e,t,a){e.exports=a.p+"static/media/matthew.046e91f7.png"},502:function(e,t,a){e.exports=a(804)},697:function(e,t,a){},73:function(e,t,a){e.exports=a.p+"static/media/SigemadiLogo.a1773ca5.png"},731:function(e,t,a){e.exports=a.p+"static/media/molly.45fdd648.png"},74:function(e,t,a){e.exports=a.p+"static/media/IselAdeetcLogo.bf8ea183.png"},804:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(71),l=a.n(c),i=a(27),o=a(37),u=a(54),s=a(24),m=a(8),d=a(428),f=a.n(d),p=a(244),h=a(857),E=a(853),b=a(850),g=a(811),v=a(121),y=a(224),j=a(145),O="http://10.62.73.30:8085/sigemadi/api",S="".concat(O,"/scientificareas"),C="".concat(O,"/scientificareas/:id"),k="".concat(O,"/subjects"),z="".concat(O,"/subjects/:id"),I="".concat(O,"/scientificareas/:sciAreaId/subjects"),_="".concat(O,"/types"),w="".concat(O,"/types/:id"),T="".concat(O,"/scientificareas/:sciAreaId/types"),x="".concat(O,"/scientificareas/:sciAreaId/types/:id"),q="".concat(O,"/materials"),D="".concat(O,"/materials/:id"),R="".concat(O,"/roles"),M="".concat(O,"/users/:id/roles"),A="".concat(O,"/users/:id"),N="".concat(O,"/users"),B="".concat(O,"/damages?solved=:flag"),L="".concat(O,"/damagesstates"),H="".concat(O,"/damages/:id"),F="".concat(O,"/requests"),P="".concat(O,"/requests/:id"),Y="".concat(O,"/users/:id/requests"),J="".concat(O,"/requests/:id/materials"),K="".concat(O,"/requests/:reqId/materials/:id"),W="".concat(O,"/users/:id/reservations"),U="".concat(O,"/reservations"),Q="".concat(O,"/reservations/:id"),V="".concat(O,"/materials/:id/damages"),G="".concat(O,"/requests/:reqId/materials/:id"),$="".concat(O,"/statistics/toptenmostusedmaterialtypes"),X="".concat(O,"/statistics/toptenmostusedmaterials"),Z="".concat(O,"/statistics/damagespertype"),ee="".concat(O,"/statistics/damagedmaterials"),te="".concat(O,"/statistics/averagetimetorepair"),ae="".concat(O,"/statistics/numberofrequestedhourspertype"),ne="".concat(O,"/statistics/numberofrequestedhourspermaterial"),re="".concat(O,"/statistics/requestspertypebyday"),ce="".concat(O,"/statistics/requestspertypebymonth"),le="".concat(O,"/statistics/requestspertypebyyear"),ie=a(11),oe=a.n(ie),ue=a(17),se=(a(695),a(140)),me=a.n(se),de=function(e){var t=e.home;return r.a.createElement("div",{style:{backgroundImage:"url(".concat(me.a,")"),backgroundSize:"cover",height:"100vh",width:"100vw"}},t?r.a.createElement(E.a,{style:{display:"flex"}},r.a.createElement(i.b,{to:"/"},"Go to Home")):null,r.a.createElement(E.a,{size:"huge",style:{display:"flex",marginTop:"10%"}},"404"),r.a.createElement(E.a,{size:"huge",style:{display:"flex"}},"Page Not Found!"))},fe=function(){return r.a.createElement("div",{style:{backgroundImage:"url(".concat(me.a,")"),backgroundSize:"cover",height:"100vh",width:"100vw"}},r.a.createElement(E.a,{size:"huge",style:{display:"flex",marginTop:"10%"}},"500"),r.a.createElement(E.a,{size:"huge",style:{display:"flex"}},"Internal Server Error!"))},pe=function(){return r.a.createElement("div",{style:{backgroundImage:"url(".concat(me.a,")"),backgroundSize:"cover",height:"100vh",width:"100vw"}},r.a.createElement(E.a,{size:"huge",style:{display:"flex",marginTop:"10%"}},"400"),r.a.createElement(E.a,{size:"huge",style:{display:"flex"}},"Bad Request!"))},he=function(e){if(void 0===e)return Object(ue.toast)({type:"error",title:"Something Went Wrong",time:2e3,size:"mini",description:"Something went wrong, please try again later!"}),r.a.createElement(fe,null);if(201==e.status||200==e.status)Object(ue.toast)({type:"success",title:"Success",time:2e3,size:"mini",description:e.data.status,status:e.status});else{if(Object(ue.toast)({type:"error",title:e.data.title||"Something Went Wrong",time:2e3,size:"mini",description:e.data.detail||"Something went wrong, please try again later!",status:e.data.status}),400==e.status)return r.a.createElement(pe,null);if(404==e.status)return r.a.createElement(de,null);if(500==e.status||504==e.status)return r.a.createElement(fe,null)}},Ee=new p.a;var be=function(e){var t=Object(n.useState)(!1),a=Object(m.a)(t,2),c=a[0],l=a[1];function i(){l(!1)}return Object(n.useEffect)((function(){Ee.remove("request"),sessionStorage.removeItem("userinfo"),localStorage.clear()}),[]),r.a.createElement("div",null,r.a.createElement(ue.SemanticToastContainer,null),r.a.createElement(h.a,{trigger:r.a.createElement(E.a,{floated:"right",style:{cursor:"pointer",color:"#a22717"},onClick:function(){l(!0)},content:"Login"}),open:c,basic:!0,dimmer:"blurring",onClose:i,size:"large"},r.a.createElement(h.a.Content,null,r.a.createElement(b.a,{onSubmit:function(){i();var t=document.getElementById("number").value;document.getElementById("password").value,oe.a.get(A.replace(":id",t)).then((function(a){oe.a.get(M.replace(":id",t)).then((function(t){sessionStorage.setItem("userinfo",JSON.stringify(Object(s.a)({roles:t.data.roles},a.data))),e.history.push("/auth/roles")})).catch((function(e){return he(e.response)}))})).catch((function(e){return he(e.response)}))}},r.a.createElement(b.a.Field,null,"Number",r.a.createElement(g.a,{size:"large",id:"number",placeholder:"Identification Number"})),r.a.createElement(b.a.Field,{type:"password"},"Password",r.a.createElement(g.a,{type:"password",size:"large",id:"password",placeholder:"Password"})),r.a.createElement(v.a,{size:"large",type:"submit"},"Submit"))),r.a.createElement(h.a.Actions,null,r.a.createElement(y.a,{fluid:!0},r.a.createElement(v.a,{basic:!0,color:"red",size:"large",onClick:i,content:"Cancel",inverted:!0})))),r.a.createElement(E.a,{size:"huge"},"SiGeMaDi"),r.a.createElement(j.a,{className:"ui fluid centered image",src:f.a,style:{marginTop:"5%"}}))},ge=a(852),ve=a(851),ye=a(52);var je=function(e){var t=Object(n.useState)([]),a=Object(m.a)(t,2),c=a[0],l=a[1],o=[{name:"administrator",value:r.a.createElement(E.a,{size:"medium",key:"admin"},r.a.createElement(i.b,{to:"/auth/admin",onClick:function(){return u("administrator")}},"Administrator"))},{name:"lab_responsible",value:r.a.createElement(E.a,{size:"medium",key:"resp"},r.a.createElement(i.b,{to:"/auth/labmanager",onClick:function(){return u("lab_responsible")}},"Laboratory Responsible"))},{name:"teacher",value:r.a.createElement(E.a,{size:"medium",key:"doc"},r.a.createElement(i.b,{to:"/auth/teacher",onClick:function(){return u("teacher")}},"Teacher"))},{name:"technician",value:r.a.createElement(E.a,{size:"medium",key:"tecn"},r.a.createElement(i.b,{to:"/auth/tech",onClick:function(){return u("technician")}},"Technician"))},{name:"staff",value:r.a.createElement(E.a,{size:"medium",key:"func"},r.a.createElement(i.b,{to:"/auth/staff",onClick:function(){return u("staff")}},"Staff"))}];function u(e){var t=JSON.parse(sessionStorage.getItem("userinfo"));t.selectedRole=e,sessionStorage.removeItem("userinfo"),sessionStorage.setItem("userinfo",JSON.stringify(t))}return Object(n.useEffect)((function(){var t=JSON.parse(sessionStorage.getItem("userinfo")),a=[];t.roles.map((function(e){return"student"!=e.name?a.push(o.find((function(t){return t.name===e.name})).value):null})),0==a.length&&(Object(ue.toast)({type:"error",title:"Something Went Wrong",time:2e3,size:"mini",description:"Student users can\xb4t login!"}),setTimeout((function(){return e.history.push("")}),3e3)),l(a)}),[]),r.a.createElement("div",null,r.a.createElement(E.a,{size:"medium"},"Choose a Role:"),r.a.createElement(ue.SemanticToastContainer,null),r.a.createElement(ge.a,null),0==c.length?r.a.createElement(ve.a,null,"Loading...",r.a.createElement(ye.a,{name:"circle notched",loading:!0})):c)},Oe=a(73),Se=a.n(Oe),Ce=a(74),ke=a.n(Ce),ze=function(e){var t=e.children,a={display:"inline-block",margin:10,marginBottom:30};return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(E.a,{size:"medium",style:a},r.a.createElement(i.b,{to:"/auth/staff",className:"link"}," Home ",r.a.createElement(ye.a,{size:"small",name:"home"}))),r.a.createElement(E.a,{size:"medium",style:a},r.a.createElement(i.b,{to:{pathname:"/auth/staff/material"},className:"link"},"Material ",r.a.createElement(ye.a,{size:"small",name:"microchip"}))),r.a.createElement(E.a,{size:"medium",style:a},r.a.createElement(i.b,{to:"/auth/staff/request",className:"link"},"Request ",r.a.createElement(ye.a,{size:"small",name:"clipboard list"}))),r.a.createElement(E.a,{size:"medium",style:a},r.a.createElement(i.b,{to:"/",className:"link"},"Logout")),r.a.createElement(j.a,{src:Se.a,style:{width:"8%",height:"8%"},floated:"right"}),r.a.createElement(j.a,{src:ke.a,size:"small",floated:"left"})),r.a.createElement("div",{style:{marginTop:"7%"}},t))},Ie=function(e){var t=e.children,a={display:"inline-block",margin:10,marginBottom:30};return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(E.a,{size:"medium",style:a},r.a.createElement(i.b,{to:"/auth/admin",className:"link"},"Home ",r.a.createElement(ye.a,{size:"small",name:"home"}))),r.a.createElement(E.a,{size:"medium",style:a},r.a.createElement(i.b,{to:"/auth/admin/usersroles",className:"link"},"Roles ",r.a.createElement(ye.a,{size:"small",name:"users"}))),r.a.createElement(E.a,{size:"medium",style:a},r.a.createElement(i.b,{to:"/auth/admin/areas",className:"link"},"Scientific Areas ",r.a.createElement(ye.a,{size:"small",name:"graduation"}))),r.a.createElement(E.a,{size:"medium",style:a},r.a.createElement(i.b,{to:"/auth/admin/statistics",className:"link"},"Statistics ",r.a.createElement(ye.a,{size:"small",name:"line graph"}))),r.a.createElement(E.a,{size:"medium",style:a},r.a.createElement(i.b,{to:"/",className:"link"},"Logout")),r.a.createElement(j.a,{src:Se.a,style:{width:"8%",height:"8%"},floated:"right"}),r.a.createElement(j.a,{src:ke.a,size:"small",floated:"left"})),r.a.createElement("div",{style:{marginTop:"7%"}},t))},_e=function(e){var t=e.children,a={display:"inline-block",margin:10,marginBottom:30};return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(E.a,{size:"medium",style:a},r.a.createElement(i.b,{to:"/auth/tech",className:"link"},"Home ",r.a.createElement(ye.a,{size:"small",name:"home"}))),r.a.createElement(E.a,{size:"medium",style:a},r.a.createElement(i.b,{to:"/auth/tech/damages",className:"link"},"Material ",r.a.createElement(ye.a,{size:"small",name:"bug"}))),r.a.createElement(E.a,{size:"medium",style:a},r.a.createElement(i.b,{to:"/auth/tech/history",className:"link"},"History ",r.a.createElement(ye.a,{size:"small",name:"history"}))),r.a.createElement(E.a,{size:"medium",style:a},r.a.createElement(i.b,{to:"/",className:"link"},"Logout")),r.a.createElement(j.a,{src:Se.a,style:{width:"8%",height:"8%"},floated:"right"}),r.a.createElement(j.a,{src:ke.a,size:"small",floated:"left"})),r.a.createElement("div",{style:{marginTop:"7%"}},t))},we=function(e){var t=e.children,a={display:"inline-block",margin:10,marginBottom:30};return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(E.a,{size:"medium",style:a},r.a.createElement(i.b,{to:"/auth/teacher",className:"link"},"Home ",r.a.createElement(ye.a,{size:"small",name:"home"}))),r.a.createElement(E.a,{size:"medium",style:a},r.a.createElement(i.b,{to:"/auth/teacher/material",className:"link"},"Material ",r.a.createElement(ye.a,{size:"small",name:"microchip"}))),r.a.createElement(E.a,{size:"medium",style:a},r.a.createElement(i.b,{to:"/auth/teacher/reservation",className:"link"},"Reservation ",r.a.createElement(ye.a,{size:"small",name:"file alternate"}))),r.a.createElement(E.a,{size:"medium",style:a},r.a.createElement(i.b,{to:"/",className:"link"},"Logout")),r.a.createElement(j.a,{src:Se.a,style:{width:"8%",height:"8%"},floated:"right"}),r.a.createElement(j.a,{src:ke.a,size:"small",floated:"left"})),r.a.createElement("div",{style:{marginTop:"7%"}},t))},Te=function(e){var t=e.children,a={display:"inline-block",margin:10,marginBottom:30};return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(E.a,{size:"medium",style:a},r.a.createElement(i.b,{to:"/auth/labmanager",className:"link"},"Home ",r.a.createElement(ye.a,{size:"small",name:"home"}))),r.a.createElement(E.a,{size:"medium",style:a},r.a.createElement(i.b,{to:"/auth/labmanager/material",className:"link"},"Material ",r.a.createElement(ye.a,{size:"small",name:"microchip"}))),r.a.createElement(E.a,{size:"medium",style:a},r.a.createElement(i.b,{to:"/auth/labmanager/type",className:"link"},"Material Types ",r.a.createElement(ye.a,{size:"small",name:"tags"}))),r.a.createElement(E.a,{size:"medium",style:a},r.a.createElement(i.b,{to:"/auth/labmanager/statistics",className:"link"},"Statistics ",r.a.createElement(ye.a,{size:"small",name:"line graph"}))),r.a.createElement(E.a,{size:"medium",style:a},r.a.createElement(i.b,{to:"/",className:"link"},"Logout")),r.a.createElement(j.a,{src:Se.a,style:{width:"8%",height:"8%"},floated:"right"}),r.a.createElement(j.a,{src:ke.a,size:"small",floated:"left"})),r.a.createElement("div",{style:{marginTop:"7%"}},t))},xe=(a(697),a(35)),qe=a(444),De=a(241),Re=function(e){var t=function(t){var a={type:e.name,id:t.target.value};e.changeFilter(a)};return r.a.createElement("div",null,r.a.createElement("div",null,e.title?r.a.createElement("label",{style:{margin:10}},"Filter by ",e.title,":"):null,r.a.createElement("select",{value:e.value,onChange:t},e.optionAll?r.a.createElement("option",{value:"all",key:"all"},"All"):null,e.types.map((function(e){return r.a.createElement("option",{value:e.id,key:e.id},e.name)})))))},Me=["sci_area","subject","type"];var Ae=function(e){var t=Object(n.useState)([]),a=Object(m.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)([]),o=Object(m.a)(i,2),u=o[0],d=o[1],f=Object(n.useState)([]),p=Object(m.a)(f,2),h=p[0],E=p[1],b=Object(n.useState)([]),g=Object(m.a)(b,2),y=g[0],j=g[1],O=Object(n.useState)(!1),I=Object(m.a)(O,2),T=I[0],x=I[1],q=Object(n.useState)("collapse"),D=Object(m.a)(q,2),R=D[0],M=D[1],A=Object(n.useState)(null),N=Object(m.a)(A,2),B=N[0],L=N[1];function H(e){oe.a.get(S).then((function(t){oe.a.get(k).then((function(a){oe.a.get(_).then((function(n){E(t.data.sci_areas),d(a.data.subjects),l(n.data.types),e&&x(!0)})).catch((function(e){return L(he(e.response))}))})).catch((function(e){return L(he(e.response))}))})).catch((function(e){return L(he(e.response))}))}function F(t){var a=t[t.length-1],n=y.find((function(e){return"sci_area"==e.type})),r=y.find((function(e){return"type"==e.type})),i=y.find((function(e){return"subject"==e.type}));"sci_area"===a.type?function(t,a,n,r){oe.a.get(C.replace(":id",t.id)).then((function(t){var i=Y(t.data.subjects,u),o=Y(t.data.types,c);void 0!=n&&0==(o=Y(o,[n])).length&&(o=[n]),void 0!=a&&0==(i=Y(i,[a])).length&&(i=[a]),1==T&&(e.setFilters(P(Object(xe.a)(r))),x(!1)),d(i),l(o)})).catch((function(e){return L(he(e.response))}))}(a,i,r,t):"subject"===a.type?function(t,a,n,r){oe.a.get(z.replace(":id",t.id)).then((function(t){var c=t.data.sci_area.id;void 0!=a&&(c=a.id),oe.a.get(C.replace(":id",c)).then((function(c){var i=Y([t.data.sci_area],h),o=Y(t.data.types,c.data.types);1==T&&(e.setFilters(P(Object(xe.a)(r))),x(!1)),void 0!=a&&0==(i=Y(i,[a])).length&&(i=[a]),void 0!=n&&0==(o=Y(o,[n])).length&&(o=[n]),E(i),l(o)})).catch((function(e){return L(he(e.response))}))})).catch((function(e){return L(he(e.response))}))}(a,n,r,t):"type"===a.type&&function(t,a,n,r){oe.a.get(w.replace(":id",t.id)).then((function(i){var o=Y([i.data.sci_area],h),s=Y(i.data.subjects,u),m=c,f=i.data.sci_area.id;void 0!=a&&(f=a.id),oe.a.get(C.replace(":id",f)).then((function(c){s=Y(c.data.subjects,s),void 0!=n?oe.a.get(z.replace(":id",n.id)).then((function(e){0==(m=Y(e.data.types,m)).length&&(m=[t]),l(m)})):l(m),1==T&&(e.setFilters(P(Object(xe.a)(r))),x(!1)),void 0!=a&&(0==(o=Y(o,[a])).length&&(o=[a]),0==(m=Y(c.data.types,m)).length&&(m=[t])),void 0!=n&&0==(s=Y(s,[n])).length&&(s=[n]),E(o),d(s)})).catch((function(e){return L(he(e.response))}))})).catch((function(e){return L(he(e.response))}))}(a,n,i,t)}function P(e){var t="?";return(e=e.sort((function(e,t){return Me.indexOf(e.type)-Me.indexOf(t.type)}))).map((function(e,a){t+="".concat(e.type,"=").concat(e.id),a+1!=y.length&&(t+="&")})),t}function Y(e,t){return e.filter((function(e){return void 0!=t.find((function(t){return t.id==e.id}))}))}function J(e){"all"!=e.id&&(!function(e){M("visible");var t=y,a=t.findIndex((function(t){return t.type===e.type}));a>-1?t[a]=e:t.push(e);j(t)}(e),F([e]))}function K(e){var t=y.find((function(t){return t.type===e}));return void 0!=t?t.id:"all"}Object(n.useEffect)((function(){if(e.location&&e.location.search){var t=new URLSearchParams(e.location.search).entries(),a=t.next(),n=[];do{n.push({type:a.value[0],id:a.value[1]}),a=t.next()}while(!a.done);j(n),M("visible"),H(!0)}else H(),e.setFilters()}),[]),Object(n.useEffect)((function(){!0===T&&F(y)}),[T]);var W={display:"inline-block",margin:10,marginBottom:30};return r.a.createElement("div",null,B||r.a.createElement("div",null,r.a.createElement("div",{style:W},r.a.createElement(Re,{changeFilter:J,name:"sci_area",title:"Scientific Areas",types:h,value:K("sci_area"),optionAll:"all"==K("sci_area")})),r.a.createElement("div",{style:W},r.a.createElement(Re,{changeFilter:J,name:"subject",title:"Subjects",types:u,value:K("subject"),optionAll:"all"==K("subject")})),r.a.createElement("div",{style:W},r.a.createElement(Re,{changeFilter:J,name:"type",title:"Material Types",types:c,value:K("type"),optionAll:"all"==K("type")})),r.a.createElement(v.a,{basic:!0,size:"small",content:"Filter",icon:"filter",onClick:function(t){if(t.preventDefault(),y.length>0){var a=P(y);e.updateUrl&&e.history.push({pathname:e.location.pathname,search:a}),e.setFilters(a)}}}),r.a.createElement(v.a,{basic:!0,size:"small",content:"Reset",icon:"filter",id:"reset_filter",onClick:function(t){t.preventDefault(),M("hidden"),e.history.push(e.location.pathname),H(),j([]),e.setFilters()},style:Object(s.a)(Object(s.a)({},W),{},{visibility:R})})))};var Ne=function(e){var t=Object(n.useRef)(),a=Object(n.useState)(!1),c=Object(m.a)(a,2),l=c[0],i=c[1],o=Object(n.useState)(null),u=Object(m.a)(o,2),s=u[0],d=u[1],f=Object(n.useState)(0),p=Object(m.a)(f,2),h=p[0],b=p[1],g=Object(n.useState)(!0),j=Object(m.a)(g,2),O=j[0],S=j[1],C=Object(n.useState)(null),k=Object(m.a)(C,2),z=k[0],I=k[1],_=Object(n.useState)([]),w=Object(m.a)(_,2),T=w[0],x=w[1],D=Object(n.useState)(null),R=Object(m.a)(D,2),M=R[0],A=R[1];Object(n.useEffect)((function(){return B.observe(t.current),function(){B.disconnect()}}),[]);var N={root:document.querySelector("#material"),rootMargin:"5px",threshold:1},B=new IntersectionObserver((function(e){var t=e[0].intersectionRatio;d(t)}),N);function L(e,t,a){var n=e;n?n+="&":n="?",n+="page=".concat(t),oe.a.get(q+n).then((function(t){var n=t.data.materials;if(0===n.length&&0===a.length)return Object(ue.toast)({type:"error",title:"Something went wrong",time:2e3,size:"mini",description:"There are no results for the specified parameters"});0===n.length&&S(!1);var r=a;r.push.apply(r,Object(xe.a)(n)),x(r),i(!1),A(e)})).catch((function(e){return I(he(e.response))}))}return Object(n.useEffect)((function(){if(s>=0&&O&&null!=M&&!l){var e=h+1;b(e),i(!0),L(M,e,T)}}),[s]),r.a.createElement("div",null,r.a.createElement(ue.SemanticToastContainer,null),z||r.a.createElement("div",null,r.a.createElement(E.a,null,"Material:"),r.a.createElement(Ae,Object.assign({},e,{setFilters:function(e){e||(e=""),b(1),x([]),S(!0),i(!0),L(e,1,[])},updateUrl:!0})),r.a.createElement(ge.a,null),r.a.createElement("div",null,r.a.createElement(qe.a,{columns:3,id:"material",style:{height:30,margin:6,padding:8}},T.map((function(t){return r.a.createElement(qe.a.Column,{key:t.name},r.a.createElement(De.a,{centered:!0},r.a.createElement(De.a.Header,null,t.name),r.a.createElement(De.a.Description,null,t.id),r.a.createElement(De.a.Content,{extra:!0},r.a.createElement(y.a,{fluid:!0},r.a.createElement(v.a,{content:"Details",icon:"microchip",onClick:function(){return e.history.push(e.location.pathname+"/"+t.id)}}),t.can_be_reported&&"staff"===JSON.parse(sessionStorage.getItem("userinfo")).selectedRole?r.a.createElement(v.a,{content:"Report",icon:"bug",color:"red",onClick:function(){return e.history.push(e.location.pathname+"/".concat(t.id,"/report"))}}):null))))})),r.a.createElement("div",{ref:t}),l?r.a.createElement(qe.a.Column,null,r.a.createElement(ve.a,{size:"small"},r.a.createElement(ye.a,{name:"circle notch",loading:!0}),"Loading...")):null))))},Be=a(854),Le=a(99),He=[{title:"Name",value:"name"},{title:"Type",value:"type"},{title:"Scientific Areas",value:"sci_area"},{title:"Subjects",value:"subjects"}];var Fe=function(e){var t=Object(n.useState)({subjects:[]}),a=Object(m.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)(null),o=Object(m.a)(i,2),u=o[0],d=o[1];return Object(n.useEffect)((function(){var t=e.match.params.id;oe.a.get(D.replace(":id",t)).then((function(e){l(Object(s.a)(Object(s.a)({},e.data),{},{id:t}))})).catch((function(e){d(he(e.response))}))}),[]),r.a.createElement("div",null,r.a.createElement(ue.SemanticToastContainer,null),u||(c.name?r.a.createElement("div",null,r.a.createElement(E.a,{size:"medium"},"Material Details"),r.a.createElement(ge.a,null),function(){if(null!==c.state){var e="red";return"available"===c.state&&(e="green"),r.a.createElement(Le.a,{size:"huge",color:e},"State:",r.a.createElement(Le.a.Detail,null,c.state))}}(),r.a.createElement(Be.a,{divided:!0},He.map((function(e){var t,a=c[e.value];return"subjects"===e.value&&(a="00"==c.id.slice(0,2)?"All Subjects":(t=a).map((function(e,a){return a+1===t.length?e:e+", "}))),r.a.createElement(Be.a.Item,{key:e.title},r.a.createElement(Be.a.Content,{floated:"left"},r.a.createElement(Be.a.Header,null,e.title)),r.a.createElement(Be.a.Content,{floated:"right"},r.a.createElement(Be.a.Description,null,a)))}))),c.can_be_reported&&"staff"===JSON.parse(sessionStorage.getItem("userinfo")).selectedRole?r.a.createElement(v.a,{size:"medium",color:"red",style:{marginBottom:"5%"},onClick:function(){return function(){var t=e.location.pathname+"/report";e.history.push(t)}()},icon:"bug",content:"Report Damage"}):null,r.a.createElement(De.a.Group,{itemsPerRow:2,stackable:!0},r.a.createElement(De.a,null,r.a.createElement(De.a.Content,null,r.a.createElement(De.a.Header,null,"Description"),r.a.createElement(ge.a,null),r.a.createElement(De.a.Description,null,r.a.createElement(De.a.Header,{size:"medium"},c.description)))),r.a.createElement(De.a,null,r.a.createElement(De.a.Content,null,r.a.createElement(De.a.Header,null,"More Information"),r.a.createElement(ge.a,null),r.a.createElement(De.a.Description,null))))):r.a.createElement(ve.a,null,"Loading...",r.a.createElement(ye.a,{name:"circle notched",loading:!0}))))},Pe=a(455),Ye=a.n(Pe),Je=a(249),Ke=a.n(Je);var We=function(e){var t=Object(n.useState)({id:null,name:null,roles:[]}),a=Object(m.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)(null),o=Object(m.a)(i,2),u=o[0],d=o[1],f=Object(n.useState)(!1),p=Object(m.a)(f,2),b=p[0],g=p[1];function O(){g(!1)}return Object(n.useEffect)((function(){var e=JSON.parse(sessionStorage.getItem("userinfo"));l(Object(s.a)({},e))}),[]),r.a.createElement("div",null,r.a.createElement(De.a,{centered:!0},r.a.createElement(j.a,{src:Ye.a,wrapped:!0,ui:!1}),r.a.createElement(De.a.Content,null,r.a.createElement(De.a.Header,null,c.name),r.a.createElement(De.a.Description,null,"Active Role: Staff")),r.a.createElement(De.a.Content,{extra:!0},r.a.createElement("a",null,r.a.createElement("p",null,r.a.createElement(ye.a,{name:"users"}),"Role:"),c.roles.map((function(e,t){return t+1===c.roles.length?e.name:e.name+", "}))))),r.a.createElement("div",{style:{marginBottom:"5%"}},r.a.createElement(E.a,null,"Quick Actions:"),r.a.createElement(h.a,{trigger:r.a.createElement(v.a,{onClick:function(){g(!0)},icon:"qrcode",content:"Read QR Code"}),open:b,basic:!0,dimmer:"blurring",onClose:O,size:"small"},r.a.createElement(h.a.Content,null,r.a.createElement(Ke.a,{delay:300,onError:function(e){d(null),console.error(e)},onScan:function(e){e&&d(e)},style:{display:"block",marginLeft:"auto",marginRight:"auto",width:"60%"}}),r.a.createElement(h.a.Header,{style:{textAlign:"center"}},u)),r.a.createElement(h.a.Actions,null,r.a.createElement(y.a,{fluid:!0},r.a.createElement(v.a,{basic:!0,color:"green",onClick:function(){O(),e.history.push(e.location.pathname+"/material/".concat(u))},content:"Confirm",inverted:!0}),r.a.createElement(v.a,{basic:!0,color:"red",onClick:O,content:"Cancel",inverted:!0}))))))},Ue=a(94),Qe=a(95),Ve=a(98),Ge=a(97),$e=a(96),Xe=function(e){Object(Ve.a)(a,e);var t=Object(Ge.a)(a);function a(e){var n;return Object(Ue.a)(this,a),(n=t.call(this,e)).handleChange=function(e,t){t.name;var a=t.value;n.props.setDay&&n.props.setDay(a)},n.state={date:""},n}return Object(Qe.a)(a,[{key:"currentTime",value:function(){var e=new Date,t=String(e.getDate()).padStart(2,"0"),a=String(e.getMonth()+1).padStart(2,"0"),n=e.getFullYear();return e=n+"-"+a+"-"+t}},{key:"render",value:function(){return r.a.createElement(b.a,null,r.a.createElement($e.DateInput,{dateFormat:"YYYY-MM-DD",name:"date",placeholder:"Data",value:this.props.date,iconPosition:"left",popupPosition:"top left",onChange:this.handleChange,maxDate:this.currentTime()}))}}]),a}(n.Component),Ze=[{name:"Active",id:!0},{name:"Old",id:!1}];var et=function(e){var t=Object(n.useRef)(),a=Object(n.useState)([]),c=Object(m.a)(a,2),l=c[0],i=c[1],o=Object(n.useState)(""),u=Object(m.a)(o,2),s=u[0],d=u[1],f=Object(n.useState)(""),p=Object(m.a)(f,2),h=p[0],b=p[1],y=Object(n.useState)("hidden"),O=Object(m.a)(y,2),S=O[0],C=O[1],k=Object(n.useState)({type:"",id:""}),z=Object(m.a)(k,2),I=z[0],_=z[1],w=Object(n.useState)(!1),T=Object(m.a)(w,2),x=T[0],q=T[1],D=Object(n.useState)(null),R=Object(m.a)(D,2),M=R[0],A=R[1],N=Object(n.useState)(0),B=Object(m.a)(N,2),L=B[0],H=B[1],P=Object(n.useState)(!0),J=Object(m.a)(P,2),K=J[0],W=J[1],U=Object(n.useState)(null),Q=Object(m.a)(U,2),V=Q[0],G=Q[1];Object(n.useEffect)((function(){if(e.location&&e.location.search){var a=new URLSearchParams(e.location.search).entries(),n=a.next(),r=[];do{r.push({name:n.value[0],value:n.value[1]}),n=a.next()}while(!n.done);var c=r.find((function(e){return"user"===e.name})),l=r.find((function(e){return"active"===e.name})),i=r.find((function(e){return"date"===e.name})),o="all";void 0!=l&&(o=l.value),_(l={type:"type",id:o}),C("visible"),void 0!=c?(d(c.value),document.getElementById("searchUser").value=c.value):void 0!=i&&b(i.value)}else _({type:"type",id:"all"});return X.observe(t.current),function(){X.disconnect()}}),[]);var $={root:document.querySelector("#requests"),rootMargin:"5px",threshold:1},X=new IntersectionObserver((function(e){var t=e[0].intersectionRatio;A(t)}),$);function Z(t,a,n,r){var c="?user=".concat(t);"all"!=a&&(c+="&active=".concat(a)),e.history.push({pathname:e.location.pathname,search:c}),oe.a.get(Y.replace(":id",t)+"?page=".concat(n)).then((function(e){var t=void 0!=e.data.older&&e.data.older.length>0,n=void 0!=e.data.current;if(("all"===a&&!t&&!n||"true"===a&&!n||"false"===a&&!t)&&0===r.length)return Object(ue.toast)({type:"error",title:"Something went wrong",time:2e3,size:"mini",description:"There are no results for the specified parameters"});if("all"===a){var c=r;c.push.apply(c,Object(xe.a)(e.data.older)),n&&c.push(e.data.current),i(c)}else if("true"===a){var l=r;l.push(e.data.current),i(l)}else{var o=r;o.push.apply(o,Object(xe.a)(e.data.older)),i(o)}q(!1)})).catch((function(e){return G(he(e.response))}))}function ee(t,a,n,r){var c="?";""!=a&&(c+="date=".concat(a)),"all"!=t&&("?"!=c&&(c+="&"),c+="active=".concat(t));var l=c;"?"!=c&&(c+="&"),c+="page=".concat(n),e.history.push({pathname:e.location.pathname,search:l}),oe.a.get(F+c).then((function(e){var t=e.data.requests;if(0===t.length&&0===r.length)return q(!1),i(t),W(!1),Object(ue.toast)({type:"error",title:"Something went wrong",time:2e3,size:"mini",description:"There are no results for the specified parameters"});0===t.length&&W(!1);var a=r;a.push.apply(a,Object(xe.a)(t)),i(a),q(!1)})).catch((function(e){return G(he(e.response))}))}return Object(n.useEffect)((function(){if(M>=0&&K&&""!=I.id&&!x&&!V){var e=L+1;H(e),q(!0),""!=s?Z(s,I.id,e,l):ee(I.id,h,e,l)}}),[M]),r.a.createElement("div",null,r.a.createElement(ue.SemanticToastContainer,null),V||r.a.createElement("div",null,r.a.createElement(E.a,{size:"medium"},"Requests:"),r.a.createElement(v.a,{size:"large",basic:!0,style:{marginBottom:"2%"},onClick:function(){e.history.push("/auth/staff/newrequest/material")},icon:"file alternate",content:"New Request"}),r.a.createElement("div",{style:{display:"block"}},"Filter By Day:",r.a.createElement("div",{style:{display:"inline-block"}},r.a.createElement(Xe,{date:h,setDay:function(e){b(e)}})),r.a.createElement(g.a,{size:"mini",id:"searchUser",onChange:function(e,t){return d(t.value)},type:"text",placeholder:"Introduce student number",icon:"users",style:{float:"right"}}),r.a.createElement("div",{style:{display:"block",marginBottom:"1%",float:"left"}},r.a.createElement(Re,{changeFilter:function(e){"all"!=e.id&&_(e)},name:"type",title:"Type",types:Ze,value:I.id,optionAll:"all"==I.id}))),r.a.createElement("div",{style:{display:"block",marginTop:"2%",marginLeft:"6%"}},r.a.createElement(v.a,{size:"large",basic:!0,content:"Search",icon:"search",onClick:function(){if("all"!=I.id||""!=s||""!=h){H(1),W(!0),q(!0),C("visible"),""!=s?(b(""),Z(s,I.id,1,[])):ee(I.id,h,1,[])}}}),r.a.createElement(v.a,{size:"large",basic:!0,style:{visibility:S},id:"resetbutton",content:"Reset",onClick:function(){e.history.push(e.location.pathname),document.getElementById("searchUser").value="";var t={type:"type",id:"all"};H(1),b(""),W(!0),_(t),d(""),i([]),q(!0),C("hidden"),ee(t.id,"",1,[])}})),r.a.createElement(ge.a,null),r.a.createElement("div",{style:{display:"block"}},r.a.createElement(qe.a,{columns:4,id:"requests",style:{height:30,margin:6,padding:8}},l.map((function(t){return r.a.createElement(qe.a.Column,{key:t.id},r.a.createElement(De.a,null,r.a.createElement(j.a,{src:"data:image/jpeg;base64,".concat(t.user_photo),label:t.close_hour?{color:"red",content:"Ended",ribbon:!0,size:"large"}:null,wrapped:!0,ui:!1}),r.a.createElement(De.a.Header,null,t.id),r.a.createElement(De.a.Description,null,t.user_name," | ",t.user_id),r.a.createElement(De.a.Description,null,t.start_date),r.a.createElement(De.a.Content,{extra:!0},r.a.createElement(v.a,{fluid:!0,content:"See Request",icon:"address card",onClick:function(){return a=t.id,void e.history.push(e.location.pathname+"/".concat(a));var a}}))))})),r.a.createElement("div",{ref:t}),x?r.a.createElement(qe.a.Column,null,r.a.createElement(ve.a,{size:"small"},r.a.createElement(ye.a,{name:"circle notch",loading:!0}),"Loading...")):null))))},tt=a(34),at={cursor:"pointer"},nt=function(e){var t=e.name,a=e.label,n=e.isSelected,c=e.onCheckboxChange,l=e.children;return r.a.createElement("div",{className:"form-check",style:{marginTop:30}},r.a.createElement("label",{style:at},r.a.createElement("input",{style:{width:"16px",height:"16px"},type:"checkbox",name:t,checked:n,onChange:c,className:"form-check-input"}),a),l)};var rt=function(e){var t=Object(n.useState)(!1),a=Object(m.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)(!1),o=Object(m.a)(i,2),u=o[0],d=o[1],f=Object(n.useState)({materials:[]}),p=Object(m.a)(f,2),b=p[0],y=p[1],O=Object(n.useState)([]),S=Object(m.a)(O,2),C=S[0],k=S[1],z=Object(n.useState)([]),I=Object(m.a)(z,2),_=I[0],w=I[1],T=Object(n.useState)([]),x=Object(m.a)(T,2),q=x[0],D=x[1],R=Object(n.useState)([]),M=Object(m.a)(R,2),A=M[0],N=M[1],B=Object(n.useState)(null),L=Object(m.a)(B,2),H=L[0],F=L[1],Y=Object(n.useState)(null),J=Object(m.a)(Y,2),W=J[0],U=J[1];function Q(e){oe.a.get(P.replace(":id",e)).then((function(t){var a=t.data.materials;void 0===t.data.close_date&&(N(a.filter((function(e){return void 0!=e.close_date}))),a=a.filter((function(e){return void 0===e.close_date}))),y(Object(s.a)(Object(s.a)({},t.data),{},{materials:a,id:e})),w(a.reduce((function(e,t){return Object(s.a)(Object(s.a)({},e),{},Object(tt.a)({},t.id,!1))}),[]))})).catch((function(e){return U(he(e.response))}))}function $(){if(void 0!=b.materials.find((function(e){return void 0!=e.damage})))return Object(ue.toast)({type:"warning",title:"Missing Information",description:"Please confirm material damage reports!",time:2e3,size:"mini"});if(C.length>0){var e=[];C.map((function(t){e.push(t)})),D(e),l(!0)}else d(!0)}function X(){var e=document.getElementById("endButton"),t=document.getElementById("addButton");e.disabled=!0,t.disabled=!0,q.map((function(a,n){var r=b.materials.find((function(e){return e.name===a.name})).id;setTimeout((function(){oe.a.delete(K.replace(":reqId",b.id).replace(":id",r),{data:{quantity:a.quantity}}).then((function(a){he(a),n+1===q.length&&(setTimeout((function(){Q(b.id),e.disabled=!1,t.disabled=!1}),3e3),k([]))})).catch((function(a){he(a.response),e.disabled=!1,t.disabled=!1}))}),1e3)})),l(!1)}function Z(e){var t=e.target.name;w(Object(s.a)(Object(s.a)({},_),{},Object(tt.a)({},t,!_[t]))),function(e){if(void 0!=C.find((function(t){return t.id==e})))k(C.filter((function(t){return t.id!=e})));else{var t=b.materials.find((function(t){return t.id==e}));if(void 0!=t){var a=C;a.push(t),k(a)}}}(t)}function ee(){return q.map((function(e){return"00"===e.id.slice(0,2)?r.a.createElement(Be.a.Item,{key:e.id},r.a.createElement(Be.a.Content,{floated:"left"},r.a.createElement(E.a,null,e.name)),r.a.createElement(Be.a.Content,{floated:"right"},r.a.createElement(g.a,{type:"number",size:"small",required:!0,onChange:function(t,a){return function(e,t,a){parseInt(e)>parseInt(a)&&(e=a),parseInt(e)<parseInt("1")&&(e="1");var n=q;n[q.findIndex((function(e){return e.name===t.name}))]={name:t.name,id:t.id,quantity:e},D(n)}(a.value,e,e.quantity)},min:"1",max:e.quantity,style:{width:"90%"}}))):r.a.createElement(Be.a.Item,null,r.a.createElement(Be.a.Content,{floated:"left",key:e.id},r.a.createElement(E.a,null,e.name)))}))}return Object(n.useEffect)((function(){var t=e.match.params.id;F(JSON.parse(sessionStorage.getItem("userinfo"))),Q(t)}),[]),r.a.createElement("div",null,r.a.createElement(ue.SemanticToastContainer,null),W||(0===b.materials.length?r.a.createElement(ve.a,null,"Loading...",r.a.createElement(ye.a,{loading:!0,name:"circle notch"})):r.a.createElement("div",null,r.a.createElement(De.a,{style:{float:"right"}},r.a.createElement(j.a,{src:"data:image/jpeg;base64,".concat(b.user_photo),wrapped:!0,ui:!1}),r.a.createElement(De.a.Content,null,r.a.createElement(De.a.Header,null,b.user_name),r.a.createElement(De.a.Meta,null,b.user_id)),r.a.createElement(De.a.Content,{extra:!0},b.start_date," | ",b.start_hour,void 0!=b.close_date?r.a.createElement("div",null,r.a.createElement(ge.a,null),"Ended",r.a.createElement("div",null,b.close_date," | ",b.close_hour)):null),A.length>0&&void 0==b.close_date?r.a.createElement(De.a.Content,{extra:!0},r.a.createElement("div",null,r.a.createElement(Be.a,{size:"tiny",divided:!0},r.a.createElement(E.a,null,"Material Delivered"),A.map((function(e){return r.a.createElement(Be.a.Item,{key:e.name},r.a.createElement(Be.a.Header,null,e.name+" | Quantity: "+e.quantity),r.a.createElement(Be.a.Description,null,"Delivered: ",e.close_date+" | "+e.close_hour))}))))):null),void 0!=b.close_date?null:r.a.createElement("div",null,r.a.createElement(v.a,{id:"endButton",floated:"right",color:C.length>0?"":"red",onClick:$,content:C.length>0?"Remove Material":"End Request",icon:"check"}),r.a.createElement(v.a,{id:"addButton",floated:"left",onClick:function(){e.history.push({pathname:"".concat(e.location.pathname,"/material")})},content:"Add Material",icon:"add"})),r.a.createElement(E.a,null,"Material: "),r.a.createElement(ge.a,null),r.a.createElement("div",{style:{display:"inline-block"}},void 0!=b.close_date?b.materials.map((function(e){return r.a.createElement(E.a,{key:e.id,size:"tiny"},e.name+" | "+e.id+" | Quantity: "+e.quantity)})):b.materials.map((function(e){return r.a.createElement("div",{onSubmit:$,key:e.id},r.a.createElement(nt,{name:e.id,label:e.name+" | "+e.id+" | Quantity: "+e.quantity,isSelected:_[e.id],onCheckboxChange:Z,key:e.id},void 0===e.damage?null:r.a.createElement(Be.a.Content,{floated:"right"},r.a.createElement(v.a.Group,{size:"tiny"},r.a.createElement(v.a,{id:"confirm"+e.id,size:"tiny",color:"green",onClick:function(){return function(e,t){var a=document.getElementById("confirm"+e),n=document.getElementById("cancel"+e);a.disabled=!0,n.disabled=!0,oe.a.delete(K.replace(":reqId",b.id).replace(":id",e),{data:{quantity:1}}).then((function(a){oe.a.post(V.replace(":id",e),{description:t,user:H.id}).then((function(e){he(e),setTimeout((function(){Q(b.id)}),3e3)})).catch((function(e){he(e.response)}))})).catch((function(e){a.disabled=!1,n.disabled=!1,he(e.response)}))}(e.id,e.damage.description)},icon:"check",content:"Confirm Damage"}),r.a.createElement(v.a,{id:"cancel"+e.id,size:"tiny",onClick:function(){return function(e){var t=document.getElementById("confirm"+e),a=document.getElementById("cancel"+e);t.disabled=!0,a.disabled=!0,oe.a.delete(G.replace(":reqId",b.id).replace(":id",e)).then((function(e){Q(b.id)})).catch((function(e){he(e.response),t.disabled=!1,a.disabled=!1}))}(e.id)},icon:"close",content:"Cancel"})))))}))))),r.a.createElement(h.a,{size:"small",open:c,dimmer:"blurring"},r.a.createElement(E.a,{size:"huge",textAlign:"center"},"Remove Material from Request"),r.a.createElement(h.a.Content,{scrolling:!0},r.a.createElement(h.a.Description,null,r.a.createElement(E.a,{size:"large",textAlign:"center"},"Verify the material and each quantity to remove from request"),r.a.createElement(ge.a,null),r.a.createElement(Be.a,{divided:!0},ee()))),r.a.createElement(h.a.Actions,null,r.a.createElement(v.a,{color:"red",onClick:X,content:"Remove"}),r.a.createElement(v.a,{onClick:function(){return l(!1)},content:"Cancel"}))),r.a.createElement(h.a,{open:u,basic:!0,size:"small"},r.a.createElement(E.a,{icon:"exclamation triangle",content:"You are about to end this request"}),r.a.createElement(h.a.Content,null,r.a.createElement(h.a.Header,null,"Do you really want to end this request?")),r.a.createElement(h.a.Actions,null,r.a.createElement(v.a,{basic:!0,color:"red",inverted:!0,onClick:function(){return d(!1)},content:"Cancel"}),r.a.createElement(v.a,{color:"green",inverted:!0,onClick:function(){return function(){var e=document.getElementById("endButton"),t=document.getElementById("addButton");e.disabled=!0,t.disabled=!0,oe.a.patch(P.replace(":id",b.id),{}).then((function(e){he(e),setTimeout((function(){return Q(b.id)}),3e3)})).catch((function(a){he(a.response),e.disabled=!1,t.disabled=!1})),d(!1)}()},content:"Confirm"}))))},ct=a(100),lt=a.n(ct),it=a(182);var ot=function(e){var t=Object(n.useRef)(),a=Object(n.useState)(!1),c=Object(m.a)(a,2),l=c[0],i=c[1],o=Object(n.useState)(null),u=Object(m.a)(o,2),d=u[0],f=u[1],p=Object(n.useState)(0),b=Object(m.a)(p,2),g=b[0],j=b[1],O=Object(n.useState)(!0),S=Object(m.a)(O,2),C=S[0],k=S[1],z=Object(n.useState)(null),I=Object(m.a)(z,2),_=I[0],w=I[1],T=Object(n.useState)([]),x=Object(m.a)(T,2),R=x[0],M=x[1],A=Object(n.useState)([]),N=Object(m.a)(A,2),B=N[0],L=N[1],H=Object(n.useState)(null),F=Object(m.a)(H,2),P=F[0],Y=F[1],J=Object(n.useState)(!1),K=Object(m.a)(J,2),W=K[0],U=K[1],Q=Object(n.useState)(""),V=Object(m.a)(Q,2),G=V[0],$=V[1],X=Object(n.useState)([]),Z=Object(m.a)(X,2),ee=Z[0],te=Z[1],ae=Object(n.useState)(null),ne=Object(m.a)(ae,2),re=ne[0],ce=ne[1];Object(n.useEffect)((function(){return void 0!=e.match.params.id&&Y(e.match.params.id),ie.observe(t.current),function(){ie.disconnect()}}),[]);var le={root:document.querySelector("#material"),rootMargin:"5px",threshold:1},ie=new IntersectionObserver((function(e){var t=e[0].intersectionRatio;f(t)}),le);function se(e,t,a){var n=e;n+=n?"&":"?",n+="state=available&page=".concat(t),oe.a.get(q+n).then(function(){var t=Object(it.a)(lt.a.mark((function t(n){var r,c;return lt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.data.materials,0!==n.length||0!==a.length){t.next=3;break}return t.abrupt("return",Object(ue.toast)({type:"error",title:"Something went wrong",time:2e3,size:"mini",description:"There are no results for the specified parameters"}));case 3:return 0===r.length&&k(!1),(c=a).push.apply(c,Object(xe.a)(r)),t.next=8,M(c);case 8:i(!1),w(e);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){return ce(he(e.response))}))}function me(){return(me=Object(it.a)(lt.a.mark((function t(){var a,n,r,c;return lt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=B.filter((function(e){return void 0!=R.find((function(t){return t.id==e.id}))})),!((n=B.filter((function(e){return void 0==R.find((function(t){return t.id==e.id}))}))).length>0)){t.next=9;break}return r="?material=",n.map((function(e,t){r+=e.id,t+1!=n.length&&(r+=",")})),t.next=7,oe.a.get(q+r);case 7:t.sent.data.materials.map((function(e){e.can_be_reported&&a.push(e)}));case 9:if(0!==a.length){t.next=11;break}return t.abrupt("return",Object(ue.toast)({type:"warning",title:"Missing Information",size:"mini",time:2e3,description:"Select at least one material"}));case 11:c=null==P?"new_material":"".concat(P,"_material"),localStorage.setItem(c,JSON.stringify(a)),null===P?e.history.push("/auth/staff/newrequest/material/checkout"):e.history.push("/auth/staff/request/".concat(P,"/material/checkout"));case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function de(e){te(Object(s.a)(Object(s.a)({},ee),{},Object(tt.a)({},e,!ee[e])))}function fe(){U(!1),$(null)}function pe(e){de(e),Ee(e)}function Ee(e){if(void 0!=B.find((function(t){return t.id==e})))L(B.filter((function(t){return t.id!=e})));else{var t=R.find((function(t){return t.id==e}));void 0!=t&&(B.push(t),L(B))}}return Object(n.useEffect)((function(){if(d>=0&&C&&null!=_&&!l){var e=g+1;j(e),i(!0),se(_,e,R)}}),[d]),Object(n.useEffect)((function(){if(R.length>0&&0==ee.length){var e=null==P?JSON.parse(localStorage.getItem("new_material")):JSON.parse(localStorage.getItem("".concat(P,"_material")));null!=e&&(te(e.reduce((function(e,t){return Object(s.a)(Object(s.a)({},e),{},Object(tt.a)({},t.id,!0))}),[])),L(e))}}),[R,P]),r.a.createElement("div",null,r.a.createElement(ue.SemanticToastContainer,null),re||r.a.createElement("div",null,r.a.createElement(E.a,null,"Material:"),r.a.createElement(v.a,{size:"medium",onClick:function(){return me.apply(this,arguments)},icon:"add",content:"Add Material to Request"}),r.a.createElement(v.a,{size:"medium",onClick:function(){U(!0)},icon:"qrcode",content:"Read QR Code"}),r.a.createElement(Ae,Object.assign({},e,{setFilters:function(e){e||(e=""),j(1),M([]),k(!0),i(!0),se(e,1,[])}})),r.a.createElement(ge.a,null),r.a.createElement(h.a,{open:W,basic:!0,dimmer:"blurring",onClose:fe,size:"small"},r.a.createElement(h.a.Content,null,r.a.createElement(Ke.a,{delay:300,onError:function(e){console.error(e)},onScan:function(e){e&&$(e)},style:{display:"block",marginLeft:"auto",marginRight:"auto",width:"60%"}}),r.a.createElement(h.a.Header,{style:{textAlign:"center"}},G)),r.a.createElement(h.a.Actions,null,r.a.createElement(y.a,{fluid:!0},r.a.createElement(v.a,{basic:!0,color:"green",onClick:function(){if(null!=G){fe();var e=G;oe.a.get(D.replace(":id",e)).then((function(e){if("available"!==e.data.state)return Object(ue.toast)({type:"error",title:"Can\xb4t select the material specified",description:"The Qr Code scanned doesn\xb4t belong to a material, or the material is not available",time:3e3,size:"mini"});de(G),Ee(G)})).catch((function(e){return he(e.response)})),$(null)}},content:"Confirm",inverted:!0}),r.a.createElement(v.a,{basic:!0,color:"red",onClick:fe,content:"Cancel",inverted:!0})))),r.a.createElement("div",null,r.a.createElement(qe.a,{columns:3,id:"material",style:{height:30,margin:6,padding:8}},R.map((function(e){return r.a.createElement(qe.a.Column,{key:e.id},r.a.createElement(De.a,{centered:!0,key:e.id},r.a.createElement(De.a.Header,null,e.name),r.a.createElement(De.a.Description,null,e.id),r.a.createElement(De.a.Content,{extra:!0},!0===ee[e.id]?r.a.createElement(v.a,{fluid:!0,color:"green",onClick:function(){return pe(e.id)}}," Selected! "):r.a.createElement(v.a,{fluid:!0,onClick:function(){return pe(e.id)}}," Select "))))})),r.a.createElement("div",{ref:t}),l?r.a.createElement(qe.a.Column,null,r.a.createElement(ve.a,{size:"small"},r.a.createElement(ye.a,{name:"circle notch",loading:!0}),"Loading...")):null))))},ut=a(457),st=a.n(ut);var mt=function(e){var t=Object(n.useState)([]),a=Object(m.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)(null),o=Object(m.a)(i,2),u=o[0],s=o[1],d=Object(n.useState)("ID"),f=Object(m.a)(d,2),p=f[0],h=f[1],b=Object(n.useState)("Name"),y=Object(m.a)(b,2),O=y[0],S=y[1],C=Object(n.useState)(st.a),k=Object(m.a)(C,2),z=k[0],I=k[1],_=Object(n.useState)(null),w=Object(m.a)(_,2),T=w[0],x=w[1];return Object(n.useEffect)((function(){var t=e.match.params.id;void 0!=t&&oe.a.get(P.replace(":id",t)).then((function(e){s(t),h(e.data.user_id),S(e.data.user_name),I("data:image/jpeg;base64,".concat(e.data.user_photo))})).catch((function(e){return x(he(e.response))}));var a=void 0==t?"new_material":"".concat(t,"_material"),n=JSON.parse(localStorage.getItem(a));null==n&&(Object(ue.toast)({type:"error",title:"Something Went Wrong",time:2e3,size:"mini",description:"Please select the material again!"}),setTimeout((function(){return e.history.push(e.location.pathname.replace("/checkout",""))}),3e3)),l(n)}),[]),r.a.createElement("div",null,r.a.createElement(ue.SemanticToastContainer,null),T||(0==c.length?r.a.createElement(ve.a,null,"Loading...",r.a.createElement(ye.a,{name:"circle notched",loading:!0})):r.a.createElement("div",null,r.a.createElement(E.a,null,"Finalize Request"),r.a.createElement(ge.a,null),r.a.createElement("div",{style:{display:"block"}},e.newRequest?r.a.createElement("div",{style:{display:"inline-block"}},r.a.createElement(g.a,{size:"mini",id:"searchprofile",style:{float:"left"},icon:"users",iconPosition:"left",placeholder:"Introduce user number..."}),r.a.createElement(v.a,{size:"large",basic:!0,onClick:function(){var e=document.getElementById("searchprofile").value;oe.a.get(A.replace(":id",e)).then((function(t){oe.a.get(M.replace(":id",e)).then((function(e){if(void 0===e.data.roles.find((function(e){return"student"===e.name})))return Object(ue.toast)({type:"warning",title:"Wrong Information",description:"Insert a student number",time:2e3,size:"mini"});S(t.data.name),h(t.data.id),I("data:image/jpeg;base64,".concat(t.data.photo))})).catch((function(e){return he(e.response)}))})).catch((function(e){return he(e.response)}))},style:{float:"left"},icon:"search",content:"Search"})):null,r.a.createElement(De.a,{centered:!0},r.a.createElement(j.a,{src:z}),r.a.createElement(De.a.Content,null,r.a.createElement(Be.a.Header,null,O),r.a.createElement(De.a.Meta,null,p))),r.a.createElement(ge.a,null),r.a.createElement(v.a,{id:"submit",basic:!0,size:"large",style:{display:"inline-block",float:"right"},onClick:function(){var t=document.getElementById("submit");if("ID"!=p){var a=function(){var e=!1,t=c.reduce((function(t,a){if("00"!=a.id.slice(0,2))t.push({material_id:a.id,quantity:"1"});else{var n=document.getElementById("".concat(a.id,"quantity")).value;if(""==n)return e=!0,Object(ue.toast)({type:"warning",title:"Missing Information",time:2e3,size:"mini",description:"Insert a quantity for the material ".concat(a.name)}),t;parseInt(n)<parseInt("1")&&(n="1"),parseInt(n)>parseInt("10")?n="10":parseInt(n)>parseInt(a.available_quantity)&&(n=a.available_quantity),t.push({material_id:a.id,quantity:n})}return t}),[]);return e&&(t=null),t}();if(null===a)return;t.disabled=!0,null===u?oe.a.post(F,{materials_requested:a,user_id:p}).then((function(t){he(t),setTimeout((function(){localStorage.removeItem("material"),e.history.push("/auth/staff/request")}),3e3)})).catch((function(e){he(e.response),t.disabled=!1})):oe.a.put(J.replace(":id",u),{materials:a}).then((function(t){he(t),setTimeout((function(){localStorage.removeItem("material"),e.history.push("/auth/staff/request/".concat(u))}),3e3)})).catch((function(e){t.disabled=!1,he(e.response)}))}else Object(ue.toast)({type:"warning",title:"Missing Information",description:"Insert a student number to associate with the request",time:2e3,size:"mini"})},icon:"edit alternate",content:"Request"}),r.a.createElement("div",{style:{display:"block",marginTop:"5%"}},r.a.createElement(E.a,{size:"medium"},"Material:"),r.a.createElement(Be.a,{size:"large",divided:!0,style:{marginBottom:"5%"}},c.map((function(e){return"00"==e.id.slice(0,2)?r.a.createElement(Be.a.Item,{key:e.id},r.a.createElement(Be.a.Content,{floated:"left"},r.a.createElement(Be.a.Header,null,e.name)),r.a.createElement(Be.a.Content,{floated:"right"},r.a.createElement(Be.a.Description,null,"Quantity:",r.a.createElement(g.a,{id:"".concat(e.id,"quantity"),type:"number",required:!0,min:"1",max:e.available_quantity>"10"?"10":e.available_quantity})))):r.a.createElement(Be.a.Item,{key:e.id},r.a.createElement(Be.a.Content,{floated:"left"},r.a.createElement(Be.a.Header,null,e.name)))}))))))))},dt=a(306),ft=a(810);var pt=function(e){var t=Object(n.useState)(""),a=Object(m.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)(null),o=Object(m.a)(i,2),u=o[0],s=o[1],d=Object(n.useState)(null),f=Object(m.a)(d,2),p=f[0],h=f[1];return Object(n.useEffect)((function(){var t=document.getElementById("confirm"),a=JSON.parse(sessionStorage.getItem("userinfo")).id;h(a);var n=e.match.params.id;"00"==n.slice(0,2)&&(t.disabled=!0,e.history.push(e.location.pathname.replace("/report","/material"))),oe.a.get(D.replace(":id",n)).then(function(){var t=Object(it.a)(lt.a.mark((function t(a){return lt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:"available"===a.data.state?s(n):e.history.push(e.location.pathname.replace("/report","/material"));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){he(e.response.status)}))}),[]),r.a.createElement("div",null,r.a.createElement(ue.SemanticToastContainer,null),r.a.createElement(E.a,{size:"medium"},"Report Damage: "),r.a.createElement(ge.a,null),r.a.createElement(De.a,{fluid:!0},r.a.createElement(De.a.Content,null,r.a.createElement(De.a.Header,null,u),r.a.createElement(De.a.Description,null,r.a.createElement(E.a,{attached:"top",color:"red"},"Report Description"),r.a.createElement(dt.a,null,r.a.createElement(b.a,null,r.a.createElement(ft.a,{required:!0,onChange:function(e,t){return l(t.value)},rows:"2",maxLength:"200"}))))),r.a.createElement(y.a,{fluid:!0},r.a.createElement(v.a,{basic:!0,id:"confirm",color:"green",onClick:function(){var t=document.getElementById("confirm");if(""==c)return Object(ue.toast)({type:"warning",title:"Missing Information",description:"Insert a damage description",time:2e3,size:"mini"});t.disabled=!0,oe.a.post(V.replace(":id",u),{description:c,user:p}).then((function(t){he(t),setTimeout((function(){e.history.push(e.location.pathname.replace("/report",""))}),3e3)})).catch((function(e){t.disabled=!1,he(e.response)}))},content:"Confirm"}),r.a.createElement(v.a,{basic:!0,color:"red",onClick:function(){e.history.push(e.location.pathname.replace("/report",""))},content:"Cancel"})),r.a.createElement(De.a.Content,{extra:!0})))},ht=function(e){return r.a.createElement("select",{value:e.value,onChange:function(t){e.changeOption(t.target.value)}},e.defaultValue?r.a.createElement("option",{value:"all",key:"all"},e.defaultValue):null,e.values.map((function(e){return r.a.createElement("option",{value:e,key:e},e)})))};var Et=function(e){var t=Object(n.useRef)(),a=Object(n.useState)([]),c=Object(m.a)(a,2),l=c[0],i=c[1],o=Object(n.useState)(null),u=Object(m.a)(o,2),s=u[0],d=u[1],f=Object(n.useState)(null),p=Object(m.a)(f,2),h=p[0],b=p[1],y=Object(n.useState)([]),O=Object(m.a)(y,2),S=O[0],C=O[1],k=Object(n.useState)("collapse"),z=Object(m.a)(k,2),I=z[0],_=z[1],w=Object(n.useState)(!1),T=Object(m.a)(w,2),x=T[0],q=T[1],D=Object(n.useState)(null),M=Object(m.a)(D,2),A=M[0],B=M[1],L=Object(n.useState)(0),H=Object(m.a)(L,2),F=H[0],P=H[1],Y=Object(n.useState)(!0),J=Object(m.a)(Y,2),K=J[0],W=J[1],U=Object(n.useState)(null),Q=Object(m.a)(U,2),V=Q[0],G=Q[1],$=Object(n.useState)(!1),X=Object(m.a)($,2),Z=X[0],ee=X[1];Object(n.useEffect)((function(){if(b(""),d(""),e.location&&e.location.search){var a=new URLSearchParams(e.location.search).entries(),n=a.next();do{var r=n.value[0];"role"===r&&d(n.value[1]),"id"===r&&(b(n.value[1]),document.getElementById("searchProfile").value=n.value[1]),n=a.next()}while(!n.done);_("visible")}return oe.a.get(R).then((function(e){C(e.data.roles.filter((function(e){return"student"!==e&&"staff"!==e})))})).catch((function(e){return he(e.response)})),ae.observe(t.current),function(){ae.disconnect()}}),[]);var te={root:document.querySelector("#users"),rootMargin:"5px",threshold:1},ae=new IntersectionObserver((function(e){var t=e[0].intersectionRatio;B(t)}),te);function ne(t,a,n,r){if("student"==a||"A"===t.slice(0,1))return q(!1),Object(ue.toast)({title:"Invalid Parameter",type:"error",size:"mini",time:2e3,description:"Insert a diferent role or a diferent user"});var c=function(e,t){var a="?";""!=e&&(a+="id=".concat(e));""!=t&&(a.length>1&&(a+="&"),a+="role=".concat(t));"?"===a&&(a="");return a}(t,a),l=c;""==l&&(l+="?role=administrator,teacher,lab_responsible,technician"),l+="&page=".concat(n),oe.a.get(N+l).then((function(t){var a=t.data.users;if(0===r.length&&0===a.length)return i(a),W(!1),q(!1),Object(ue.toast)({type:"error",title:"Something Went Wrong",time:2e3,size:"mini",description:"There are no results for the specified parameters"});0===a.length&&W(!1);var n=r;n.push.apply(n,Object(xe.a)(a)),i(n),q(!1),""!=c&&e.history.push({pathname:e.location.pathname,search:c})})).catch((function(e){return G(he(e.response))}))}function re(){return""!=s?s:"all"}return Object(n.useEffect)((function(){if(A>=0&&K&&!x&&!Z&&(null!=h||null!=s)){var e=F+1;P(e),q(!0),ne(h,s,e,l)}}),[A,h,s]),r.a.createElement("div",null,r.a.createElement(ue.SemanticToastContainer,null),V||r.a.createElement("div",null,r.a.createElement(E.a,{size:"medium"},"Users:"),r.a.createElement(g.a,{size:"mini",style:{float:"right"},icon:"users",id:"searchProfile",onChange:function(e,t){ee(!0),b(t.value)},iconPosition:"left",placeholder:"Introduce user number..."}),r.a.createElement("div",{style:{display:"block",float:"left",marginTop:"1%"}},"Filter by Role:",r.a.createElement(ht,{values:S,value:re(),changeOption:function(e){"all"!=e&&(d(e),ee(!0))},defaultValue:"all"==re()?"All":null})),r.a.createElement("div",{style:{display:"block",marginLeft:"6%"}},r.a.createElement(v.a,{size:"large",basic:!0,onClick:function(){if(""!=h||""!=s){ee(!1),P(1),W(!0),q(!0),_("visible"),ne(h,s,1,[])}},icon:"search",content:"Search"}),r.a.createElement(v.a,{size:"large",id:"reset_filter",basic:!0,onClick:function(t){t.preventDefault(),q(!0),P(1),b(""),d(""),W(!0),ne("","",1,[]),_("hidden"),e.history.push(e.location.pathname),document.getElementById("searchProfile").value=""},style:{visibility:I,marginLeft:"1%",marginTop:"0.5%"},content:"Reset"})),r.a.createElement(ge.a,null),r.a.createElement(qe.a,{columns:6,id:"users",style:{height:30,margin:6,padding:8}},l.map((function(t){return r.a.createElement(qe.a.Column,{key:t.id},r.a.createElement(De.a,{centered:!0},r.a.createElement(j.a,{src:"data:image/jpeg;base64,".concat(t.photo),wrapped:!0,ui:!1}),r.a.createElement(De.a.Content,null,r.a.createElement(De.a.Header,null,t.user_name),r.a.createElement(De.a.Description,null,t.id)),r.a.createElement(De.a.Content,{extra:!0},r.a.createElement(v.a,{fluid:!0,content:"Change Roles",icon:"address card",onClick:function(){return a=t.id,void e.history.push("/auth/admin/usersroles/".concat(a));var a}}))))})),r.a.createElement("div",{ref:t}),x?r.a.createElement(qe.a.Column,null,r.a.createElement(ve.a,{size:"small"},r.a.createElement(ye.a,{name:"circle notch",loading:!0}),"Loading...")):null)))};var bt=function(e){var t=Object(n.useState)([]),a=Object(m.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)({}),o=Object(m.a)(i,2),u=o[0],d=o[1],f=Object(n.useState)("all"),p=Object(m.a)(f,2),h=p[0],E=p[1],b=Object(n.useState)("all"),g=Object(m.a)(b,2),y=g[0],O=g[1],C=Object(n.useState)([]),k=Object(m.a)(C,2),z=k[0],I=k[1],_=Object(n.useState)(null),w=Object(m.a)(_,2),T=w[0],x=w[1];function q(e){"all"!=e&&E(e)}function D(e){!function(e){I(Object(s.a)(Object(s.a)({},z),{},Object(tt.a)({},e,!z[e])))}(e.target.name)}return Object(n.useEffect)((function(){var t=e.match.params.id;oe.a.get(S).then((function(a){oe.a.get(M.replace(":id",t)).then((function(n){if(void 0!=n.data.roles.find((function(e){return"student"==e.name||"staff"==e.name})))Object(ue.toast)({type:"error",time:2e3,size:"mini",title:"Invalid Parameter",description:"It is not permited change either student or staff role"}),setTimeout((function(){e.history.push(e.location.pathname.replace("/".concat(t),""))}),3e3);else{var r=a.data.sci_areas;r.shift(),O(r),oe.a.get(R).then((function(e){oe.a.get(A.replace(":id",t)).then((function(t){d(t.data);var a=n.data.roles,c=function(e,t,a){var n=t.find((function(e){return"lab_responsible"==e.name}));void 0!=n&&E(a.find((function(e){return e.id===n.sci_area_id})).name);return e.map((function(e){var a=!1;return t.find((function(t){return t.name===e}))&&(a=!0),{name:e,selected:a}}))}(e.data.roles.filter((function(e){return"student"!=e&&"staff"!=e})),a,r);l(c),I(c.reduce((function(e,t){return Object(s.a)(Object(s.a)({},e),{},Object(tt.a)({},t.name,t.selected))}),[]))})).catch((function(e){return x(he(e.response))}))})).catch((function(e){return x(he(e.response))}))}})).catch((function(e){return x(he(e.response))}))})).catch((function(e){return x(he(e.response))}))}),[]),r.a.createElement("div",null,r.a.createElement(ue.SemanticToastContainer,null),T||(0==c.length?r.a.createElement(ve.a,null,"Loading...",r.a.createElement(ye.a,{name:"circle notched",loading:!0})):r.a.createElement("div",null,r.a.createElement(De.a,{style:{float:"right"}},r.a.createElement(j.a,{src:"data:image/jpeg;base64,".concat(u.photo),wrapped:!0,ui:!1}),r.a.createElement(De.a.Content,null,r.a.createElement(De.a.Header,null,u.name),r.a.createElement(De.a.Meta,null,u.id))),r.a.createElement("div",{style:{display:"inline-block"}},c.map((function(e){return r.a.createElement("div",{key:e.name},r.a.createElement(nt,{name:e.name,label:e.name,isSelected:z[e.name],onCheckboxChange:D,key:e.name}),"lab_responsible"===e.name?r.a.createElement("div",null,r.a.createElement(ht,{values:y.map((function(e){return e.name})),value:h,changeOption:q,defaultValue:"all"==h?"Scientific Area":null})):null)}))),r.a.createElement(v.a,{floated:"right",id:"confirm",color:"green",icon:"check",onClick:function(){var t,a=document.getElementById("confirm"),n=Object.keys(z).filter((function(e){return z[e]})).map((function(e){return{role:e}}));if((t=n.findIndex((function(e){return"lab_responsible"===e.role})))>=0){if("all"===h)return Object(ue.toast)({type:"warning",title:"Missing Information",description:"Select Scientific Area to associate with the responsible",time:2e3,size:"mini"});n[t]={role:"lab_responsible",sci_area:h}}a.disabled=!0,oe.a.put(M.replace(":id",u.id),{roles:n}).then((function(t){he(t),setTimeout((function(){return e.history.push(e.location.pathname.replace("/".concat(u.id),""))}),3e3)})).catch((function(e){a.disabled=!1,he(e.response)}))},content:"Confirm"}))))};var gt=function(e){var t=Object(n.useState)([]),a=Object(m.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(""),u=Object(m.a)(o,2),s=u[0],d=u[1],f=Object(n.useState)(null),p=Object(m.a)(f,2),h=p[0],b=p[1];function y(){oe.a.get(S).then((function(e){d(""),l(e.data.sci_areas.filter((function(e){return 0!=e.id})))})).catch((function(e){return b(he(e.response))}))}return Object(n.useEffect)((function(){y()}),[]),r.a.createElement("div",null,r.a.createElement(ue.SemanticToastContainer,null),h||r.a.createElement("div",null,r.a.createElement(E.a,{size:"medium"},"Scientific Areas:"),r.a.createElement(g.a,{id:"addarea",type:"text",onChange:function(e,t){var a;""!=(a=t.value)&&d(a)},action:r.a.createElement(v.a,{onClick:function(){var e=document.getElementById("addarea");""!=e.value&&""!=s&&oe.a.post(S,{name:s}).then((function(t){he(t),e.value="",setTimeout((function(){return y()}),3e3)})).catch((function(e){he(e.response)}))}},"Add"),placeholder:"Scientific Area..."}),r.a.createElement(ge.a,null),r.a.createElement(Be.a,{divided:!0},c.map((function(e){var t="/auth/admin/areas/".concat(e.id,"/course");return r.a.createElement(Be.a.Item,{key:e.id},r.a.createElement(Be.a.Content,{floated:"right"},r.a.createElement(v.a,{size:"big",id:"delete"+e.id,compact:!0,onClick:function(){return function(e){var t=document.getElementById("delete".concat(e));t.disabled=!0,oe.a.delete(C.replace(":id",e)).then((function(e){he(e),setTimeout((function(){return y()}),200)})).catch((function(e){t.disabled=!1,he(e.response)}))}(e.id)},icon:"red close"})),r.a.createElement(Be.a.Content,null,r.a.createElement(i.b,{to:t}," ",e.name)))})))))};var vt=function(e){var t=Object(n.useState)([]),a=Object(m.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)([]),o=Object(m.a)(i,2),u=o[0],d=o[1],f=Object(n.useState)([]),p=Object(m.a)(f,2),h=p[0],b=p[1],g=Object(n.useState)([]),y=Object(m.a)(g,2),j=y[0],O=y[1],I=Object(n.useState)([]),w=Object(m.a)(I,2),T=w[0],x=w[1],q=Object(n.useState)([]),D=Object(m.a)(q,2),R=D[0],M=D[1],A=Object(n.useState)([]),N=Object(m.a)(A,2),B=N[0],L=N[1],H=Object(n.useState)(null),F=Object(m.a)(H,2),P=F[0],Y=F[1],J=Object(n.useState)("collapse"),K=Object(m.a)(J,2),W=K[0],U=K[1],Q={display:"inline-block",margin:10,marginBottom:30};function V(e){var t=e[e.length-1],a=h.find((function(e){return"sci_area"==e.type})),n=h.find((function(e){return"subject"==e.type}));"sci_area"===t.type?function(e,t){oe.a.get(C.replace(":id",e.id)).then((function(e){var a=G(e.data.subjects,j),n=G(e.data.types,c);void 0!=t&&0==(a=G(a,[t])).length&&(a=[t]),O(a),M(n)})).catch((function(e){return Y(he(e.response))}))}(t,n):"subject"===t.type&&function(e,t){oe.a.get(z.replace(":id",e.id)).then((function(e){var a=e.data.sci_area.id;void 0!=t&&(a=t.id),oe.a.get(C.replace(":id",a)).then((function(a){var n=[e.data.sci_area],r=G(e.data.types,a.data.types);void 0!=t&&0==(n=G(n,[t])).length&&(n=[t]),x(n),M(r)})).catch((function(e){return Y(he(e.response))}))})).catch((function(e){return Y(he(e.response))}))}(t,a)}function G(e,t){return e.filter((function(e){return void 0!=t.find((function(t){return t.id===e.id}))}))}function $(e){oe.a.get(_).then((function(t){d(t.data.types.reduce((function(t,a){return Object(s.a)(Object(s.a)({},t),{},Object(tt.a)({},a.id,e.some((function(e,t,n){return e.id===a.id}))))}),[])),l(t.data.types)})).catch((function(e){return Y(he(e.response))})),oe.a.get(S).then((function(e){oe.a.get(k).then((function(t){x(e.data.sci_areas),O(t.data.subjects),b([])})).catch((function(e){return Y(he(e.response))}))})).catch((function(e){return Y(he(e.response))}))}function X(e){if("all"!=e.id){var t=h,a=t.findIndex((function(t){return t.type===e.type}));a>-1?t[a]=e:t.push(e),b(t),V([e])}}function Z(e){var t=h.find((function(t){return t.type===e}));return void 0!=t?t.id:"all"}function ee(e){if(function(e){d(Object(s.a)(Object(s.a)({},u),{},Object(tt.a)({},e,!u[e])))}(e),void 0!=B.find((function(t){return t.id==e})))L(B.filter((function(t){return t.id!=e})));else{var t=c.find((function(t){return t.id==e})),a=B;a.push(t),L(a)}}return Object(n.useEffect)((function(){var e=JSON.parse(localStorage.getItem("reservation"));if(null==e)e=[];else{var t=B;t.push.apply(t,Object(xe.a)(e)),L(t)}$(e)}),[]),r.a.createElement("div",null,r.a.createElement(ue.SemanticToastContainer,null),P||r.a.createElement("div",null,r.a.createElement(E.a,{size:"medium"},"Material:"),r.a.createElement("div",{style:Q},r.a.createElement(Re,{changeFilter:X,name:"sci_area",title:"Scientific Area",types:T,value:Z("sci_area"),optionAll:"all"==Z("sci_area")})),r.a.createElement("div",{style:Q},r.a.createElement(Re,{changeFilter:X,name:"subject",title:"Subjects",types:j,value:Z("subject"),optionAll:"all"==Z("subject")})),r.a.createElement(v.a,{basic:!0,size:"small",onClick:function(e){e.preventDefault(),h.length>0&&(l(R),U("visible"))},icon:"filter alternate",content:"Filter"}),r.a.createElement(v.a,{basic:!0,size:"small",id:"reset_filter",style:Object(s.a)(Object(s.a)({},Q),{},{visibility:W}),onClick:function(t){t.preventDefault(),U("hidden"),e.history.push(e.location.pathname),$(B)},content:"Reset"}),r.a.createElement("div",null,r.a.createElement(v.a,{className:"ui medium labeled icon button",onClick:function(){var t=B.filter((function(e){return c.find((function(t){return t.id==e.id}))}));if(0===t.length)return Object(ue.toast)({type:"warning",title:"Missing Information",time:2e3,size:"mini",description:"Select at least one material"});localStorage.setItem("reservation",JSON.stringify(t)),e.history.push({pathname:"/auth/teacher/newreservation/types/checkout"})},icon:"add",content:"Add Material to Reservation"})),r.a.createElement(ge.a,null),r.a.createElement(qe.a,{columns:4,style:{height:30,margin:6,padding:8}},c.map((function(e){return r.a.createElement(qe.a.Column,{key:e.id},r.a.createElement(De.a,{centered:!0,key:e.id},r.a.createElement(De.a.Header,null,e.name),r.a.createElement(De.a.Description,null,e.id),r.a.createElement(De.a.Content,{extra:!0},!0===u[e.id]?r.a.createElement(v.a,{fluid:!0,color:"green",onClick:function(){return ee(e.id)}}," Selected! "):r.a.createElement(v.a,{fluid:!0,onClick:function(){return ee(e.id)}}," Select "))))})))))},yt=function(e){Object(Ve.a)(a,e);var t=Object(Ge.a)(a);function a(e){var n;return Object(Ue.a)(this,a),(n=t.call(this,e)).handleChange=function(e,t){var a=t.name,r=t.value;n.state.hasOwnProperty(a)&&n.setState(Object(tt.a)({},a,r)),n.props.setDayTime&&n.props.setDayTime(r)},n.state={dateTime:""},n}return Object(Qe.a)(a,[{key:"currentTime",value:function(){var e=new Date,t=String(e.getDate()).padStart(2,"0"),a=String(e.getMonth()+1).padStart(2,"0"),n=e.getFullYear(),r=String(e.getHours()),c=String(e.getMinutes());return e=n+"-"+a+"-"+t+" "+r+":"+c}},{key:"render",value:function(){return r.a.createElement(b.a,null,r.a.createElement($e.DateTimeInput,{name:"dateTime",placeholder:"Day and Hour",dateTimeFormat:"YYYY-MM-DD HH:mm:SS",value:this.state.dateTime,iconPosition:"left",popupPosition:"top left",onChange:this.handleChange,minDate:this.currentTime()}))}}]),a}(n.Component);var jt=function(e){var t=Object(n.useState)(""),a=Object(m.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)(null),o=Object(m.a)(i,2),u=o[0],d=o[1],f=Object(n.useState)(""),p=Object(m.a)(f,2),h=p[0],b=p[1],y=Object(n.useState)([]),j=Object(m.a)(y,2),O=j[0],S=j[1],C=Object(n.useState)([]),z=Object(m.a)(C,2),I=z[0],_=z[1],w=Object(n.useState)(null),T=Object(m.a)(w,2),x=T[0],q=T[1],D=Object(n.useState)(""),R=Object(m.a)(D,2),M=R[0],A=R[1],N=Object(n.useState)(null),B=Object(m.a)(N,2),L=B[0],H=B[1];function F(){return null===x?"all":x.id}return Object(n.useEffect)((function(){d(JSON.parse(sessionStorage.getItem("userinfo"))),oe.a.get(k).then((function(e){_(e.data.subjects)})).catch((function(e){return H(he(e.response))}));var t=JSON.parse(localStorage.getItem("reservation"));null===t?(Object(ue.toast)({type:"error",title:"Something Went Wrong",time:2e3,size:"mini",description:"Please select the material again!"}),setTimeout((function(){e.history.push(e.location.pathname.replace("checkout",""))}),3e3)):S(t)}),[]),r.a.createElement("div",null,r.a.createElement(ue.SemanticToastContainer,null),L||(0==O.length?r.a.createElement(ve.a,null,"Loading...",r.a.createElement(ye.a,{name:"circle notched",loading:!0})):r.a.createElement("div",null,r.a.createElement(E.a,null,"Finalize Reservation"),r.a.createElement(ge.a,null),e.newReservation?r.a.createElement("div",null,"Groups Quantity:",r.a.createElement(g.a,{size:"small",onChange:function(e,t){return a=t.value,parseInt(a)<parseInt("1")&&(a="1"),parseInt(a)>parseInt("15")&&(a="15"),void A(a);var a},type:"number",required:!0,min:"1",max:"15",style:{textAlign:"center",width:"15%",marginRight:"15%"}}),"Subjects:",r.a.createElement("div",{style:{display:"inline-block"}},r.a.createElement(Re,{changeFilter:function(e){"all"!=e.id&&q(e)},name:"subject",types:I,value:F(),optionAll:"all"==F()})),r.a.createElement(E.a,{size:"small",style:{marginTop:"5%"}},"Select a Date and Hour:"),r.a.createElement(yt,{setDayTime:function(e){var t=e.split(" "),a=Object(m.a)(t,2),n=a[0],r=a[1];l(n),b(r)}})):null,r.a.createElement(ge.a,null),r.a.createElement(v.a,{id:"reservation",basic:!0,size:"large",style:{display:"inline-block",float:"right"},onClick:function(){var t=""===c?(Object(ue.toast)({type:"warning",title:"Missing Information",time:2e3,size:"mini",description:"Insert a date"}),!1):""===h?(Object(ue.toast)({type:"warning",title:"Missing Information",time:2e3,size:"mini",description:"Insert an hour"}),!1):null===x?(Object(ue.toast)({type:"warning",title:"Missing Information",time:2e3,size:"mini",description:"Insert a subject"}),!1):""!==M||(Object(ue.toast)({type:"warning",title:"Missing Information",time:2e3,size:"mini",description:"Insert number of groups"}),!1),a=document.getElementById("reservation"),n=!0,r=O.map((function(e){return void 0===e.quantity?(n=!1,Object(ue.toast)({type:"warning",title:"Missing Information",time:2e3,size:"mini",description:"Insert a quantity for the material ".concat(e.name)})):{type:e.id,quantity:e.quantity}}));n&&t&&(a.disabled=!0,oe.a.post(U,{user_id:u.id,subject:x.id,date:"".concat(c," ").concat(h),groups:M,materials:r}).then((function(t){he(t),setTimeout((function(){localStorage.removeItem("reservation"),e.history.push("/auth/teacher/reservation")}),3e3)})).catch((function(e){a.disabled=!1,he(e.response)})))},icon:"edit alternate",content:"Reserve"}),r.a.createElement("div",{style:{display:"block",marginTop:"5%"}},r.a.createElement(E.a,{size:"medium"},"Material:"),r.a.createElement(Be.a,{size:"large",divided:!0},O.map((function(e){return r.a.createElement(Be.a.Item,{key:e.id},r.a.createElement(Be.a.Content,{floated:"left"},r.a.createElement(Be.a.Header,null,e.name)),r.a.createElement(Be.a.Content,{floated:"right"},r.a.createElement(Be.a.Description,null,"Quantity per Group:",r.a.createElement(g.a,{size:"small",onChange:function(t,a){return function(e,t){parseInt(t)<parseInt("1")&&(t="1"),parseInt(t)>parseInt("10")&&(t="10");var a=O,n=a.findIndex((function(t){return t.id===e.id}));a[n]=Object(s.a)(Object(s.a)({},a[n]),{},{quantity:t}),S(a)}(e,a.value)},type:"number",style:{textAlign:"center"},required:!0,min:"1",max:"10"}))))})))))))};var Ot=function(e){var t=Object(n.useState)([]),a=Object(m.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)(null),o=Object(m.a)(i,2),u=o[0],s=o[1];return Object(n.useEffect)((function(){var e=JSON.parse(sessionStorage.getItem("userinfo")).id;oe.a.get(W.replace(":id",e)).then((function(e){l(e.data.reservations)})).catch((function(e){return s(he(e.response))}))}),[]),r.a.createElement("div",null,r.a.createElement(ue.SemanticToastContainer,null),u||r.a.createElement("div",null,r.a.createElement(E.a,{size:"medium"},"Reservations"),r.a.createElement(v.a,{basic:!0,size:"large",onClick:function(){e.history.push("/auth/teacher/newreservation/types")},icon:"file alternate",content:"New Reservation"}),r.a.createElement("div",{style:{display:"block"}},r.a.createElement(ge.a,null),r.a.createElement(Be.a,{selection:!0},0===c.length?r.a.createElement(E.a,null,"There is no Active Reservations"):c.map((function(t){return r.a.createElement(Be.a.Item,{key:t.id,onClick:function(){return a=t.id,void e.history.push(e.location.pathname+"/".concat(a));var a}},r.a.createElement(Be.a.Content,null,r.a.createElement(Be.a.Header,null,t.id),r.a.createElement(Be.a.Description,null,t.subject," | ",t.date," | ",t.hour," ")))}))))))};a(731);var St=function(e){var t=Object(n.useState)({materials:[]}),a=Object(m.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)(null),o=Object(m.a)(i,2),u=o[0],d=o[1];return Object(n.useEffect)((function(){var t=e.match.params.id;oe.a.get(Q.replace(":id",t)).then((function(e){l(Object(s.a)(Object(s.a)({},e.data),{},{id:t}))})).catch((function(e){return d(he(e.response))}))}),[]),r.a.createElement("div",null,r.a.createElement(ue.SemanticToastContainer,null),u||(c.id?r.a.createElement("div",null,r.a.createElement(De.a,{style:{float:"right"}},r.a.createElement(j.a,{src:"data:image/jpeg;base64,".concat(c.user_photo),wrapped:!0,ui:!1}),r.a.createElement(De.a.Content,null,r.a.createElement(De.a.Header,null,c.user_name),r.a.createElement(De.a.Meta,null,c.user_id)),r.a.createElement(De.a.Content,{extra:!0},c.subject," | ",c.date," | ",c.hour,r.a.createElement(ge.a,null),r.a.createElement(E.a,{size:"small"},"Groups: ",c.nr_groups," "))),r.a.createElement(v.a,{id:"delete",floated:"right",color:"red",onClick:function(){var t=document.getElementById("delete");t.disabled=!0,oe.a.delete(Q.replace(":id",c.id)).then((function(t){he(t),setTimeout((function(){return e.history.push(e.location.pathname.replace("/".concat(c.id),""))}),3e3)})).catch((function(e){he(e.response),t.disabled=!1}))},content:"Delete Reservation",icon:"delete"}),r.a.createElement(E.a,{style:{marginLeft:"13%"}},"Material: "),r.a.createElement(ge.a,null),r.a.createElement("div",{style:{display:"inline-block"}},c.materials.map((function(e){return r.a.createElement(E.a,{size:"small",key:e.type},e.type_name+" | "+e.type_id+" | Quantity: "+e.quantity)})))):r.a.createElement(ve.a,null,"Loading...",r.a.createElement(ye.a,{name:"circle notched",loading:!0}))))};var Ct=function(e){return r.a.createElement("div",null,r.a.createElement(ue.SemanticToastContainer,null),r.a.createElement(E.a,{size:"medium",id:"title"},e.title),r.a.createElement(ge.a,null),0!==e.material.length||e.moreData?r.a.createElement(qe.a,{columns:4,style:{height:30,margin:6,padding:8}},e.material.map((function(t){return r.a.createElement(qe.a.Column,null,r.a.createElement(De.a,{centered:!0},r.a.createElement(De.a.Header,null," ",t.material," "),r.a.createElement(De.a.Content,{extra:!0},r.a.createElement(v.a,{fluid:!0,content:"See Report",icon:"bug",onClick:function(){return e.history.push(e.location.pathname+"/"+t.id)}}))))}))):r.a.createElement(E.a,{size:"small"},"There is no Damages Reported"))};var kt=function(e){var t=Object(n.useRef)(),a=Object(n.useState)(!1),c=Object(m.a)(a,2),l=c[0],i=c[1],o=Object(n.useState)(null),u=Object(m.a)(o,2),s=u[0],d=u[1],f=Object(n.useState)(0),p=Object(m.a)(f,2),h=p[0],E=p[1],b=Object(n.useState)(!0),g=Object(m.a)(b,2),v=g[0],y=g[1],j=Object(n.useState)(null),O=Object(m.a)(j,2),S=O[0],C=O[1],k=Object(n.useState)([]),z=Object(m.a)(k,2),I=z[0],_=z[1];Object(n.useEffect)((function(){return T.observe(t.current),function(){T.disconnect()}}),[]),Object(n.useEffect)((function(){if(s>=0&&v&&!l){var e=h+1;E(e),i(!0),t=e,a=I,oe.a.get(B.replace(":flag","false")+"&page=".concat(t)).then((function(e){var t=e.data.damages;0===t.length&&y(!1);var n=a;n.push.apply(n,Object(xe.a)(t)),_(n),i(!1)})).catch((function(e){return C(he(e.response))}))}var t,a}),[s]);var w={root:document.querySelector("#damages"),rootMargin:"5px",threshold:1},T=new IntersectionObserver((function(e){var t=e[0].intersectionRatio;d(t)}),w);return r.a.createElement("div",null,r.a.createElement(ue.SemanticToastContainer,null),S||r.a.createElement("div",null,r.a.createElement(Ct,Object.assign({title:"Damage Reports:",material:I,moreData:v},e)),r.a.createElement("div",{id:"damages"},r.a.createElement("div",{ref:t}),l?r.a.createElement(ve.a,{size:"small"},r.a.createElement(ye.a,{name:"circle notch",loading:!0}),"Loading..."):null)))},zt=a(242),It=[{title:"Material Id",value:"material_id"},{title:"Name",value:"material_name"},{title:"Request Id",value:"request"},{title:"User",value:"user"},{title:"Date",value:"start_date"}];var _t=function(e){return r.a.createElement("div",null,r.a.createElement(E.a,{size:"medium"},"Material Details"),function(){var t=e.material_report.state,a="red";return e.history&&"solved"===e.material_report.state&&(a="green"),r.a.createElement(Le.a,{size:"huge",color:a},"State:",r.a.createElement(Le.a.Detail,null,t))}(),r.a.createElement(ge.a,null),e.history?null:r.a.createElement("div",{style:{display:"block"}},"Change Report State:",r.a.createElement(ht,{values:e.material_report.states,value:e.material_report.state,changeOption:e.changeState})),r.a.createElement(Be.a,{divided:!0},It.map((function(t){return void 0===e.material_report[t.value]?null:r.a.createElement(Be.a.Item,{key:t.title},r.a.createElement(Be.a.Content,{floated:"left"},r.a.createElement(Be.a.Header,null,t.title)),r.a.createElement(Be.a.Content,{floated:"right"},r.a.createElement(Be.a.Description,null,e.material_report[t.value])))}))),r.a.createElement(zt.a,null,r.a.createElement(De.a,{fluid:!0},r.a.createElement(De.a.Content,null,r.a.createElement(De.a.Header,null,"Report Description"),r.a.createElement(De.a.Description,null,r.a.createElement(ge.a,null),r.a.createElement(De.a.Header,{size:"small"},e.material_report.description)))),e.history?r.a.createElement(De.a,{fluid:!0},r.a.createElement(De.a.Content,null,r.a.createElement(De.a.Header,null,"Solution Description"),r.a.createElement(De.a.Description,null,r.a.createElement(ge.a,null),r.a.createElement(De.a.Header,{size:"small"},e.material_report.report)))):r.a.createElement(De.a,{fluid:!0},r.a.createElement(De.a.Content,null,r.a.createElement(De.a.Header,null,"Solution Description"),r.a.createElement(De.a.Description,null,r.a.createElement(b.a,null,r.a.createElement(ft.a,{rows:"2",required:!0,maxLength:"200",onChange:function(t,a){return e.changeMaterialReport(Object(s.a)(Object(s.a)({},e.material_report),{},{report:a.value}))}})))),r.a.createElement(De.a.Content,{extra:!0},r.a.createElement(y.a,{fluid:!0},r.a.createElement(v.a,{basic:!0,color:"green",id:"confirm",onClick:e.onConfirm,content:"Confirm"}),r.a.createElement(v.a,{basic:!0,color:"red",onClick:e.onCancel,content:"Cancel"}))))))};var wt=function(e){var t=Object(n.useState)({states:[]}),a=Object(m.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)(null),o=Object(m.a)(i,2),u=o[0],d=o[1];return Object(n.useEffect)((function(){var t=e.match.params.id;oe.a.get(H.replace(":id",t)).then((function(e){if("to_solve"!=e.data.state)return d(r.a.createElement(de,null));oe.a.get(L).then((function(t){l(Object(s.a)(Object(s.a)({},e.data),{},{states:t.data.states}))})).catch((function(e){return d(he(e.response))}))})).catch((function(e){return d(he(e.response))}))}),[]),r.a.createElement("div",null,r.a.createElement(ue.SemanticToastContainer,null),u||(c.id?r.a.createElement(_t,{changeState:function(e){"all"!==e&&l(Object(s.a)(Object(s.a)({},c),{},{state:e}))},material_report:c,changeMaterialReport:function(e){return l(e)},onConfirm:function(){var t=document.getElementById("confirm");return void 0===c.report?Object(ue.toast)({type:"warning",title:"Missing Information",description:"Insert a solution description",time:2e3,size:"mini"}):"to_solve"===c.state?Object(ue.toast)({type:"warning",title:"Missing Information",description:"Change the report state",time:2e3,size:"mini"}):(t.disabled=!0,void oe.a.patch(H.replace(":id",c.id),{state:c.state,report:c.report}).then((function(t){he(t),setTimeout((function(){return e.history.push("/auth/tech/damages")}),3e3)})).catch((function(e){he(e.response),t.disabled=!1})))},onCancel:function(){e.history.push(e.location.pathname.replace("/".concat(c.id),""))}}):r.a.createElement(ve.a,null,"Loading...",r.a.createElement(ye.a,{name:"circle notched",loading:!0}))))};var Tt=function(e){var t=Object(n.useState)({}),a=Object(m.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)(null),o=Object(m.a)(i,2),u=o[0],d=o[1];return Object(n.useEffect)((function(){var t=e.match.params.id;oe.a.get(H.replace(":id",t)).then((function(e){if("to_solve"==e.data.state)return d(r.a.createElement(de,null));l(Object(s.a)({},e.data))})).catch((function(e){return d(he(e.response))}))}),[]),r.a.createElement("div",null,r.a.createElement(ue.SemanticToastContainer,null),u||(c.id?r.a.createElement(_t,{history:!0,material_report:c}):r.a.createElement(ve.a,null,"Loading...",r.a.createElement(ye.a,{name:"circle notched",loading:!0}))))};var xt=function(e){var t=Object(n.useRef)(),a=Object(n.useState)(!1),c=Object(m.a)(a,2),l=c[0],i=c[1],o=Object(n.useState)(null),u=Object(m.a)(o,2),s=u[0],d=u[1],f=Object(n.useState)(0),p=Object(m.a)(f,2),h=p[0],E=p[1],b=Object(n.useState)(!0),g=Object(m.a)(b,2),v=g[0],y=g[1],j=Object(n.useState)([]),O=Object(m.a)(j,2),S=O[0],C=O[1],k=Object(n.useState)(null),z=Object(m.a)(k,2),I=z[0],_=z[1];Object(n.useEffect)((function(){return T.observe(t.current),function(){T.disconnect()}}),[]),Object(n.useEffect)((function(){if(s>=0&&v&&!l){var e=h+1;E(e),i(!0),t=e,a=S,oe.a.get(B.replace(":flag","true")+"&page=".concat(t)).then((function(e){var t=e.data.damages;0===t.length&&y(!1);var n=a;n.push.apply(n,Object(xe.a)(t)),C(n),i(!1)})).catch((function(e){return _(he(e.response))}))}var t,a}),[s]);var w={root:document.querySelector("#damages"),rootMargin:"5px",threshold:1},T=new IntersectionObserver((function(e){var t=e[0].intersectionRatio;d(t)}),w);return r.a.createElement("div",null,r.a.createElement(ue.SemanticToastContainer,null),I||r.a.createElement("div",null,r.a.createElement(Ct,Object.assign({title:"Damage Reports History:",material:S,moreData:v},e)),r.a.createElement("div",{id:"damages"},r.a.createElement("div",{ref:t}),l?r.a.createElement(ve.a,{size:"small"},r.a.createElement(ye.a,{name:"circle notch",loading:!0}),"Loading..."):null)))};var qt=function(e){var t=Object(n.useRef)(),a=Object(n.useState)(!1),c=Object(m.a)(a,2),l=c[0],i=c[1],o=Object(n.useState)(null),u=Object(m.a)(o,2),d=u[0],f=u[1],p=Object(n.useState)(0),b=Object(m.a)(p,2),y=b[0],j=b[1],O=Object(n.useState)(!0),S=Object(m.a)(O,2),C=S[0],k=S[1],z=Object(n.useState)(null),I=Object(m.a)(z,2),_=I[0],w=I[1],T=Object(n.useState)(!1),x=Object(m.a)(T,2),R=x[0],M=x[1],A=Object(n.useState)({}),N=Object(m.a)(A,2),B=N[0],L=N[1],H=Object(n.useState)(null),F=Object(m.a)(H,2),P=F[0],Y=F[1],J=Object(n.useState)([]),K=Object(m.a)(J,2),W=K[0],U=K[1];Object(n.useEffect)((function(){return V.observe(t.current),function(){V.disconnect()}}),[]);var Q={root:document.querySelector("#material"),rootMargin:"5px",threshold:1},V=new IntersectionObserver((function(e){var t=e[0].intersectionRatio;f(t)}),Q);function G(e){e||(e="");j(1),U([]),k(!0),i(!0),$(e,1,[])}function $(e,t,a){var n=e;n+=n?"&":"?",n+="state=available&page=".concat(t),oe.a.get(q+n).then((function(t){var n=t.data.materials;if(0===t.length&&0===a.length)return Object(ue.toast)({type:"error",title:"Something went wrong",time:2e3,size:"mini",description:"There are no results for the specified parameters"});0===n.length&&k(!1);var r=a;r.push.apply(r,Object(xe.a)(n)),U(r),i(!1),w(e)})).catch((function(e){return Y(he(e.response))}))}function X(t){var a=document.getElementById("delete"+t);a.disabled=!0;var n=document.getElementById("detail"+t);n.disabled=!0,oe.a.delete(D.replace(":id",t),{data:{quantity:void 0!=B.id?B.delete_quantity:1}}).then((function(t){he(t),setTimeout((function(){return G(e.location.search)}),3e3)})).catch((function(e){he(e.response),a.disabled=!1,n.disabled=!1})),B.id&&L({}),M(!1)}return Object(n.useEffect)((function(){if(d>=0&&C&&null!=_&&!l){var e=y+1;j(e),i(!0),$(_,e,W)}}),[d]),r.a.createElement("div",null,r.a.createElement(ue.SemanticToastContainer,null),P||r.a.createElement("div",null,r.a.createElement(E.a,{size:"medium"},"Material:"),r.a.createElement(Ae,Object.assign({},e,{setFilters:G,updateUrl:!0})),r.a.createElement("div",null,r.a.createElement(v.a,{icon:"add",content:"Add Material",onClick:function(){e.history.push("/auth/labmanager/addmaterial")}})),r.a.createElement(ge.a,null),r.a.createElement(h.a,{size:"small",open:R,dimmer:"blurring"},r.a.createElement(E.a,{size:"huge",textAlign:"center"},"Remove Material"),r.a.createElement(h.a.Content,null,r.a.createElement(h.a.Description,null,r.a.createElement(E.a,{size:"large",textAlign:"center"},"Verify the quantity to remove"),r.a.createElement(ge.a,null),r.a.createElement(E.a,{textAlign:"center"},B.name," | ",B.id),r.a.createElement(g.a,{type:"number",size:"small",required:!0,defaultValue:1,onChange:function(e,t){return a=t.value,n=B.available_quantity,parseInt(a)>parseInt(n)&&(a=n),parseInt(a)<parseInt("1")&&(a="1"),void L(Object(s.a)(Object(s.a)({},B),{},{delete_quantity:a}));var a,n},min:"1",max:B.available_quantity,style:{width:"90%"}}))),r.a.createElement(h.a.Actions,null,r.a.createElement(v.a,{color:"red",onClick:function(){return X(B.id)},content:"Remove"}),r.a.createElement(v.a,{onClick:function(){return M(!1)},content:"Cancel"}))),r.a.createElement("div",null,r.a.createElement(qe.a,{columns:3,id:"material",style:{height:30,margin:6,padding:8}},W.map((function(t){var a=r.a.createElement(v.a,{id:"delete"+t.id,compact:!0,onClick:function(){return X(t.id)},icon:"remove",content:"Delete Material",color:"red"});return"00"===t.id.slice(0,2)&&(a=r.a.createElement(v.a,{id:"delete"+t.id,compact:!0,onClick:function(){return function(e){L(Object(s.a)(Object(s.a)({},e),{},{delete_quantity:1})),M(!0)}(t)},icon:"remove",content:"Delete Material",color:"red"})),r.a.createElement(qe.a.Column,null,r.a.createElement(De.a,{centered:!0},r.a.createElement(De.a.Content,null,t.id),r.a.createElement(De.a.Content,{extra:!0,floated:"right"},r.a.createElement(v.a.Group,{fluid:!0},r.a.createElement(v.a,{id:"detail"+t.id,content:"Details",icon:"microchip",onClick:function(){return e.history.push(e.location.pathname+"/"+t.id)}}),a))))})),r.a.createElement("div",{ref:t}),l?r.a.createElement(qe.a.Column,null,r.a.createElement(ve.a,{size:"small"},r.a.createElement(ye.a,{name:"circle notch",loading:!0}),"Loading...")):null))))};var Dt=function(e){var t=Object(n.useState)([]),a=Object(m.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)([]),o=Object(m.a)(i,2),u=o[0],s=o[1],d=Object(n.useState)(""),f=Object(m.a)(d,2),p=f[0],h=f[1],b=Object(n.useState)(""),j=Object(m.a)(b,2),O=j[0],k=j[1],z=Object(n.useState)(1),I=Object(m.a)(z,2),_=I[0],w=I[1],T=Object(n.useState)(null),x=Object(m.a)(T,2),D=x[0],R=x[1];return Object(n.useEffect)((function(){var e=JSON.parse(sessionStorage.getItem("userinfo")).roles.find((function(e){return"lab_responsible"===e.name}));oe.a.get(C.replace(":id",e.sci_area_id)).then((function(t){oe.a.get(S).then((function(a){var n=a.data.sci_areas.find((function(t){return t.id===e.sci_area_id})),r=a.data.sci_areas.find((function(e){return 0===e.id}));k({id:n.id}),s([n,r]),l(t.data.types),h(t.data.types[0])})).catch((function(e){return R(he(e.response))}))})).catch((function(e){return R(he(e.response))}))}),[]),r.a.createElement("div",null,r.a.createElement(ue.SemanticToastContainer,null),D||r.a.createElement(De.a,{fluid:!0},r.a.createElement(De.a.Content,null,r.a.createElement(De.a.Header,null,"Add Material"),r.a.createElement(De.a.Meta,{style:{marginTop:"2%"}},r.a.createElement(De.a.Header,null,"Scientific Area: "),r.a.createElement(Re,{changeFilter:function(e){"all"!=e.id&&oe.a.get(C.replace(":id",e.id)).then((function(t){k(e),l(t.data.types)}))},name:"sci_area",types:u,value:O.id}),r.a.createElement("div",{style:{display:"block",float:"right"}},r.a.createElement(E.a,{size:"medium"},"Material Type:"),r.a.createElement(Re,{changeFilter:function(e){"all"!==e.id&&h(e)},name:"type",types:c,value:p.id})),r.a.createElement("div",{style:{float:"left"}},r.a.createElement(E.a,{size:"medium"},"Quantity:"),r.a.createElement(g.a,{type:"number",size:"mini",required:!0,defaultValue:1,onChange:function(e,t){return a=t.value,parseInt(a)<parseInt("1")&&w("1"),void(parseInt(a)>parseInt("10")?w("10"):w(a));var a},min:"1",max:"10",style:{width:"90%"}})))),r.a.createElement(De.a.Content,{extra:!0},r.a.createElement(y.a,{fluid:!0},r.a.createElement(v.a,{basic:!0,id:"confirm",color:"green",content:"Confirm",onClick:function(){if(""===p)return Object(ue.toast)({type:"warning",title:"Missing Information",description:"Select a type to associate the new material",time:2e3,size:"mini"});var t=document.getElementById("confirm");t.disabled=!0,oe.a.post(q,{quantity:_,type:p.id}).then((function(t){he(t),setTimeout((function(){return e.history.push(e.location.pathname.replace("/addmaterial","/material"))}),3e3)})).catch((function(e){t.disabled=!1,he(e.response)}))}}),r.a.createElement(v.a,{basic:!0,color:"red",content:"Cancel",onClick:function(){e.history.push("/auth/labmanager/material")}})))))};var Rt=function(e){var t=Object(n.useState)([]),a=Object(m.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)([]),o=Object(m.a)(i,2),u=o[0],d=o[1],f=Object(n.useState)([]),p=Object(m.a)(f,2),h=p[0],g=p[1],j=Object(n.useState)(""),O=Object(m.a)(j,2),z=O[0],I=O[1],_=Object(n.useState)(""),w=Object(m.a)(_,2),x=w[0],q=w[1],D=Object(n.useState)(""),R=Object(m.a)(D,2),M=R[0],A=R[1],N=Object(n.useState)([]),B=Object(m.a)(N,2),L=B[0],H=B[1],F=Object(n.useState)([]),P=Object(m.a)(F,2),Y=P[0],J=P[1],K=Object(n.useState)(null),W=Object(m.a)(K,2),U=W[0],Q=W[1];function V(e){var t,a=e.target.name;t=a,J(Object(s.a)(Object(s.a)({},Y),{},Object(tt.a)({},t,!Y[t])))}return Object(n.useEffect)((function(){var e=JSON.parse(sessionStorage.getItem("userinfo")).roles.find((function(e){return"lab_responsible"===e.name}));oe.a.get(S).then((function(t){var a=t.data.sci_areas.find((function(t){return t.id===e.sci_area_id})),n=t.data.sci_areas.find((function(e){return 0===e.id}));oe.a.get(C.replace(":id",e.sci_area_id)).then((function(e){g([a,n]),l(e.data.subjects),d(e.data.subjects),I({id:a.id}),J(e.data.subjects.reduce((function(e,t){return Object(s.a)(Object(s.a)({},e),{},Object(tt.a)({},t.id,!1))}),[]))})).catch((function(e){return Q(he(e.response))}))})).catch((function(e){return Q(he(e.response))})),oe.a.get(k).then((function(e){H(e.data.subjects.map((function(e){return e.id})))})).catch((function(e){return Q(he(e.response))}))}),[]),r.a.createElement("div",null,r.a.createElement(ue.SemanticToastContainer,null),U||r.a.createElement("div",null,r.a.createElement(De.a,{fluid:!0},r.a.createElement(De.a.Content,null,r.a.createElement(De.a.Header,null,"Add Material Type"),r.a.createElement(De.a.Meta,{style:{marginTop:"2%"}},r.a.createElement(De.a.Header,null,"Scientific Area:"),r.a.createElement(Re,{changeFilter:function(e){"all"===e.id?e="":("0"==e.id?l([]):l(u),I(e))},name:"sci_area",types:h,value:z.id}),r.a.createElement("div",{style:{marginTop:"2%"}},r.a.createElement(E.a,null,"Subjects:"),r.a.createElement(qe.a,{columns:5,style:{height:30,marginLeft:"5%",padding:8},centered:!0},0===c.length?r.a.createElement(E.a,null,"All Subjects Selected"):c.map((function(e){return r.a.createElement(qe.a.Column,{key:e.type},r.a.createElement(nt,{name:e.id,label:e.name,isSelected:Y[e.id],onCheckboxChange:V,key:e.type}))}))))),r.a.createElement(De.a.Description,{style:{marginTop:"10%"}},r.a.createElement(E.a,{attached:"top"},"New Material Type"),r.a.createElement(dt.a,{attached:!0},r.a.createElement(E.a,null,"Name:"),r.a.createElement(b.a,null,r.a.createElement(ft.a,{required:!0,onChange:function(e,t){return q(t.value)},style:{textAlign:"center"},maxLength:"15"})),r.a.createElement(E.a,null,"Description:"),r.a.createElement(b.a,null,r.a.createElement(ft.a,{required:!0,onChange:function(e,t){return A(t.value)},style:{textAlign:"center"},maxLength:"150"}))))),r.a.createElement(De.a.Content,{extra:!0},r.a.createElement(y.a,{fluid:!0},r.a.createElement(v.a,{basic:!0,color:"green",id:"confirm",content:"Confirm",onClick:function(){var t=Object.keys(Y).filter((function(e){return Y[e]})),a=document.getElementById("confirm");if(""===x)return Object(ue.toast)({type:"warning",title:"Missing Information",description:"Insert a name for the new type",time:2e3,size:"mini"});if(""===M)return Object(ue.toast)({type:"warning",title:"Missing Information",description:"Insert a description for the new type",time:2e3,size:"mini"});if(0!=z.id){if(0===t.length)return Object(ue.toast)({type:"warning",title:"Missing Information",description:"Select subjects to associate with the new type",time:2e3,size:"mini"});a.disabled=!0,oe.a.post(T.replace(":sciAreaId",z.id),{name:x,description:M,subjects:t}).then((function(t){he(t),setTimeout((function(){return e.history.push(e.location.pathname.replace("/addtype","/type"))}),3e3)})).catch((function(e){he(e.response),a.disabled=!1}))}else a.disabled=!0,oe.a.post(T.replace(":sciAreaId",z.id),{name:x,description:M,subjects:L}).then((function(t){he(t),setTimeout((function(){return e.history.push(e.location.pathname.replace("/addtype","/type"))}),3e3)})).catch((function(e){he(e.response),a.disabled=!1}))}}),r.a.createElement(v.a,{basic:!0,color:"red",content:"Cancel",onClick:function(){e.history.push("/auth/labmanager/type")}}))))))};var Mt=function(e){var t=Object(n.useState)([]),a=Object(m.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)(""),o=Object(m.a)(i,2),u=o[0],s=o[1],d=Object(n.useState)({}),f=Object(m.a)(d,2),p=f[0],h=f[1],b=Object(n.useState)(null),y=Object(m.a)(b,2),j=y[0],O=y[1];function S(){oe.a.get(C.replace(":id",p.id)).then((function(e){l(e.data.subjects||[]),s("")})).catch((function(e){return O(he(e.response))}))}return Object(n.useEffect)((function(){var t=e.match.params.id;oe.a.get(C.replace(":id",t)).then((function(e){l(e.data.subjects||[]),h({name:e.data.name,id:t})})).catch((function(e){return O(he(e.response))}))}),[]),r.a.createElement("div",null,r.a.createElement(ue.SemanticToastContainer,null),j||(p.id?r.a.createElement("div",null,r.a.createElement(E.a,{size:"medium"},"Scientific Area: ",p.name),r.a.createElement(ge.a,null),r.a.createElement(E.a,{size:"medium"},"Subjects:"),r.a.createElement("div",{className:"ui medium action input"},r.a.createElement(g.a,{id:"addsubject",type:"text",maxLength:"4",onChange:function(e,t){var a;""!=(a=t.value)&&s(a)},action:r.a.createElement(v.a,{onClick:function(){var e=document.getElementById("addsubject");""!=e.value&&""!=u&&oe.a.post(I.replace(":sciAreaId",p.id),{name:u}).then((function(t){e.value="",he(t),setTimeout((function(){return S()}),3e3)})).catch((function(e){he(e.response)}))}},"Add"),placeholder:"Subjects..."})),r.a.createElement(Be.a,{divided:!0},c.map((function(e){return r.a.createElement(Be.a.Item,{key:e.id},r.a.createElement(Be.a.Content,{floated:"right"},r.a.createElement(v.a,{size:"big",id:"delete"+e.id,compact:!0,onClick:function(){return function(e){var t=document.getElementById("delete".concat(e));t.disabled=!0,oe.a.delete(I.replace(":sciAreaId",p.id)+"/".concat(e)).then((function(e){he(e),setTimeout((function(){return S()}),3e3)})).catch((function(e){he(e.response),t.disabled=!1}))}(e.id)},icon:"red close"})),r.a.createElement(Be.a.Content,null,e.name))})))):r.a.createElement(ve.a,null,"Loading...",r.a.createElement(ye.a,{name:"circle notched",loading:!0}))))};var At=function(e){var t=Object(n.useState)([]),a=Object(m.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)(""),o=Object(m.a)(i,2),u=o[0],s=o[1],d=Object(n.useState)(null),f=Object(m.a)(d,2),p=f[0],h=f[1];function b(e){oe.a.get(C.replace(":id",e)).then((function(e){oe.a.get(C.replace(":id","0")).then((function(t){l([].concat(Object(xe.a)(e.data.types),Object(xe.a)(t.data.types)))})).catch((function(e){return h(he(e.response))}))})).catch((function(e){return h(he(e.response))}))}return Object(n.useEffect)((function(){var e=JSON.parse(sessionStorage.getItem("userinfo")).roles.find((function(e){return"lab_responsible"===e.name}));s(e.sci_area_id),b(e.sci_area_id)}),[]),r.a.createElement("div",null,r.a.createElement(ue.SemanticToastContainer,null),p||r.a.createElement("div",null,r.a.createElement(E.a,{size:"medium"},"Material Type:"),r.a.createElement(v.a,{size:"medium",icon:"add",content:"Add Type",onClick:function(){e.history.push("/auth/labmanager/addtype")}}),r.a.createElement(ge.a,null),r.a.createElement(Be.a,{divided:!0},c.map((function(e){return r.a.createElement(Be.a.Item,{key:e.id},r.a.createElement(Be.a.Content,{floated:"right"},r.a.createElement(v.a,{size:"big",compact:!0,icon:"red close",id:"delete"+e.id,onClick:function(){return function(e){var t=document.getElementById("delete"+e);t.disabled=!0;var a=u;"00"==e.slice(0,2)&&(a="0"),oe.a.delete(x.replace(":sciAreaId",a).replace(":id",e)).then((function(e){he(e),setTimeout((function(){return b(u)}),3e3)})).catch((function(e){he(e.response),t.disabled=!1}))}(e.id)}})),r.a.createElement(Be.a.Content,null,e.name))})))))};var Nt=function(e){var t=Object(n.useState)({roles:[]}),a=Object(m.a)(t,2),c=a[0],l=a[1];return Object(n.useEffect)((function(){var e=JSON.parse(sessionStorage.getItem("userinfo"));l(e)}),[]),r.a.createElement(De.a,{centered:!0},r.a.createElement(j.a,{src:"data:image/jpeg;base64,".concat(c.photo),wrapped:!0,ui:!1}),r.a.createElement(De.a.Content,null,r.a.createElement(De.a.Header,null,c.name),r.a.createElement(De.a.Description,null,"Active Role: ",e.role)),r.a.createElement(De.a.Content,{extra:!0},r.a.createElement("a",null,r.a.createElement("p",null,r.a.createElement(ye.a,{name:"users"}),"Roles:"),c.roles.map((function(e,t){return t+1===c.roles.length?e.name:e.name+", "})))))},Bt=a(22),Lt=a(453),Ht=function(e){Object(Ve.a)(a,e);var t=Object(Ge.a)(a);function a(e){var n;return Object(Ue.a)(this,a),(n=t.call(this,e)).handleChange=function(e,t){t.name;var a=t.value;n.props.setMonth&&n.props.setMonth(a)},n.state={month:""},n}return Object(Qe.a)(a,[{key:"currentTime",value:function(){var e=new Date,t=String(e.getMonth()+1).padStart(2,"0"),a=e.getFullYear();return e=a+"-"+t}},{key:"render",value:function(){return r.a.createElement(b.a,null,r.a.createElement($e.MonthInput,{dateFormat:"YYYY-MM",name:"date",placeholder:"Data",value:this.props.date,iconPosition:"left",popupPosition:"top left",onChange:this.handleChange,maxDate:this.currentTime()}))}}]),a}(n.Component),Ft=function(e){Object(Ve.a)(a,e);var t=Object(Ge.a)(a);function a(e){var n;return Object(Ue.a)(this,a),(n=t.call(this,e)).handleChange=function(e,t){t.name;var a=t.value;n.props.setYear&&n.props.setYear(a)},n.state={year:""},n}return Object(Qe.a)(a,[{key:"currentTime",value:function(){var e=new Date,t=e.getFullYear();return e=t}},{key:"render",value:function(){return r.a.createElement(b.a,null,r.a.createElement($e.YearInput,{dateFormat:"YYYY",name:"date",placeholder:"Data",value:this.props.date,iconPosition:"left",popupPosition:"top left",onChange:this.handleChange,maxDate:this.currentTime()}))}}]),a}(n.Component);var Pt=function(){var e=Object(n.useState)([]),t=Object(m.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)([]),i=Object(m.a)(l,2),o=i[0],u=i[1],s=Object(n.useState)([]),d=Object(m.a)(s,2),f=d[0],p=d[1],h=Object(n.useState)([]),b=Object(m.a)(h,2),g=b[0],y=b[1],j=Object(n.useState)([]),O=Object(m.a)(j,2),S=O[0],C=O[1],k=Object(n.useState)("all"),z=Object(m.a)(k,2),I=z[0],w=z[1],T=Object(n.useState)(null),x=Object(m.a)(T,2),q=x[0],D=x[1],R=Object(n.useState)([]),M=Object(m.a)(R,2),A=M[0],N=M[1],B=Object(n.useState)([]),L=Object(m.a)(B,2),H=L[0],F=L[1],P=Object(n.useState)("all"),Y=Object(m.a)(P,2),J=Y[0],K=Y[1],W=Object(n.useState)([]),U=Object(m.a)(W,2),Q=U[0],V=U[1],G=Object(n.useState)("all"),ie=Object(m.a)(G,2),se=ie[0],me=ie[1],de=Object(n.useState)(""),fe=Object(m.a)(de,2),pe=fe[0],Ee=fe[1],be=Object(n.useState)(""),ve=Object(m.a)(be,2),ye=ve[0],je=ve[1],Oe=Object(n.useState)([]),Se=Object(m.a)(Oe,2),Ce=Se[0],ke=Se[1],ze=Object(n.useState)("all"),Ie=Object(m.a)(ze,2),_e=Ie[0],we=Ie[1],Te=Object(n.useState)(""),xe=Object(m.a)(Te,2),qe=xe[0],De=xe[1],Me=Object(n.useState)(""),Ae=Object(m.a)(Me,2),Ne=Ae[0],Be=Ae[1],Le=Object(n.useState)([]),He=Object(m.a)(Le,2),Fe=He[0],Pe=He[1],Ye=Object(n.useState)("all"),Je=Object(m.a)(Ye,2),Ke=Je[0],We=Je[1],Ue=Object(n.useState)(""),Qe=Object(m.a)(Ue,2),Ve=Qe[0],Ge=Qe[1],$e=Object(n.useState)(""),Ze=Object(m.a)($e,2),et=Ze[0],tt=Ze[1];function at(){oe.a.get($).then((function(e){u(e.data.data)})).catch((function(e){return he(e.response)}))}function nt(){oe.a.get(X).then((function(e){p(e.data.data)})).catch((function(e){return he(e.response)}))}function rt(){oe.a.get(Z).then((function(e){y(e.data.data)})).catch((function(e){return he(e.response)}))}function ct(){var e="";"all"!=I&&(e+="?type=".concat(I)),oe.a.get(ee+e).then((function(e){C(e.data.data)})).catch((function(e){return he(e.response)}))}function lt(){oe.a.get(te).then((function(e){D(e.data.average)})).catch((function(e){return he(e.response)}))}function it(){oe.a.get(ae).then((function(e){N(e.data.data)})).catch((function(e){return he(e.response)}))}function ot(){var e="";"all"!=J&&(e+="?type=".concat(J)),oe.a.get(ne+e).then((function(e){F(e.data.data)})).catch((function(e){return he(e.response)}))}function ut(){var e="";"all"!=se&&(e+="?type=".concat(se)),""!=pe&&(e.length>0?e+="&":e+="?",e+="from=".concat(pe)),""!=ye&&(e.length>0?e+="&":e+="?",e+="to=".concat(ye)),oe.a.get(re+e).then((function(e){V(e.data.data)})).catch((function(e){return he(e.response)}))}function st(){var e="";"all"!=_e&&(e+="?type=".concat(_e)),""!=qe&&(e.length>0?e+="&":e+="?",e+="from=".concat(qe)),""!=Ne&&(e.length>0?e+="&":e+="?",e+="to=".concat(Ne)),oe.a.get(ce+e).then((function(e){ke(e.data.data)})).catch((function(e){return he(e.response)}))}function mt(){var e="";"all"!=Ke&&(e+="?type=".concat(Ke)),""!=Ve&&(e.length>0?e+="&":e+="?",e+="from=".concat(Ve)),""!=et&&(e.length>0?e+="&":e+="?",e+="to=".concat(et)),oe.a.get(le+e).then((function(e){Pe(e.data.data)})).catch((function(e){return he(e.response)}))}return Object(n.useEffect)((function(){oe.a.get(_).then((function(e){c(e.data.types)})).catch((function(e){return he(e.response)})),at(),nt(),rt(),ct(),lt(),it(),ot(),ut(),st(),mt()}),[]),r.a.createElement("div",null,r.a.createElement(ue.SemanticToastContainer,null),r.a.createElement(E.a,null,"Statistics"),r.a.createElement(ge.a,{style:{marginBottom:"5%"}}),r.a.createElement("div",null,r.a.createElement(v.a,{style:{float:"right"},icon:"refresh",circular:!0,basic:!0,onClick:lt}),r.a.createElement(E.a,{size:"small"},"Average Time to Repair"),r.a.createElement(Lt.a,null,r.a.createElement(Lt.a.Value,null,q),r.a.createElement(Lt.a.Label,null,"Minutes"))),r.a.createElement("div",{style:{marginTop:"5%"}},r.a.createElement(v.a,{style:{float:"right"},icon:"refresh",circular:!0,basic:!0,onClick:at}),r.a.createElement(E.a,{size:"small"},"Top Ten Most Used Material Types"),r.a.createElement(Bt.b,{width:700,height:300,style:{marginLeft:"auto",marginRight:"auto"},data:o},r.a.createElement(Bt.c,{strokeDasharray:"3 3"}),r.a.createElement(Bt.f,{dataKey:"type_name"}),r.a.createElement(Bt.g,null),r.a.createElement(Bt.e,null),r.a.createElement(Bt.d,null),r.a.createElement(Bt.a,{dataKey:"nr_times",fill:"#c46b5e"}))),r.a.createElement("div",{style:{marginTop:"5%"}},r.a.createElement(v.a,{style:{float:"right"},icon:"refresh",circular:!0,basic:!0,onClick:nt}),r.a.createElement(E.a,{size:"small"},"Top Ten Most Used Material"),r.a.createElement(Bt.b,{width:700,height:300,style:{marginLeft:"auto",marginRight:"auto"},data:f},r.a.createElement(Bt.c,{strokeDasharray:"3 3"}),r.a.createElement(Bt.f,{dataKey:"material_name"}),r.a.createElement(Bt.g,null),r.a.createElement(Bt.e,null),r.a.createElement(Bt.d,null),r.a.createElement(Bt.a,{dataKey:"nr_times",fill:"#c46b5e"}))),r.a.createElement("div",{style:{marginTop:"6.8%"}},r.a.createElement(v.a,{style:{float:"right"},icon:"refresh",circular:!0,basic:!0,onClick:rt}),r.a.createElement(E.a,{size:"small"},"Damages Per Type"),r.a.createElement(Bt.b,{width:700,height:300,style:{marginLeft:"auto",marginRight:"auto"},data:g},r.a.createElement(Bt.c,{strokeDasharray:"3 3"}),r.a.createElement(Bt.f,{dataKey:"type_name"}),r.a.createElement(Bt.g,null),r.a.createElement(Bt.e,null),r.a.createElement(Bt.d,null),r.a.createElement(Bt.a,{dataKey:"nr_damages",fill:"#c46b5e"}))),r.a.createElement("div",{style:{marginTop:"5%"}},r.a.createElement(v.a,{style:{float:"right"},icon:"refresh",circular:!0,basic:!0,onClick:ct}),r.a.createElement(E.a,{size:"small"},"Damaged Material"),r.a.createElement(Re,{types:a,value:I,changeFilter:function(e){w(e.id)}}),r.a.createElement(Bt.b,{width:700,height:300,style:{marginLeft:"auto",marginRight:"auto"},data:S},r.a.createElement(Bt.c,{strokeDasharray:"3 3"}),r.a.createElement(Bt.f,{dataKey:"material_name"}),r.a.createElement(Bt.g,null),r.a.createElement(Bt.e,null),r.a.createElement(Bt.d,null),r.a.createElement(Bt.a,{dataKey:"nr_damages",fill:"#c46b5e"}))),r.a.createElement("div",{style:{marginTop:"6.8%"}},r.a.createElement(v.a,{style:{float:"right"},icon:"refresh",circular:!0,basic:!0,onClick:it}),r.a.createElement(E.a,{size:"small"},"Number of Requested Hours Per Type"),r.a.createElement(Bt.b,{width:700,height:300,style:{marginLeft:"auto",marginRight:"auto"},data:A},r.a.createElement(Bt.c,{strokeDasharray:"3 3"}),r.a.createElement(Bt.f,{dataKey:"type_name"}),r.a.createElement(Bt.g,null),r.a.createElement(Bt.e,null),r.a.createElement(Bt.d,null),r.a.createElement(Bt.a,{dataKey:"hours",fill:"#c46b5e"}))),r.a.createElement("div",{style:{marginTop:"5%"}},r.a.createElement(v.a,{style:{float:"right"},icon:"refresh",circular:!0,basic:!0,onClick:ot}),r.a.createElement(E.a,{size:"small"},"Number of Requested Hours Per Material"),r.a.createElement(Re,{types:a,value:J,changeFilter:function(e){K(e.id)}}),r.a.createElement(Bt.b,{width:700,height:300,style:{marginLeft:"auto",marginRight:"auto"},data:H},r.a.createElement(Bt.c,{strokeDasharray:"3 3"}),r.a.createElement(Bt.f,{dataKey:"material_name"}),r.a.createElement(Bt.g,null),r.a.createElement(Bt.e,null),r.a.createElement(Bt.d,null),r.a.createElement(Bt.a,{dataKey:"hours",fill:"#c46b5e"}))),r.a.createElement("div",{style:{marginTop:"5%"}},r.a.createElement(v.a,{style:{float:"right"},icon:"refresh",circular:!0,basic:!0,onClick:ut}),r.a.createElement(E.a,{size:"small"},"Requests Per Type By Day"),r.a.createElement(v.a,{content:"Reset",floated:"right",onClick:function(){je(""),Ee(""),me("all")}}),r.a.createElement(Re,{types:a,value:se,changeFilter:function(e){me(e.id)}}),"From: ",r.a.createElement(Xe,{setDay:function(e){return Ee(e)},date:pe}),"To: ",r.a.createElement(Xe,{setDay:function(e){return je(e)},date:ye}),r.a.createElement(Bt.b,{width:700,height:300,style:{marginLeft:"auto",marginRight:"auto"},data:Q},r.a.createElement(Bt.c,{strokeDasharray:"3 3"}),r.a.createElement(Bt.f,{dataKey:"material_name"}),r.a.createElement(Bt.g,null),r.a.createElement(Bt.e,null),r.a.createElement(Bt.d,null),r.a.createElement(Bt.a,{dataKey:"nr_requests",fill:"#c46b5e"}))),r.a.createElement("div",{style:{marginTop:"5%"}},r.a.createElement(v.a,{style:{float:"right"},icon:"refresh",circular:!0,basic:!0,onClick:st}),r.a.createElement(E.a,{size:"small"},"Requests Per Type By Month"),r.a.createElement(v.a,{content:"Reset",floated:"right",onClick:function(){Be(""),De(""),we("all")}}),r.a.createElement(Re,{types:a,value:_e,changeFilter:function(e){we(e.id)}}),"From: ",r.a.createElement(Ht,{setMonth:function(e){return De(e)},date:qe}),"To: ",r.a.createElement(Ht,{setMonth:function(e){return Be(e)},date:Ne}),r.a.createElement(Bt.b,{width:700,height:300,style:{marginLeft:"auto",marginRight:"auto"},data:Ce},r.a.createElement(Bt.c,{strokeDasharray:"3 3"}),r.a.createElement(Bt.f,{dataKey:"material_name"}),r.a.createElement(Bt.g,null),r.a.createElement(Bt.e,null),r.a.createElement(Bt.d,null),r.a.createElement(Bt.a,{dataKey:"nr_requests",fill:"#c46b5e"}))),r.a.createElement("div",{style:{marginTop:"5%"}},r.a.createElement(v.a,{style:{float:"right"},icon:"refresh",circular:!0,basic:!0,onClick:mt}),r.a.createElement(E.a,{size:"small"},"Requests Per Type By Year"),r.a.createElement(v.a,{content:"Reset",floated:"right",onClick:function(){tt(""),Ge(""),We("all")}}),r.a.createElement(Re,{types:a,value:Ke,changeFilter:function(e){We(e.id)}}),"From: ",r.a.createElement(Ft,{setYear:function(e){return Ge(e)},date:Ve}),"To: ",r.a.createElement(Ft,{setYear:function(e){return tt(e)},date:et}),r.a.createElement(Bt.b,{width:700,height:300,style:{marginLeft:"auto",marginRight:"auto"},data:Fe},r.a.createElement(Bt.c,{strokeDasharray:"3 3"}),r.a.createElement(Bt.f,{dataKey:"material_name"}),r.a.createElement(Bt.g,null),r.a.createElement(Bt.e,null),r.a.createElement(Bt.d,null),r.a.createElement(Bt.a,{dataKey:"nr_requests",fill:"#c46b5e"}))))};var Yt=function(e){return r.a.createElement(o.b,{history:Object(u.a)()},r.a.createElement(o.c,null,r.a.createElement(o.a,{exact:!0,path:"/",render:function(e){return r.a.createElement(be,e)}}),r.a.createElement(o.a,{path:"/auth/roles",render:function(e){return r.a.createElement(je,e)}}),r.a.createElement(o.a,{exact:!0,path:"/auth/staff",render:function(e){return r.a.createElement(ze,null,r.a.createElement(We,e)," ")}}),r.a.createElement(o.a,{exact:!0,path:"/auth/staff/material",render:function(e){return r.a.createElement(ze,null,r.a.createElement(Ne,e)," ")}}),r.a.createElement(o.a,{exact:!0,path:"/auth/staff/material/:id",render:function(e){return r.a.createElement(ze,null,r.a.createElement(Fe,e)," ")}}),r.a.createElement(o.a,{exact:!0,path:"/auth/staff/request",render:function(e){return r.a.createElement(ze,null,r.a.createElement(et,e)," ")}}),r.a.createElement(o.a,{exact:!0,path:"/auth/staff/request/:id",render:function(e){return r.a.createElement(ze,null,r.a.createElement(rt,e)," ")}}),r.a.createElement(o.a,{exact:!0,path:"/auth/staff/newrequest/material",render:function(e){return r.a.createElement(ze,null,r.a.createElement(ot,e)," ")}}),r.a.createElement(o.a,{path:"/auth/staff/newrequest/material/checkout",render:function(e){return r.a.createElement(ze,null,r.a.createElement(mt,Object.assign({},e,{newRequest:!0}))," ")}}),r.a.createElement(o.a,{exact:!0,path:"/auth/staff/request/:id/material",render:function(e){return r.a.createElement(ze,null,r.a.createElement(ot,e)," ")}}),r.a.createElement(o.a,{path:"/auth/staff/request/:id/material/checkout",render:function(e){return r.a.createElement(ze,null,r.a.createElement(mt,e)," ")}}),r.a.createElement(o.a,{path:"/auth/staff/material/:id/report",render:function(e){return r.a.createElement(ze,null,r.a.createElement(pt,e)," ")}}),r.a.createElement(o.a,{exact:!0,path:"/auth/admin",render:function(e){return r.a.createElement(Ie,null,r.a.createElement(Nt,{role:"Administrator"})," ")}}),r.a.createElement(o.a,{exact:!0,path:"/auth/admin/usersroles",render:function(e){return r.a.createElement(Ie,null,r.a.createElement(Et,e)," ")}}),r.a.createElement(o.a,{path:"/auth/admin/usersroles/:id",render:function(e){return r.a.createElement(Ie,null,r.a.createElement(bt,e)," ")}}),r.a.createElement(o.a,{exact:!0,path:"/auth/admin/areas",render:function(e){return r.a.createElement(Ie,null,r.a.createElement(gt,e)," ")}}),r.a.createElement(o.a,{path:"/auth/admin/areas/:id/course",render:function(e){return r.a.createElement(Ie,null,r.a.createElement(Mt,e)," ")}}),r.a.createElement(o.a,{path:"/auth/admin/statistics",render:function(e){return r.a.createElement(Ie,null,r.a.createElement(Pt,null)," ")}}),r.a.createElement(o.a,{exact:!0,path:"/auth/teacher",render:function(e){return r.a.createElement(we,null,r.a.createElement(Nt,{role:"Teacher"})," ")}}),r.a.createElement(o.a,{exact:!0,path:"/auth/teacher/material",render:function(e){return r.a.createElement(we,null,r.a.createElement(Ne,e)," ")}}),r.a.createElement(o.a,{path:"/auth/teacher/material/:id",render:function(e){return r.a.createElement(we,null,r.a.createElement(Fe,e)," ")}}),r.a.createElement(o.a,{exact:!0,path:"/auth/teacher/reservation",render:function(e){return r.a.createElement(we,null,r.a.createElement(Ot,e)," ")}}),r.a.createElement(o.a,{exact:!0,path:"/auth/teacher/reservation/:id",render:function(e){return r.a.createElement(we,null,r.a.createElement(St,e)," ")}}),r.a.createElement(o.a,{exact:!0,path:"/auth/teacher/newreservation/types",render:function(e){return r.a.createElement(we,null,r.a.createElement(vt,e)," ")}}),r.a.createElement(o.a,{path:"/auth/teacher/newreservation/types/checkout",render:function(e){return r.a.createElement(we,null,r.a.createElement(jt,Object.assign({},e,{newReservation:!0}))," ")}}),r.a.createElement(o.a,{exact:!0,path:"/auth/tech",render:function(e){return r.a.createElement(_e,null,r.a.createElement(Nt,{role:"Technician"})," ")}}),r.a.createElement(o.a,{exact:!0,path:"/auth/tech/damages",render:function(e){return r.a.createElement(_e,null,r.a.createElement(kt,e)," ")}}),r.a.createElement(o.a,{path:"/auth/tech/damages/:id",render:function(e){return r.a.createElement(_e,null,r.a.createElement(wt,e)," ")}}),r.a.createElement(o.a,{exact:!0,path:"/auth/tech/history",render:function(e){return r.a.createElement(_e,null,r.a.createElement(xt,e)," ")}}),r.a.createElement(o.a,{path:"/auth/tech/history/:id",render:function(e){return r.a.createElement(_e,null,r.a.createElement(Tt,e)," ")}}),r.a.createElement(o.a,{exact:!0,path:"/auth/labmanager",render:function(e){return r.a.createElement(Te,null,r.a.createElement(Nt,{role:"Laboratory Responsible"})," ")}}),r.a.createElement(o.a,{exact:!0,path:"/auth/labmanager/statistics",render:function(e){return r.a.createElement(Te,null,r.a.createElement(Pt,null)," ")}}),r.a.createElement(o.a,{exact:!0,path:"/auth/labmanager/material",render:function(e){return r.a.createElement(Te,null,r.a.createElement(qt,e)," ")}}),r.a.createElement(o.a,{exact:!0,path:"/auth/labmanager/type",render:function(e){return r.a.createElement(Te,null,r.a.createElement(At,e)," ")}}),r.a.createElement(o.a,{path:"/auth/labmanager/material/:id",render:function(e){return r.a.createElement(Te,null,r.a.createElement(Fe,e)," ")}}),r.a.createElement(o.a,{path:"/auth/labmanager/addmaterial",render:function(e){return r.a.createElement(Te,null,r.a.createElement(Dt,e)," ")}}),r.a.createElement(o.a,{path:"/auth/labmanager/addtype",render:function(e){return r.a.createElement(Te,null,r.a.createElement(Rt,e)," ")}}),r.a.createElement(o.a,{path:"*",render:function(){return r.a.createElement(de,{home:!0})}})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(i.a,null,r.a.createElement(Yt,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[502,1,2]]]);